{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./config/app.js","webpack:///./config/babel/client.js","webpack:///./config/babel/server.js","webpack:///./config/debug.js","webpack:///./config/webpack/client.js","webpack:///./config/webpack/common.js","webpack:///./config/webpack/ssr.js","webpack:///./create/router/api/helpers.js","webpack:///./create/router/api/email/resubscribe.js","webpack:///./create/router/api/email/unsubscribe/via-encrypted-email.js","webpack:///./create/router/api/email/unsubscribe/via-email-sent-hash.js","webpack:///./create/router/api/email/unsubscribe/index.js","webpack:///./create/router/api/email/unsubscriptions.js","webpack:///./create/router/api/email/index.js","webpack:///./create/router/api/room/helpers.js","webpack:///./create/router/api/room/get.js","webpack:///./create/router/api/room/post_guess.js","webpack:///./create/router/api/room/post_mark-chosen-letter.js","webpack:///./create/router/api/room/post_mark-guess-as-invalid.js","webpack:///./create/router/api/room/post_mark-guess-as-valid.js","webpack:///./create/router/api/room/post_init-player.js","webpack:///./create/router/api/room/index.js","webpack:///./create/router/api/create-a-room/create-email-sent-records.js","webpack:///./create/router/api/create-a-room/create-game-and-players.js","webpack:///./lib/server/email/template-name-to-compile.js","webpack:///./lib/server/email/send.js","webpack:///./create/router/api/create-a-room/create-send-emails.js","webpack:///./create/router/api/create-a-room/if-not-unsubscribed.js","webpack:///./lib/server/email/encrypt.js","webpack:///./create/router/api/create-a-room/index.js","webpack:///./create/router/api/index.js","webpack:///./create/router/debug.js","webpack:///./create/router/page/index.js","webpack:///./create/websocket-server/debug.js","webpack:///./create/websocket-server/live-update.js","webpack:///./create/websocket-server/index.js","webpack:///./dev-modules/fes/lib/internal/always-return.js","webpack:///./dev-modules/fes/lib/internal/clone_object.js","webpack:///./dev-modules/fes/lib/internal/m-set_map.js","webpack:///./dev-modules/fes/lib/internal/m-set_object.js","webpack:///./dev-modules/fes/lib/internal/reduce_map.js","webpack:///./dev-modules/fes/lib/internal/reduce_object.js","webpack:///./dev-modules/fes/lib/internal/first_map-or-set.js","webpack:///./dev-modules/fes/lib/internal/first-character-to-lower-case.js","webpack:///./dev-modules/fes/lib/internal/flow.js","webpack:///./dev-modules/fes/lib/internal/pass-through.js","webpack:///./dev-modules/fes/lib/internal/contains_string.js","webpack:///./dev-modules/fes/lib/internal/get-first-n-lines.js","webpack:///./dev-modules/fes/lib/internal/truncate-to-n-lines.js","webpack:///./dev-modules/fes/lib/internal/truncate-to-n-chars.js","webpack:///./dev-modules/fes/lib/helpers.js","webpack:///./dev-modules/fes/lib/internal/assign-over-recursively.js","webpack:///./dev-modules/fes/lib/internal/assign-over_map.js","webpack:///./dev-modules/fes/lib/internal/assign-over_object.js","webpack:///./dev-modules/fes/lib/internal/assign-over_set.js","webpack:///./dev-modules/fes/lib/internal/reduce_set.js","webpack:///./dev-modules/fes/lib/internal/keep-intersection_set.js","webpack:///./dev-modules/fes/lib/internal/set-of-keys_map.js","webpack:///./dev-modules/fes/lib/internal/can-combine_map.js","webpack:///./dev-modules/fes/lib/internal/get-array-of-values_set.js","webpack:///./dev-modules/fes/lib/internal/join_array-like.js","webpack:///./dev-modules/fes/lib/internal/keep-first_array-like.js","webpack:///./dev-modules/fes/lib/internal/for-each_array-like.js","webpack:///./dev-modules/fes/lib/internal/map_array-like.js","webpack:///./dev-modules/fes/lib/internal/m-append_array-like.js","webpack:///./dev-modules/fes/lib/internal/set-of-keys_object.js","webpack:///./dev-modules/fes/lib/internal/can-combine_object.js","webpack:///./dev-modules/fes/lib/internal/can-combine_set.js","webpack:///./dev-modules/fes/lib/internal/clone_arguments.js","webpack:///./dev-modules/fes/lib/internal/clone_array.js","webpack:///./dev-modules/fes/lib/internal/copy-own-enumerable-props.js","webpack:///./dev-modules/fes/lib/internal/clone_date.js","webpack:///./dev-modules/fes/lib/internal/construct_0arg.js","webpack:///./dev-modules/fes/lib/internal/construct_1arg.js","webpack:///./dev-modules/fes/lib/internal/contains-all_set.js","webpack:///./dev-modules/fes/lib/internal/contains-all_array-like.js","webpack:///./dev-modules/fes/lib/internal/create-empty-collection-from-instance.js","webpack:///./dev-modules/fes/lib/internal/discard-all_set.js","webpack:///./dev-modules/fes/lib/internal/discard-at_array-like.js","webpack:///./dev-modules/fes/lib/internal/discard-first_array-like.js","webpack:///./dev-modules/fes/lib/internal/discard-first_string.js","webpack:///./dev-modules/fes/lib/internal/discard-last_array-like.js","webpack:///./dev-modules/fes/lib/internal/discard-when_array-like.js","webpack:///./dev-modules/fes/lib/internal/filter_object.js","webpack:///./dev-modules/fes/lib/internal/find-first-when_array-like.js","webpack:///./dev-modules/fes/lib/internal/first_array-like.js","webpack:///./dev-modules/fes/lib/internal/flip.js","webpack:///./dev-modules/fes/lib/internal/get-count_object.js","webpack:///./dev-modules/fes/lib/internal/get-value-at_object.js","webpack:///./dev-modules/fes/lib/internal/get-value-from_object.js","webpack:///./dev-modules/fes/lib/internal/has-key_object.js","webpack:///./dev-modules/fes/lib/internal/has-own-enumerable-key.js","webpack:///./dev-modules/fes/lib/internal/invoke.js","webpack:///./dev-modules/fes/lib/internal/is-empty_has-length.js","webpack:///./dev-modules/fes/lib/internal/is-empty_has-size.js","webpack:///./dev-modules/fes/lib/internal/is-empty_object.js","webpack:///./dev-modules/fes/lib/internal/negate.js","webpack:///./dev-modules/fes/lib/internal/is-laden_has-length.js","webpack:///./dev-modules/fes/lib/internal/is-laden_has-size.js","webpack:///./dev-modules/fes/lib/internal/is-laden_object.js","webpack:///./dev-modules/fes/lib/internal/is-truthy.js","webpack:///./dev-modules/fes/lib/internal/join_set.js","webpack:///./dev-modules/fes/lib/internal/jstring.js","webpack:///./dev-modules/fes/lib/internal/keep-first_string.js","webpack:///./dev-modules/fes/lib/internal/keep-intersection_array.js","webpack:///./dev-modules/fes/lib/internal/keep-when_array-like.js","webpack:///./dev-modules/fes/lib/internal/last_array-like.js","webpack:///./dev-modules/fes/lib/internal/m-assign-over_map.js","webpack:///./dev-modules/fes/lib/internal/m-assign-over_object.js","webpack:///./dev-modules/fes/lib/internal/m-assign-over_set.js","webpack:///./dev-modules/fes/lib/internal/m-map_array-like.js","webpack:///./dev-modules/fes/lib/internal/m-map_object.js","webpack:///./dev-modules/fes/lib/internal/m-transform-properties.js","webpack:///./dev-modules/fes/lib/internal/map_object.js","webpack:///./dev-modules/fes/lib/internal/noop.js","webpack:///./dev-modules/fes/lib/internal/reduce_array-like.js","webpack:///./dev-modules/fes/lib/internal/repeat_string.js","webpack:///./dev-modules/fes/lib/internal/return-first-argument.js","webpack:///./dev-modules/fes/lib/internal/strictly-equals.js","webpack:///./dev-modules/fes/lib/internal/transform-properties_object.js","webpack:///./dev-modules/fes/lib/internal/index.js","webpack:///./dev-modules/fes/lib/create/utility/helpers.js","webpack:///./dev-modules/fes/lib/create/utility/approve-data-argument.js","webpack:///./dev-modules/fes/lib/create/utility/approve-types.js","webpack:///./dev-modules/fes/lib/create/utility/approve-service-arguments.js","webpack:///./dev-modules/fes/lib/create/utility/normalize/expected-argument-types.js","webpack:///./dev-modules/fes/lib/create/utility/normalize/has-no-data-argument.js","webpack:///./dev-modules/fes/lib/create/utility/normalize/type-to-function.js","webpack:///./dev-modules/fes/lib/create/utility/normalize/type-to-data-dependent-props.js","webpack:///./dev-modules/fes/lib/create/utility/normalize/definition.js","webpack:///./dev-modules/fes/lib/internal/first-key_object.js","webpack:///./dev-modules/fes/lib/create/utility/create-array-of-data-utility.js","webpack:///./dev-modules/fes/lib/create/utility/create-no-data-argument-utility.js","webpack:///./dev-modules/fes/lib/create/utility/create-data-dependent-utility.js","webpack:///./dev-modules/fes/lib/create/utility/special-case.js","webpack:///./dev-modules/fes/lib/create/utility/index.js","webpack:///./dev-modules/fes/lib/definitions/contains-all.js","webpack:///./dev-modules/fes/lib/definitions/all-contained-in.js","webpack:///./dev-modules/fes/lib/definitions/all.js","webpack:///./dev-modules/fes/lib/definitions/always-return.js","webpack:///./dev-modules/fes/lib/definitions/any.js","webpack:///./dev-modules/fes/lib/definitions/append-all.js","webpack:///./dev-modules/fes/lib/definitions/append.js","webpack:///./dev-modules/fes/lib/definitions/append-to.js","webpack:///./dev-modules/fes/lib/definitions/apply-at.js","webpack:///./dev-modules/fes/lib/definitions/apply.js","webpack:///./dev-modules/fes/lib/definitions/apply-to.js","webpack:///./dev-modules/fes/lib/definitions/assign-over-all.js","webpack:///./dev-modules/fes/lib/definitions/assign-over-recursively.js","webpack:///./dev-modules/fes/lib/definitions/assign-over.js","webpack:///./dev-modules/fes/lib/definitions/clone-deep.js","webpack:///./dev-modules/fes/lib/definitions/clone.js","webpack:///./dev-modules/fes/lib/definitions/coerce-to.js","webpack:///./dev-modules/fes/lib/definitions/combine-all.js","webpack:///./dev-modules/fes/lib/definitions/combine.js","webpack:///./dev-modules/fes/lib/definitions/construct.js","webpack:///./dev-modules/fes/lib/definitions/construct_1arg.js","webpack:///./dev-modules/fes/lib/definitions/contains.js","webpack:///./dev-modules/fes/lib/definitions/contained-in.js","webpack:///./dev-modules/fes/lib/definitions/contains-only.js","webpack:///./dev-modules/fes/lib/definitions/discard-all.js","webpack:///./dev-modules/fes/lib/definitions/discard-first-while.js","webpack:///./dev-modules/fes/lib/definitions/discard-first.js","webpack:///./dev-modules/fes/lib/definitions/discard-last-while.js","webpack:///./dev-modules/fes/lib/definitions/discard-last.js","webpack:///./dev-modules/fes/lib/definitions/keep-when.js","webpack:///./dev-modules/fes/lib/definitions/discard-when.js","webpack:///./dev-modules/fes/lib/definitions/discard.js","webpack:///./dev-modules/fes/lib/definitions/find-first-when.js","webpack:///./dev-modules/fes/lib/definitions/find-first.js","webpack:///./dev-modules/fes/lib/definitions/first.js","webpack:///./dev-modules/fes/lib/definitions/flatten.js","webpack:///./dev-modules/fes/lib/definitions/flow.js","webpack:///./dev-modules/fes/lib/definitions/for-each.js","webpack:///./dev-modules/fes/lib/definitions/get-array-of-keys.js","webpack:///./dev-modules/fes/lib/definitions/get-array-of-values.js","webpack:///./dev-modules/fes/lib/definitions/get-count.js","webpack:///./dev-modules/fes/lib/definitions/get-value-at-path.js","webpack:///./dev-modules/fes/lib/definitions/get-value-at.js","webpack:///./dev-modules/fes/lib/definitions/get-value-from.js","webpack:///./dev-modules/fes/lib/definitions/has-key.js","webpack:///./dev-modules/fes/lib/definitions/has-own-enumerable-key.js","webpack:///./dev-modules/fes/lib/definitions/invoke-at.js","webpack:///./dev-modules/fes/lib/definitions/invoke.js","webpack:///./dev-modules/fes/lib/definitions/is-laden.js","webpack:///./dev-modules/fes/lib/definitions/is-empty.js","webpack:///./dev-modules/fes/lib/definitions/is-falsey.js","webpack:///./dev-modules/fes/lib/definitions/is-greater-than.js","webpack:///./dev-modules/fes/lib/definitions/is-less-than.js","webpack:///./dev-modules/fes/lib/definitions/is-truthy.js","webpack:///./dev-modules/fes/lib/definitions/join.js","webpack:///./dev-modules/fes/lib/definitions/keep-first.js","webpack:///./dev-modules/fes/lib/definitions/keep-intersection.js","webpack:///./dev-modules/fes/lib/definitions/keep.js","webpack:///./dev-modules/fes/lib/definitions/last.js","webpack:///./dev-modules/fes/lib/definitions/m-append-all.js","webpack:///./dev-modules/fes/lib/definitions/m-append.js","webpack:///./dev-modules/fes/lib/definitions/m-append-to.js","webpack:///./dev-modules/fes/lib/definitions/m-assign-over.js","webpack:///./dev-modules/fes/lib/definitions/m-combine.js","webpack:///./dev-modules/fes/lib/definitions/m-map.js","webpack:///./dev-modules/fes/lib/definitions/m-omit.js","webpack:///./dev-modules/fes/lib/definitions/m-prepend.js","webpack:///./dev-modules/fes/lib/definitions/m-set.js","webpack:///./dev-modules/fes/lib/definitions/map-keys.js","webpack:///./dev-modules/fes/lib/definitions/map.js","webpack:///./dev-modules/fes/lib/definitions/none.js","webpack:///./dev-modules/fes/lib/definitions/omit-all.js","webpack:///./dev-modules/fes/lib/definitions/pick-when.js","webpack:///./dev-modules/fes/lib/definitions/omit-when.js","webpack:///./dev-modules/fes/lib/definitions/omit.js","webpack:///./dev-modules/fes/lib/definitions/pass-through.js","webpack:///./dev-modules/fes/lib/definitions/pick-all.js","webpack:///./dev-modules/fes/lib/definitions/pick-all-from.js","webpack:///./dev-modules/fes/lib/definitions/prepend.js","webpack:///./dev-modules/fes/lib/definitions/reduce.js","webpack:///./dev-modules/fes/lib/definitions/reduce-fresh.js","webpack:///./dev-modules/fes/lib/definitions/return-first-argument.js","webpack:///./dev-modules/fes/lib/definitions/reverse.js","webpack:///./dev-modules/fes/lib/definitions/set-of-keys.js","webpack:///./dev-modules/fes/lib/definitions/set.js","webpack:///./dev-modules/fes/lib/definitions/starts-with.js","webpack:///./dev-modules/fes/lib/definitions/strictly-equals.js","webpack:///./dev-modules/fes/lib/definitions/transform-properties.js","webpack:///./dev-modules/fes/lib/definitions/truncate-to-n-lines.js","webpack:///./dev-modules/fes/lib/definitions/unique.js","webpack:///./dev-modules/fes/index.js","webpack:///./dev/fixture-name-to-install/both-players-initialized.js","webpack:///./dev/fixture-name-to-install/only-player1-is-initialized.js","webpack:///./dev/fixture-name-to-install/player2-guessed-and-review.js","webpack:///./dev/fixture-name-to-install/player2-guessed-no-match-no-review.js","webpack:///./dev/fixture-name-to-install/player2-guessed-no-review.js","webpack:///./dev/fixture-name-to-install/player2-must-review.js","webpack:///./dev/fixture-name-to-install/player2-must-guess.js","webpack:///./dev/fixture-name-to-install/room-exists.js","webpack:///./dev/fixture-name-to-install/unsubscription-exists.js","webpack:///./dev/fixture-name-to-install/index.js","webpack:///./lib/universal/axios-helpers.js","webpack:///./lib/server/api/couchdb.js","webpack:///./lib/server/db/dal/database-name-to-definition.js","webpack:///./lib/server/db/dal/database-names.js","webpack:///./lib/server/db/dal/normalize-field.js","webpack:///./lib/server/db/dal/preset-fields.js","webpack:///./lib/server/db/create-and-delete-all-dbs.js","webpack:///./lib/server/db/couchdb-id-utils.js","webpack:///./lib/server/db/helpers.js","webpack:///./lib/server/db/dal/helpers.js","webpack:///./lib/server/db/dal/create-method-to-approve-args.js","webpack:///./lib/server/db/dal/section-to-create-error-message.js","webpack:///./lib/server/db/dal/index.js","webpack:///./lib/server/db/index.js","webpack:///./lib/server/email/templates/you-are-invited.html","webpack:///./lib/server/email/templates/you-created-a-room.html","webpack:///./lib/server/log/create-daily-rotating-logger.js","webpack:///./lib/server/log/create-winston-wrapper.js","webpack:///./lib/server/log/index.js","webpack:///./lib/server/create-approve-request.js","webpack:///./lib/server/utils.js","webpack:///./lib/universal/email/types.js","webpack:///./lib/universal/input-validation-info.js","webpack:///./lib/universal/jstring.js","webpack:///./lib/universal/promise-utils.js","webpack:///./lib/universal/truncate-dirty-args.js","webpack:///./lib/universal/repeat-string.js","webpack:///./lib/universal/truncate.js","webpack:///./lib/universal/set-value-at-path.js","webpack:///./lib/universal/create-approve-simple-input.js","webpack:///./lib/universal/utils.js","webpack:///./server.js","webpack:///external \"autoprefixer\"","webpack:///external \"axios\"","webpack:///external \"bcryptjs\"","webpack:///external \"chalk\"","webpack:///external \"clone-deep\"","webpack:///external \"couchdb-base64\"","webpack:///external \"decamelize\"","webpack:///external \"dedent\"","webpack:///external \"friendly-errors-webpack-plugin\"","webpack:///external \"fs\"","webpack:///external \"handlebars\"","webpack:///external \"hashids\"","webpack:///external \"koa\"","webpack:///external \"koa-bodyparser\"","webpack:///external \"koa-router\"","webpack:///external \"koa-vue-ssr_init-dev-server\"","webpack:///external \"koa2-ratelimit\"","webpack:///external \"longjohn\"","webpack:///external \"lru-cache\"","webpack:///external \"mini-css-extract-plugin\"","webpack:///external \"moment\"","webpack:///external \"nodemailer\"","webpack:///external \"object-inspect\"","webpack:///external \"os\"","webpack:///external \"path\"","webpack:///external \"pify\"","webpack:///external \"postcss-focus-within\"","webpack:///external \"source-map-support/register\"","webpack:///external \"type-detect\"","webpack:///external \"vue-loader\"","webpack:///external \"vue-server-renderer\"","webpack:///external \"vue-server-renderer/client-plugin\"","webpack:///external \"vue-server-renderer/server-plugin\"","webpack:///external \"webpack\"","webpack:///external \"webpack-node-externals\"","webpack:///external \"winston\"","webpack:///external \"winston-daily-rotate-file\"","webpack:///external \"ws\""],"names":["liveUpdateWebsocketPort","authorEmail","couchdbAuth","username","password","baseUrl","couchdb","external","local","liveUpdateWebsocket","port","url","logDirectory","salt","email","hashid","smtpAuth","user","pass","presets","modules","targets","browsers","plugins","node","preventEmailFromSending","player1Email","player2Email","websocketPort","debug","liveUpdate","websocketUrl","commonConfig","getCommonConfig","clientPlugins","getClientPlugins","clientConfig","Object","assign","entry","path","resolve","__dirname","appendAll","webpack","DefinePlugin","JSON","stringify","isProd","projectRootDir","screenSizeBreakpointsRe","babelLoaderOptions","getPlugins","extractOrStyleLoader","MiniCssExtractPlugin","loader","mode","devtool","output","filename","publicPath","performance","maxEntrypointSize","hints","optimization","splitChunks","chunks","alias","getFullPathAliases","extensions","module","rules","getRules","firstValue","_moduleAliases","keys","aliasesAreAbsolute","startsWith","map","resolvePath","options","compilerOptions","preserveWhitespace","test","exclude","limit","use","sourceMap","autoprefixer","focusWithin","resources","firstPart","secondPart","optimize","ModuleConcatenationPlugin","environmentDependentPlugins","mAppendAll","replaceLoader","getReplaceLoader","ssrPlugins","getSsrPlugins","ssrConfig","target","externals","webpackNodeExternals","whitelist","libraryTarget","append","multiple","flags","search","replace","handleErrorDuringRoute","ctx","createErrorMessage","args","error","status","isHandled","body","friendlyMessage","possiblyAsyncErrorMessage","Promise","then","message","detailed","log","server","friendly","ifRequestIsValid","createIfRequestIsValid","optionsForGet","allow404","returnRawResponse","createResubscribeRouter","createPostRoute","resubscribeRouter","post","emailSentHash","params","type","request","errorArgs","resubscribeToType","createResubscribeToType","dal","emailSent","get","_id","hashToDocid","ifResponseIsNot404","catch","to","encryptedEmail","emailUnsubscription","_rev","types","unsubscribedTypes","isAlreadySubscribed","containedIn","result","updatedTypes","discard","update","justReturn","dedent","typeToUnsubscribe","createTypeToUnsubscribe","unsubscribe","emailType","reduce","toUnsubscribeFunctions","validEmailTypes","typeToFunction","mSet","unsubscribeFromType","response","create","currentTypes","data","setOfCurrentTypes","Set","has","mAppend","handleServerError","unsubscribeViaEmailSentHash","unsubscribeViaEncryptedEmail","getCreateErrorMessage","listOfApplicableTypes","join","send","createUnsubscribeRouter","passThrough","createGetRoute","unsubscribeRouter","createUnsubscriptionsRouter","unsubscriptionsRouter","returnUnsubscriptions","createReturnUnsubscriptions","createEmailRouter","emailRouter","routes","allowedMethods","getCurrentAndOtherPlayerData","arg","currentPlayerHash","player1Hash","player2Hash","all","player","player1Data","player2Data","currentPlayer","otherPlayer","sanitize","current","pickAll","other","flow","changeWordToHasWord","room","toggleTurn","playerNumberTurn","hasWord","word","router","getRoom","roomHash","playerHash","query","authorizeThenGetPlayerData","createAuthorizeThenGetPlayerData","activeRoom","ifStatusIsNot404","sanitizeAndReturnAllData","roomData","possiblePlayerHashes","is404","currentAndOtherPlayer","transformProperties","createPostGuess","websocketServer","addGuess","createAddGuess","addGuessAndReturnCurrentPlayer","createAddGuessAndReturnCurrentPlayer","guess","couchdbRoomData","guessedWord","roomIdAndRev","pickIdAndRev","playerIdAndRev","removeCouchdbProperties","playerData","isCorrect","guesses","combine","sanitizedRoom","maybeUpdateClient","docidToHash","id","commitOrDispatch","payload","createPostMarkChosenLetter","markChosenLetter","createMarkChosenLetter","chosenLetter","authorizeThenGetOtherPlayerData","createAuthorizeThenGetOtherPlayerData","markChosenLetterAndReturnOtherPlayer","createMarkChosenLetterAndReturnOtherPlayer","otherPlayerHash","couchdbOtherPlayerData","otherPlayerData","lastGuess","last","mAssignOver","isValid","wasReviewed","createPostMarkGuessAsInvalid","markGuessAsInvalid","createMarkGuessAsInvalid","authorizeThenGetOtherPlayerAndRoomData","createAuthorizeThenGetOtherPlayerAndRoomData","markGuessAsInvalidAndReturnOtherPlayer","updateTurnAndReturnRoomData","couchdbPlayerData","createPostMarkGuessAsValid","markGuessAsValid","createMarkGuessAsValid","authorizeThenGetOtherPlayer","createAuthorizeThenGetOtherPlayer","markGuessAsValidAndReturnOtherPlayer","createPostInitPlayer","initializePlayer","createInitializePlayer","initPlayerAndReturnBothPlayersData","createInitPlayerAndReturnBothPlayersData","displayName","newPlayerData","existingPlayerData","createRoomRouter","createEmailSentRecords","encryptedEmails","player1EncryptedEmail","player2EncryptedEmail","resolveAllProperties","player1EmailSentData","createPlayer1EmailSentRecord","player2EmailSentData","createPlayer2EmailSentRecord","createGameAndPlayers","responses","activeRoomResult","createPlayer","player1EmailSentHash","player2EmailSentHash","number","globalTemplateVariables","getGlobalTemplateVariables","templateNameToCompiledTemplate","getTemplateNameToCompiledTemplate","templateNameToRequiredProperties","getTemplateNameToRequiredProperties","templateNameToCompile","createCompileFunction","templateName","compiledTemplate","approve","createApproveSimpleInput","requiredProperties","approveThenCompile","arrayOfArguments","finalTemplateVariables","html","youAreInvited","youCreatedARoom","handlebars","compile","global","externalBaseUrl","smtpTransporter","createSmtpTransporter","templateNameToInfo","getTemplateNameToInfo","templateNames","pify","sendMail","bind","templateNameToSend","createSendFunction","approveInput","messageData","approveThenCompileToHtml","approveThenSend","handleSendError","input","err","templateVariables","listUnsubscribeUrl","inputMessageData","omit","finalMessageData","combineAll","objects","list","jstring","handleServerErrorSync","normalizeTemplateInfo","from","subject","templateInfo","mAddToSet","nodemailer","createTransport","host","auth","authMethod","secure","requireTLS","pool","rateLimit","createSendEmails","player1","hash","player2","player1SendResult","player2SendResult","sendEmail","isSubscribedTo","roomCreated","none","invitation","ifNotUnsubscribed","asyncFunctions","player1UnsubscriptionTypes","player2UnsubscriptionTypes","isSubscribed","bothAreSubscribed","sequentiallyResolveEach","unsubscribedPlayers","encryptEmail","bcryptjs","createEncryptEmailMessage","encryptAllEmails","allEmails","eventualEncryptedEmails","createEncryptAllEmailsMessage","prepend","post_createARoom","sendEmails","getUnsubscribedTypes","isLaden","getEmailUnsubscriptionTypes","createApiRouter","apiRouter","createWebsocketServer","roomRouter","createARoomRateLimiter","getCreateARoomRateLimiter","bodyparser","max","interval","min","RateLimit","middleware","keyGenerator","ip","onLimitReached","http","concern","createDebugRouter","currentFixtureName","createPostRevertToFixture","dashelize","debugRouter","initialFixtureName","fixtureName","api","revertToFixture","broadcast","createPageRouter","getRenderer","pageRouter","renderToString","vueContext","httpStatusCode","reject","ws","Server","sendData","applyAt","handleBroadcastError","clients","keepWhen","isOpen","forEach","on","handleConnectionError","client","readyState","OPEN","playerHashToClientSocket","clientSocketToPlayerHash","Map","delete","parse","_unused_roomHash","set","clientSocket","something","anObject","key","value","aMap","reducerFunction","start","Array","prototype","call","aMapOrSet","Symbol","iterator","next","str","toLowerCase","slice","functionArray","aFunction","possibleSubString","fullString","indexOf","numberOfLinesToGet","aString","lines","i","numLinesReached","length","currentCharacter","nextCharacter","isNewline","push","moreLinesExist","numberOfLines","getFirstNLines","hasNewline","contains","numberOfCharacters","Error","truncateToNLines","typeToSpecialCase","getTypeToSpecialCase","getType","typeDetect","firstCharacterToLowerCase","getFirstSharedKeyString","duplicateKeys","truncateToNChars","HTMLCollection","assignOverRecursively","mapThatGetsAssignedOver","reduce_map","newValue","existingValue","mSet_map","merge","object","objectThatGetsAssignedOver","reduce_object","mSet_object","cloneObject","typeToAssignRecursively","getTypeToAssignRecursively","existingValueType","newValueType","mergeFunction","overwriteWithDeepClone","_unusedExistingValue","cloneDeep","cloneAndMergeSets","firstSet","secondSet","cloneOfFirstSet","cloneOfSecondSet","primaryMap","primaryObject","setThatGetsAssignedOver","primarySet","aSet","set1","set2","set1Value","add","map1","map2","setOfMap1Keys","setOfKeys","setOfMap2Keys","keepIntersection","size","firstSharedKeyString","arrayLike","numberOfElementsToKeep","eachFunction","mapFunction","element","idx","object1","object2","setOfObject1Keys","setOfObject2Keys","s","aKeyOrKeys","numberOfKeysToShow","numberOfKeysNotShown","sharedKeysString","keepFirst","anArgumentsObject","returnArguments","arguments","anArray","originalSomething","clonedSomething","aDate","copyOwnEnumerableProps","Date","getTime","ctor","setOfValuesToCheckFor","allAreContained","setOfElementsToCheckFor","inThisArrayLike","containsAll","typeToEmptyCollectionCreator","getTypeToEmptyCollectionCreator","collection","array","float32Array","Float32Array","float64Array","Float64Array","int16Array","Int16Array","int32Array","Int32Array","int8Array","Int8Array","string","uint16Array","Uint16Array","uint32Array","Uint32Array","uint8Array","Uint8Array","uint8ClampedArray","Uint8ClampedArray","setOfValuesToRemove","fromASet","idxToRemove","concat","numberOfElementsToDiscard","numberOfCharactersToDiscard","String","shouldDiscard","index","predicate","anArrayLike","first","second","undefined","negate","values","replacer","createReplacer","duplicateObjects","numberOfCharactersToKeep","array1","array2","setOfArray1Values","setOfArray2Values","array1value","filterFunction","filter","mapThatGetsAssignedInto","objectThatGetsAssignedInto","setThatGetsAssignedInto","transforms","aTransform","hasKey","numberOfTimes","stringToRepeat","substr","firstArgument","val1","val2","findFirstValueWithTruthyKey","findFirstWhen","getValueAt","formatGivenArgument","anArg","argIdx","argToString","setIfNotDefined","obj","val","throwOrReject","isAsynchronous","setOfTypedArrays","getSetOfTypedArrays","truncateDataArg","approveDataArgument","authorDefinedApproveArguments","definition","specialCaseProperties","takesAnyDataType","name","isArrayOfData","shouldThrowOnExtraDataArguments","typeToDataDependentProps","truncatedArgs","mMap","dataArg","dataType","dataTypes","setOfValidDataTypes","validDataTypesString","consolidateTypedArrays","join_set","maybeError","discardAll","approveTypes","expectedArgumentTypes","expectedServiceArgumentTypes","allExpectedTypes","validateArg","areServiceArguments","functionChain","argumentIsWrongType","toInvalidTypeError","toAllIndecesAndMessages","indices","messages","toInvalidTypeErrorMessage","unshift","firstLine","join_arrayLike","actualType","setOfExpectedTypes","initialMessage","restOfMessage","common","shouldThrowOnExtraServiceArguments","numberOfServiceArguments","errorMessage","dataDependent","independent","normalizeExpectedArgumentTypes","oneOrManyTypes","isArray","normalizeHasNoDataArgument","props","normalizeTypeToFunction","mapOrSet","normalized","clone","allArrays","htmlCollection","normalizeArrays","function","typedArray","arrayFunction","aTypedArray","normalizeDefinition","mergeDefinitionWith","recursivelyMergeDefinition","flippedFrom","hasNoDataArgument","transformResult","approveArguments","noop","hasDataArgument","hasServiceArguments","isDataFirst","isFlipped","definitionToMergeWith","createArrayOfDataUtility","throwIfCalledDirectly","createThrowIfCalledDirectly","toTypeSpecificUtility","pluralTypeToFunction","theFunction","typedUtility","dataArgs","approveElementTypes","validDataArg","example","firstKey","expectedType","hint","hasOwnEnumerableKey","arrayOfData","invalidElements","discardWhen","strictlyEquals","firstInvalidElement","firstInvalidElementString","createNoDataArgumentUtility","shouldThrowOnExtraArguments","identity","numberOfExpectedArguments","createTypeToDataUtility","firstArgs","secondArgs","serviceArgs","transformServiceArguments","approveServiceArguments","serviceArguments","mTransformProperties","handleSpecialCaseUtility","getSpecialCaseProperties","createUtility","createPseudoCurriedFunction","createUnaryFunction","utilityIsSpecialCase","hasServiceArgumentTransforms","any","ignoreExtraDataArguments","ignoreExtraServiceArguments","approveFirstArgs","approveSecondArgs","createUtilityFrom","arrayOrSet","containsAll_set","setOfValuesToCheck","inThisSetOfValues","containsAllDefinition","stillTruthy","aKey","appendThese","toThis","appendArray","appendString","appendThis","toThisArray","appendThisString","toThisString","apply","argumentsToApply","createAssignOverAll","createEmpty","mAssign","createInitialResult","assignOver_object","assignOver_map","assignOver_set","buffer","aBuffer","Buffer","date","regExp","aRegexp","clonedRegexp","RegExp","source","lastIndex","constructorToCoerce","getConstructorToCoerce","fallbackCoerce","anything","aConstructorFunction","coerce","Boolean","createCombineAll","canCombine","canCombine_map","canCombine_object","canCombine_set","constructorFunction","argumentsArray","construct_1arg","contains_string","valueToSearchFor","found","aValue","containsDefinition","containsOnly","reduce_arrayLike","createEmptyCollectionFromInstance","keepDropping","discardFirst","reduce_set","composedTypeToFunction","negatePredicates","keepWhenDefinition","mapValues","valueToRemove","valueToFind","_unused_key","forEachFunction","forEach_arrayLike","getAllButLastKey","discardLast","getValueAtPath_object","arrayOfKeys","allButLastKey","lastKey","getValueAt_object","hasKey_object","hasKey_map","defaultInvokeAt","invokeAt_object","invokeAt_map","invoke","isLadenDefinition","right","left","keepIntersection_array","keepIntersection_set","valueToKeep","mAssignOver_object","mAssignOver_map","mAssignOver_set","mapperFunction","mOmit_object","mOmit_map","mPrependArray","prependThis","newKey","setOfKeysToRemove","pickWhenDefinition","pickWhen","omit_map","omit_object","keyToRemove","setOfKeysToPick","prependArray","prependString","reverse","split","set_object","set_map","mightStartWith_arrayLike","transformProperties_map","transformProperties_object","mapOfTransforms","transform","allContainedIn","alwaysReturn","appendTo","applyTo","assignOverAll","assignOver","coerceTo","construct","discardFirstWhile","discardLastWhile","findFirst","flatten","getArrayOfKeys","getArrayOfValues","getCount","getValueAtPath","getValueFrom","invokeAt","isEmpty","isFalsey","isGreaterThan","isLessThan","isTruthy","keep","mAppendTo","mCombine","mOmit","mPrepend","mapKeys","omitAll","omitWhen","pickAllFrom","reduceFresh","returnFirstArgument","unique","logThenNewline","msg","test1EncryptedEmail","test2EncryptedEmail","install","createRoom","createEmailSentRecord","createPlayers","roomAndPlayerData","roomId","roomRev","createAPlayer","isUndefined","idAndRev","player1IdAndRev","player2IdAndRev","createUnsubscription","fixtures","getFixtures","fixtureNameToInstall","createInstall","logHeader","replicateAllDbs","header","border","repeatString","bothPlayersInitialized","onlyPlayer1IsInitialized","player2GuessedAndReview","player2GuessedNoMatchNoReview","player2GuessedNoReview","player2MustReview","player2MustGuess","roomExists","unsubscriptionExists","possibleCustomOptions","getAxiosOptions","derivedAxiosOptions","deriveAxiosOptions","axiosOptions","getResponseTransform","returnData","validateStatus","axios","baseURL","createDb","createDbAccessor","createDbAndAccessor","deleteDb","createDocument","deleteDocument","getDocument","getDocumentAtRevision","updateDocument","approveId","put","normalizeData","approveIdAndRev","maybeTransformResponse","missingKeys","deletePreviousReplication","replicate","dbName","getFixtureDbName","create_target","deleteCurrentDb","restoreFixture","createCouchdbId","closedReason","emailSentType","emailUnsubscribeTypes","playerNumber","playerWord","databaseNameToDefinition","normalize","fields","closedRoom","hasCustomId","databaseDefinition","normalizeField","aField","isRequired","validReasons","toCommaList","availableReasons","isValidReason","approveWord","inputValidationInfo","initPlayer","requiredGuessKeys","validGuessKeys","presetFields","approveIsLadenString","approveEmailType","valueType","truncate","invalidTypes","autogenerate","invalidGuesses","isValidGuess","invalidGuessesString","hasher","decode","dirtyKeys","pAll","arrayOfPromises","deleteIfExists","createAllDatabases","deleteAllDatabases","myEpoch","moment","utc","max3ByteUInt","timestampBits","randomBits","numberOfTimestampCharacters","getTimestampCharactersFrom","getRandomCharactersFrom","secondsSinceMyEpoch","diff","random3ByteUInt","createRandom3ByteUInt","base64Timestamp","encodeTimestamp","base64Random","encodeRandomUInt","docid","getSecondsSinceMyEpoch","getRandom3ByteUInt","encode","getMomentCreated","couchdbBase64","decodeToUInt","randome3ByteUInt","encodedTimestamp","encodedRandomUInt","encodeFromUInt","uint","totalBits","Math","floor","random","methods","shouldApprove","getShouldApprove","propertyIsTruthy","validOptions","createMethodToApproveArgs","methodToApproveArgs","method","fieldsToApprove","documentId","revision","approveArgs","createApproveArgs","approveFieldNames","createApproveFieldNames","fieldNameToApprove","toApprove","truncateDirtyArgs","firstArg","firstArgType","secondArg","secondArgType","optionsError","approveOptions","fieldToErrorMessage","invalidFields","truncatedFields","errorReasons","toArrayOfReasons","invalidFieldsMessage","errorReasonMessage","validFieldNames","requiredFieldNames","fieldsObject","fieldNamesPassed","invalidFieldsErrorMessage","fieldsAllowedMessage","missingFields","fieldToApprove","field","reason","invalidKeys","invalidOptions","isBoolean","methodNameToAction","getMethodNameToAction","setOfVowels","sections","sectionToCreateErrorMessage","toCreateMessage","sectionToCreateMessage","section","createMessage","methodName","databaseName","invalidArgsMessage","action","firstLetterIsVowel","aOrAn","databaseNameToAccessLayer","definitionToAccessLayer","defaultOptions","applyDefaults","couchdbAccessor","fieldToAutogenerate","toAccessLayer","accessor","validArg","couchdbMethod","autogeneratedFields","encodeURIComponent","Logger","levels","info","createDailyRotatingLogger","transport","winston","transports","DailyRotateFile","dirname","zippedArchive","maxSize","maxFiles","createWinstonWrapper","dailyRotatingLogger","toWrapper","_unused_levelInteger","levelName","logError","logMessage","prependToError","stack","createApproveRequest","requestValidationInfo","allAllowedKeys","allRequiredKeys","toRequiredKeys","allApprovers","toApproveFunction","validateRequest","dirty","queryParameters","bodyOrQueryParameters","allowedKeys","requiredKeys","idToApprove","propertiesPassed","approveExpectedProperties","approveRequiredProperties","approveValidProperties","unexpectedProperties","numberOfUnexpectedProperties","unexpectedPropsString","passedKeys","invalidIdToReason","numberOfInvalidProperties","invalidProps","reasons","inputIdToValidationInfo","pFs","endpointId","approveRequest","runThisIfValid","runThisIfNot404","maybeReadFile","fpath","readFile","readdir","writeFile","content","validSendEmailTypes","isValidEmailType","approveSendEmailType","approveUnsubscribeEmailType","createARoom","emailResubscribe","emailUnsubscribe","apiEndpiont","form","normalizeIdToValidationInfo","idToValidationInfo","validationInfo","toPairs","resolveAll","fromPairs","settleAll","settle","callThis","aPromise","res","successVal","isObject","take3","toArray","take3_object","maybeAddMoreIndicator","currentKey","numArguments","setOfAssignableTypes","setValueAtPath","propertyPath","shouldCheckForKey","tmpObject","isAnObject","context","createError","approveSimpleInput","firstThree","truncatedArguments","missingProperties","approveIsLaden","bindAll","arrayOfPropNames","propName","decamelize","hasLength","invokeWhenCalled","console","mRemoveAtIndex","splice","removeExtension","periodIndex","lastIndexOf","toResolvedPromise","setShowErrorView","commit","_unused_error","root","setShowNotFoundOrErrorView","mutation","toEnum","waitMs","ms","setTimeout","asyncFunction","require","highlight","chalk","green","isDevelopment","serverPort","webpackHotClientPort","templatePath","webpackConfigs","ssr","_ssr","fixtureNameCamel","installFixture","logUnhandledRejections","maybeInitDevDatabase","initDevServer","initNonDevServer","koaApp","createRouter","listen","ssrClientManifest","ssrServerBundle","template","bundleRenderer","createBundleRenderer","clientManifest","cache","createLruCache","maxAge","basedir","runInNewContext","koaVueSsr_initDevServer","shouldWatch","rootRouter","page","process","p"],"mappings":"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;;;;;;;ACAA,uC;;;;;;;;;;;;ACAA,mC;;;;;;;;;;;;ACAA,2D;;;;;;;;;;;;ACAA,+B;;;;;;;;;;;;ACAA,uC;;;;;;;;;;;;ACAA,oC;;;;;;;;;;;;ACAA,gC;;;;;;;;;;;;ACAA,2C;;;;;;;;;;;;ACAA,uC;;;;;;;;;;;;ACAA,wD;;;;;;;;;;;;ACAA,2C;;;;;;;;;;;;ACAA,qC;;;;;;;;;;;;ACAA,sC;;;;;;;;;;;;ACAA,oD;;;;;;;;;;;;ACAA,mC;;;;;;;;;;;;ACAA,uC;;;;;;;;;;;;ACAA,2C;;;;;;;;;;;;ACAA,+B;;;;;;;;;;;;ACAA,iC;;;;;;;;;;;;ACAA,iC;;;;;;;;;;;;ACAA,iD;;;;;;;;;;;;ACAA,wD;;;;;;;;;;;;ACAA,wC;;;;;;;;;;;;ACAA,uC;;;;;;;;;;;;ACAA,gD;;;;;;;;;;;;ACAA,8D;;;;;;;;;;;;ACAA,8D;;;;;;;;;;;;ACAA,oC;;;;;;;;;;;;ACAA,mD;;;;;;;;;;;;ACAA,oC;;;;;;;;;;;;ACAA,sD;;;;;;;;;;;;ACAA,+B","file":"server.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./server.js\");\n","//------//\n// Init //\n//------//\n\nconst liveUpdateWebsocketPort = 9001\n\n//\n//------//\n// Main //\n//------//\n\n//\n// TODO: look into authentication alternatives\n// I didn't look into the authentication mechanisms much, but they did note\n//   basic auth to be lesser performant.\n//\nconst authorEmail = 'phil@passthequill.com',\n  couchdbAuth = {\n    username: 'olsonpm',\n    password: 'mycouchdb',\n  },\n  baseUrl = {\n    couchdb: 'http://localhost:5984',\n    external: 'http://localhost:8085',\n    local: 'http://localhost:8085',\n  },\n  liveUpdateWebsocket = {\n    port: liveUpdateWebsocketPort,\n    url: `ws://localhost:${liveUpdateWebsocketPort}`,\n  },\n  logDirectory = '/home/phil/garbage/ptq-logs',\n  salt = {\n    email: '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.ieCrE5KTGcMXyGumLqP64078P9ru.Mi',\n    hashid: 'myhashidsalt',\n  },\n  smtpAuth = {\n    user: 'info@passthequill.com',\n    pass: '7KQDDfVDvIvC9ePKCPLaxx2icYk3Fdup',\n  }\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport {\n  authorEmail,\n  baseUrl,\n  couchdbAuth,\n  liveUpdateWebsocket,\n  logDirectory,\n  salt,\n  smtpAuth,\n}\n","export default {\n  presets: [\n    [\n      '@babel/preset-env',\n      {\n        modules: false,\n        targets: {\n          browsers: ['> 1%', 'last 2 versions', 'not ie <= 8'],\n        },\n      },\n    ],\n  ],\n  plugins: [\n    'macros',\n    'syntax-dynamic-import',\n    '@babel/plugin-proposal-object-rest-spread',\n  ],\n}\n","export default {\n  presets: [\n    [\n      '@babel/preset-env',\n      {\n        modules: false,\n        targets: { node: 8 },\n      },\n    ],\n  ],\n  plugins: [\n    'macros',\n    'syntax-dynamic-import',\n    '@babel/plugin-proposal-object-rest-spread',\n  ],\n}\n","const preventEmailFromSending = true,\n  player1Email = 'philip.olson@pm.me',\n  player2Email = 'philip.olson.m@gmail.com',\n  websocketPort = {\n    debug: 8090,\n    liveUpdate: 8091,\n  },\n  websocketUrl = {\n    debug: `ws://localhost:${websocketPort.debug}`,\n    liveUpdate: `ws://localhost:${websocketPort.liveUpdate}`,\n  }\n\nexport default {\n  player1Email,\n  player2Email,\n  preventEmailFromSending,\n  websocketPort,\n  websocketUrl,\n}\n","//---------//\n// Imports //\n//---------//\n\nimport path from 'path'\nimport VueSSRClientPlugin from 'vue-server-renderer/client-plugin'\nimport webpack from 'webpack'\n\nimport babelConfig from '../babel/client'\nimport getCommonConfig from './common'\n\nimport { appendAll } from 'fes'\nimport { baseUrl } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\nconst commonConfig = getCommonConfig(babelConfig),\n  clientPlugins = getClientPlugins()\n\n//\n//------//\n// Main //\n//------//\n\nconst clientConfig = Object.assign({}, commonConfig, {\n  entry: [path.resolve(__dirname, '../../entry/client/index.js')],\n})\n\nclientConfig.plugins = appendAll(clientPlugins)(clientConfig.plugins)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getClientPlugins() {\n  return [\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),\n      'process.env.VUE_ENV': '\"client\"',\n      'process.env.BASE_URL': `'${baseUrl.external}/'`,\n    }),\n    new VueSSRClientPlugin(),\n  ]\n}\n//\n//---------//\n// Exports //\n//---------//\n\nexport default clientConfig\n","//---------//\n// Imports //\n//---------//\n\nimport autoprefixer from 'autoprefixer'\nimport focusWithin from 'postcss-focus-within'\nimport FriendlyErrorsPlugin from 'friendly-errors-webpack-plugin'\nimport MiniCssExtractPlugin from 'mini-css-extract-plugin'\nimport path from 'path'\nimport webpack from 'webpack'\n\nimport { _moduleAliases } from '../../package.json'\nimport { VueLoaderPlugin } from 'vue-loader'\nimport { map, mAppendAll, startsWith } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst isProd = process.env.NODE_ENV === 'production',\n  projectRootDir = path.resolve(__dirname, '../../'),\n  screenSizeBreakpointsRe = /app\\/screen-size-breakpoints\\.scss$/\n\n//\n//------//\n// Main //\n//------//\n\nconst getCommonConfig = babelLoaderOptions => {\n  const plugins = getPlugins(),\n    extractOrStyleLoader = isProd\n      ? MiniCssExtractPlugin.loader\n      : 'vue-style-loader'\n\n  return {\n    mode: isProd ? 'production' : 'development',\n    devtool: isProd ? 'source-map' : 'cheap-module-eval-source-map',\n    output: {\n      filename: '[name].[chunkhash].js',\n      path: path.resolve(projectRootDir, 'dist/vue'),\n      publicPath: '/dist/vue/',\n    },\n    performance: {\n      maxEntrypointSize: 300000,\n      hints: !!isProd && 'warning',\n    },\n    optimization: {\n      splitChunks: { chunks: 'all' },\n    },\n    resolve: {\n      alias: getFullPathAliases(_moduleAliases),\n      extensions: ['.js', '.json', '.vue'],\n      modules: [\n        //\n        // Also, dev-modules are necessary because things break when symlinks\n        //   are used\n        //\n        path.resolve(projectRootDir, 'dev-modules'),\n        path.resolve(projectRootDir, 'node_modules'),\n        path.resolve(projectRootDir, 'dev-modules/fes/node_modules'),\n      ],\n    },\n    plugins,\n    module: {\n      rules: getRules(babelLoaderOptions, extractOrStyleLoader),\n    },\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\n//\n// During development the _moduleAliases will be relative because I don't feel\n//   like forking the `module-alias` project and preventing it from mutating the\n//   _moduleAliases package.json field\n//\nfunction getFullPathAliases() {\n  const firstValue = _moduleAliases[Object.keys(_moduleAliases)[0]],\n    aliasesAreAbsolute = startsWith('/')(firstValue)\n\n  return aliasesAreAbsolute\n    ? _moduleAliases\n    : map(resolvePath(projectRootDir))(_moduleAliases)\n}\n\nfunction getRules(babelLoaderOptions, extractOrStyleLoader) {\n  return [\n    {\n      loader: 'vue-loader',\n      options: {\n        compilerOptions: { preserveWhitespace: false },\n      },\n      test: /\\.vue$/,\n    },\n    {\n      exclude: /\\/node_modules\\/(?!(vue2-hammer)\\/).*/,\n      loader: 'babel-loader',\n      options: babelLoaderOptions,\n      test: /\\.js$/,\n    },\n    {\n      loader: 'url-loader',\n      options: { limit: 10000 },\n      test: /\\.(ttf|woff|png|jpg|gif|svg)$/,\n    },\n    {\n      test: screenSizeBreakpointsRe,\n      use: ['css-loader', 'sass-loader'],\n    },\n    {\n      test: /\\.scss$/,\n      exclude: screenSizeBreakpointsRe,\n      use: [\n        extractOrStyleLoader,\n        {\n          loader: 'css-loader',\n          options: { sourceMap: false },\n        },\n        {\n          loader: 'postcss-loader',\n          options: {\n            plugins: [\n              autoprefixer({ browsers: ['last 2 versions'] }),\n              focusWithin(),\n            ],\n            sourceMap: false,\n          },\n        },\n        {\n          loader: 'sass-loader',\n          options: { sourceMap: false },\n        },\n        {\n          loader: 'sass-resources-loader',\n          options: {\n            resources: path.resolve(\n              projectRootDir,\n              'create/app/styles/imported-by-all-components.scss'\n            ),\n          },\n        },\n      ],\n    },\n  ]\n}\n\nfunction resolvePath(firstPart) {\n  return secondPart => path.resolve(firstPart, secondPart)\n}\n\nfunction getPlugins() {\n  const plugins = [\n      new webpack.optimize.ModuleConcatenationPlugin(),\n      new VueLoaderPlugin(),\n    ],\n    environmentDependentPlugins = isProd\n      ? [new MiniCssExtractPlugin()]\n      : [new FriendlyErrorsPlugin()]\n\n  return mAppendAll(environmentDependentPlugins)(plugins)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default getCommonConfig\n","//---------//\n// Imports //\n//---------//\n\nimport path from 'path'\nimport VueSSRServerPlugin from 'vue-server-renderer/server-plugin'\nimport webpackNodeExternals from 'webpack-node-externals'\nimport webpack from 'webpack'\n\nimport babelConfig from '../babel/server'\nimport getCommonConfig from './common'\n\nimport { baseUrl } from 'project-root/config/app'\nimport { append, appendAll } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst commonConfig = getCommonConfig(babelConfig),\n  replaceLoader = getReplaceLoader(),\n  ssrPlugins = getSsrPlugins()\n\n//\n//------//\n// Main //\n//------//\n\nconst ssrConfig = Object.assign({}, commonConfig, {\n  entry: path.resolve(__dirname, '../../entry/ssr.js'),\n  target: 'node',\n  externals: webpackNodeExternals({\n    whitelist: [/\\.css$/, 'fes'],\n  }),\n})\n\nssrConfig.output.libraryTarget = 'commonjs2'\n\nssrConfig.plugins = appendAll(ssrPlugins)(ssrConfig.plugins)\nssrConfig.module.rules = append(replaceLoader)(ssrConfig.module.rules)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getSsrPlugins() {\n  return [\n    new webpack.DefinePlugin({\n      'process.env.NODE_ENV': JSON.stringify(\n        process.env.NODE_ENV || 'development'\n      ),\n      'process.env.VUE_ENV': '\"ssr\"',\n      'process.env.BASE_URL': `'${baseUrl.local}/'`,\n    }),\n    new VueSSRServerPlugin(),\n  ]\n}\n\nfunction getReplaceLoader() {\n  return {\n    test: /\\.js$/,\n    loader: 'string-replace-loader',\n    options: {\n      multiple: [\n        {\n          flags: '',\n          search: \"import (velocityA|a)nimate from 'velocity-animate'\\n\",\n          replace: '',\n        },\n        {\n          search: \"import hammerjs from 'hammerjs'\\n\",\n          replace: '',\n        },\n      ],\n    },\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default ssrConfig\n","//---------//\n// Imports //\n//---------//\n\nimport log from 'server/log'\nimport dedent from 'dedent/macro'\n\n//\n//------//\n// Main //\n//------//\n\n//\n// It's worth noting that any errors reaching this function which aren't already\n//   handled means there is a bug.  All async operations are in charge of\n//   logging their own contextual errors and providing a friendly error message\n//   for end users.  Granted even those errors are either bugs or people messing\n//   with the api, but those are expected.\n//\nconst handleErrorDuringRoute = (ctx, createErrorMessage, args) => error => {\n  ctx.status = 500\n\n  if (error.isHandled) {\n    ctx.body = { error: `An error occurred while ${error.friendlyMessage}` }\n    return\n  }\n\n  const possiblyAsyncErrorMessage = createErrorMessage(...args)\n\n  return Promise.resolve(possiblyAsyncErrorMessage).then(message => {\n    message.detailed += '\\n\\n'\n    message.detailed += dedent(`\n      Note: This should be looked into because it means we missed handling an\n            error somewhere.\n    `)\n    log.server.error(message.detailed, error)\n    ctx.body = { error: `An error occurred while ${message.friendly}` }\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { handleErrorDuringRoute }\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\nimport dedent from 'dedent'\n\nimport { dal, hashToDocid } from 'server/db'\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { createIfRequestIsValid, ifResponseIsNot404 } from 'server/utils'\nimport { alwaysReturn as justReturn, containedIn, discard } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst ifRequestIsValid = createIfRequestIsValid('emailUnsubscribe'),\n  optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  }\n\n//\n//------//\n// Main //\n//------//\n\nconst createResubscribeRouter = () => createPostRoute(new KoaRouter())\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\n//\n// Returns one of two success results\n// {\n//   result: 'already subscribed' | 'subscribed successfully'\n// }\n//\nfunction createPostRoute(resubscribeRouter) {\n  return resubscribeRouter.post(\n    '/:emailSentHash',\n    ifRequestIsValid(ctx => {\n      const { emailSentHash } = ctx.params,\n        { type } = ctx.request.body,\n        errorArgs = [type, emailSentHash],\n        resubscribeToType = createResubscribeToType(ctx, type)\n\n      return dal.emailSent\n        .get({ _id: hashToDocid(emailSentHash) }, optionsForGet)\n        .then(ifResponseIsNot404(ctx, resubscribeToType))\n        .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n    })\n  )\n}\n\nfunction createResubscribeToType(ctx, type) {\n  return ({ to: encryptedEmail }) =>\n    dal.emailUnsubscription\n      .get({ _id: encryptedEmail })\n      .then(({ _id, _rev, types: unsubscribedTypes }) => {\n        // remember we're subscribed if we're _not_ unsubscribed\n        const isAlreadySubscribed = !containedIn(unsubscribedTypes)(type)\n\n        if (isAlreadySubscribed) return { result: 'already subscribed' }\n\n        const updatedTypes = discard(type)(unsubscribedTypes)\n        return dal.emailUnsubscription\n          .update({ _id, _rev, types: updatedTypes })\n          .then(justReturn({ result: 'subscribed successfully' }))\n      })\n      .then(result => {\n        ctx.status = 200\n        ctx.body = result\n      })\n}\n\nfunction createErrorMessage(type, emailSentHash) {\n  return {\n    friendly: 'attempting to update your unsubscribe settings',\n    detailed: dedent(`\n      error occurred during POST resubscribe\n        hash: ${emailSentHash}\n        type: ${type}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createResubscribeRouter\n","//---------//\n// Imports //\n//---------//\n\nimport { handleServerError } from 'server/utils'\nimport { dal } from 'server/db'\nimport { validEmailTypes } from 'universal/email/types'\nimport { alwaysReturn as justReturn, mAppend, mSet, reduce } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  },\n  typeToUnsubscribe = createTypeToUnsubscribe()\n\n//\n//------//\n// Main //\n//------//\n\n//\n// Returns one of two success results\n// {\n//   result: 'already unsubscribed' | 'unsubscribed successfully'\n// }\n//\n\nconst unsubscribe = (encryptedEmail, emailType) =>\n  typeToUnsubscribe[emailType](encryptedEmail)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createTypeToUnsubscribe() {\n  return reduce(toUnsubscribeFunctions, {})(validEmailTypes.unsubscribe)\n}\n\nfunction toUnsubscribeFunctions(typeToFunction, type) {\n  return mSet(type, unsubscribeFromType)(typeToFunction)\n\n  function unsubscribeFromType(encryptedEmail) {\n    return dal.emailUnsubscription\n      .get({ _id: encryptedEmail }, optionsForGet)\n      .then(response => {\n        if (response.status === 404) {\n          return dal.emailUnsubscription\n            .create({ _id: encryptedEmail, types: [type] })\n            .then(justReturn({ result: 'unsubscribed successfully' }))\n        } else {\n          // not 404\n          const { types: currentTypes } = response.data,\n            setOfCurrentTypes = new Set(currentTypes)\n\n          if (setOfCurrentTypes.has(type))\n            return { result: 'already unsubscribed' }\n\n          const { _rev } = response.data\n          return dal.emailUnsubscription\n            .update({\n              _rev,\n              _id: encryptedEmail,\n              types: mAppend(type)(currentTypes),\n            })\n            .then(justReturn({ result: 'unsubscribed successfully' }))\n        }\n      })\n      .catch(handleServerError(createErrorMessage, [encryptedEmail]))\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createErrorMessage(encryptedEmail) {\n  return {\n    detailed: `error creating or retrieving the emailUnsubscription with the encrypted email '${encryptedEmail}'`,\n    friendly: 'unsubscribing your email',\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default unsubscribe\n","import unsubscribeViaEncryptedEmail from './via-encrypted-email'\nimport { dal, hashToDocid } from 'server/db'\n\nconst unsubscribeViaEmailSentHash = (emailSentHash, emailType) =>\n  dal.emailSent\n    .get({ _id: hashToDocid(emailSentHash) })\n    .then(({ to: encryptedEmail }) =>\n      unsubscribeViaEncryptedEmail(encryptedEmail, emailType)\n    )\n\nexport default unsubscribeViaEmailSentHash\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\nimport dedent from 'dedent'\n\nimport unsubscribeViaEmailSentHash from './via-email-sent-hash'\n\nimport { validEmailTypes } from 'universal/email/types'\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { createIfRequestIsValid } from 'server/utils'\nimport { join, passThrough } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst createErrorMessage = getCreateErrorMessage(),\n  ifRequestIsValid = createIfRequestIsValid('emailUnsubscribe'),\n  //\n  // each email sent has an associated type which the List-Unsubscribe header is\n  //   bound to.\n  //\n  listOfApplicableTypes = join('|')(validEmailTypes.send)\n\n//\n//------//\n// Main //\n//------//\n\nconst createUnsubscribeRouter = () =>\n  passThrough(new KoaRouter(), [createGetRoute, createPostRoute])\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\n//\n// these non-restful 'GET' routes are for the List-Unsubscribe header\n//\nfunction createGetRoute(unsubscribeRouter) {\n  return unsubscribeRouter.get(\n    'list-unsubscribe',\n    `/:emailType(${listOfApplicableTypes})/:emailSentHash`,\n    ctx => {\n      const { emailSentHash, emailType } = ctx.params,\n        errorArgs = [emailType, emailSentHash]\n\n      return unsubscribeViaEmailSentHash(emailSentHash, emailType)\n        .then(result => {\n          ctx.status = 200\n          ctx.body = result\n        })\n        .catch(handleErrorDuringRoute(ctx, createErrorMessage.get, errorArgs))\n    }\n  )\n}\n\n//\n// these more restful POST routes are called by the unsubscribe views\n//   triggered by users clicking the unsubscribe email links\n//\nfunction createPostRoute(unsubscribeRouter) {\n  return unsubscribeRouter.post(\n    '/:emailSentHash',\n    ifRequestIsValid(ctx => {\n      const { emailSentHash } = ctx.params,\n        { type } = ctx.request.body,\n        errorArgs = [type, emailSentHash]\n\n      return unsubscribeViaEmailSentHash(emailSentHash, type)\n        .then(result => {\n          ctx.status = 200\n          ctx.body = result\n        })\n        .catch(handleErrorDuringRoute(ctx, createErrorMessage.post, errorArgs))\n    })\n  )\n}\n\nfunction getCreateErrorMessage() {\n  const friendly = 'attempting to update your unsubscribe settings'\n\n  return {\n    get: (type, emailSentHash) => ({\n      friendly,\n      detailed: dedent(`\n        error occurred during GET unsubscribe\n          hash: ${emailSentHash}\n          type: ${type}\n      `),\n    }),\n    post: (type, emailSentHash) => ({\n      friendly,\n      detailed: dedent(`\n        error occurred during POST unsubscribe\n          hash: ${emailSentHash}\n          type: ${type}\n      `),\n    }),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createUnsubscribeRouter\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\n\nimport { dal, hashToDocid } from 'server/db'\nimport { ifResponseIsNot404 } from 'server/utils'\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\n\n//\n//------//\n// Init //\n//------//\n\nconst optionsForGet = {\n  allow404: true,\n  returnRawResponse: true,\n}\n\n//\n//------//\n// Main //\n//------//\n\nconst createUnsubscriptionsRouter = () => createGetRoute(new KoaRouter())\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createGetRoute(unsubscriptionsRouter) {\n  return unsubscriptionsRouter.get('/:emailSentHash', ctx => {\n    const { emailSentHash } = ctx.params,\n      returnUnsubscriptions = createReturnUnsubscriptions(ctx)\n\n    return dal.emailSent\n      .get({ _id: hashToDocid(emailSentHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, returnUnsubscriptions))\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, [emailSentHash]))\n  })\n}\n\nfunction createReturnUnsubscriptions(ctx) {\n  return ({ to: encryptedEmail }) => {\n    return dal.emailUnsubscription\n      .get({ _id: encryptedEmail }, optionsForGet)\n      .then(response => {\n        const types = response.status === 404 ? [] : response.data.types\n\n        ctx.status = 200\n        ctx.body = { types }\n        return\n      })\n  }\n}\n\nfunction createErrorMessage(emailSentHash) {\n  return {\n    friendly: 'attempting to retrieve unsubscribe settings',\n    detailed: `error occurred during GET unsubscribe for the hash '${emailSentHash}'`,\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createUnsubscriptionsRouter\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\n\nimport createResubscribeRouter from './resubscribe'\nimport createUnsubscribeRouter from './unsubscribe'\nimport createUnsubscriptionsRouter from './unsubscriptions'\n\n//\n//------//\n// Main //\n//------//\n\nconst createEmailRouter = () => {\n  const emailRouter = new KoaRouter(),\n    resubscribeRouter = createResubscribeRouter(),\n    unsubscribeRouter = createUnsubscribeRouter(),\n    unsubscriptionsRouter = createUnsubscriptionsRouter()\n\n  emailRouter.use(\n    '/resubscribe',\n    resubscribeRouter.routes(),\n    resubscribeRouter.allowedMethods()\n  )\n\n  //\n  // The unsubscribe endpoint exists because we must use GET to unsubscribe from\n  //   emails.  It is not restful and shouldn't be used from the app.  Without\n  //   this restriction we\n  //\n  emailRouter.use(\n    '/unsubscribe',\n    unsubscribeRouter.routes(),\n    unsubscribeRouter.allowedMethods()\n  )\n\n  return emailRouter.use(\n    '/unsubscriptions',\n    unsubscriptionsRouter.routes(),\n    unsubscriptionsRouter.allowedMethods()\n  )\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createEmailRouter\n","//---------//\n// Imports //\n//---------//\n\nimport { dal, hashToDocid } from 'server/db'\nimport { flow, pickAll } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst getCurrentAndOtherPlayerData = arg => {\n  const { currentPlayerHash, player1Hash, player2Hash } = arg\n\n  return Promise.all([\n    dal.player.get({ _id: hashToDocid(player1Hash) }),\n    dal.player.get({ _id: hashToDocid(player2Hash) }),\n  ]).then(([player1Data, player2Data]) => {\n    const [currentPlayer, otherPlayer] =\n      currentPlayerHash === player1Hash\n        ? [player1Data, player2Data]\n        : [player2Data, player1Data]\n\n    return {\n      currentPlayer,\n      otherPlayer,\n    }\n  })\n}\n\nconst sanitize = {\n  player: {\n    current: pickAll(['number', 'displayName', 'guesses', 'word']),\n\n    other: flow([\n      pickAll(['displayName', 'guesses', 'word']),\n      changeWordToHasWord,\n    ]),\n  },\n\n  room: pickAll(['playerNumberTurn']),\n}\n\nfunction toggleTurn(playerNumberTurn) {\n  return playerNumberTurn === 1 ? 2 : 1\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction changeWordToHasWord(data) {\n  data.hasWord = !!data.word\n  delete data.word\n  return data\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { getCurrentAndOtherPlayerData, sanitize, toggleTurn }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { dal, hashToDocid } from 'server/db'\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { ifResponseIsNot404, ifStatusIsNot404 } from 'server/utils'\nimport { transformProperties } from 'fes'\nimport { getCurrentAndOtherPlayerData, sanitize } from './helpers'\n\n//\n//------//\n// Init //\n//------//\n\nconst optionsForGet = {\n  allow404: true,\n  returnRawResponse: true,\n}\n\n//\n//------//\n// Main //\n//------//\n\nfunction createGetRoute(arg) {\n  const { router } = arg\n  router.get('/:roomHash', getRoom)\n\n  return arg\n}\n\nfunction getRoom(ctx) {\n  const { roomHash } = ctx.params,\n    playerHash = ctx.request.query['player-hash']\n\n  if (!playerHash) {\n    ctx.status = 400\n    ctx.body = {\n      error: \"the query parameter 'player-hash' is required\",\n    }\n  }\n\n  const errorArgs = [playerHash, roomHash],\n    authorizeThenGetPlayerData = createAuthorizeThenGetPlayerData(\n      ctx,\n      playerHash\n    )\n\n  return dal.activeRoom\n    .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n    .then(ifResponseIsNot404(ctx, authorizeThenGetPlayerData))\n    .then(ifStatusIsNot404(sanitizeAndReturnAllData))\n    .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n}\n\nfunction createAuthorizeThenGetPlayerData(ctx, currentPlayerHash) {\n  return roomData => {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your queried playerHash\",\n      }\n      return { is404: true }\n    }\n\n    return Promise.all([\n      ctx,\n      roomData,\n      getCurrentAndOtherPlayerData({\n        currentPlayerHash,\n        player1Hash,\n        player2Hash,\n      }),\n    ])\n  }\n}\n\nfunction sanitizeAndReturnAllData(result) {\n  const [ctx, roomData, currentAndOtherPlayer] = result,\n    { currentPlayer, otherPlayer } = transformProperties({\n      currentPlayer: sanitize.player.current,\n      otherPlayer: sanitize.player.other,\n    })(currentAndOtherPlayer)\n\n  ctx.status = 200\n  ctx.body = {\n    currentPlayer,\n    otherPlayer,\n    room: sanitize.room(roomData),\n  }\n}\n\nfunction createErrorMessage(playerHash, roomHash) {\n  return {\n    friendly: 'retrieving player data',\n    detailed: dedent(`\n      error occurred during GET player\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createGetRoute\n","//\n// TODO: extract shared code between this file and post_init-player\n//   into helpers.js\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { combine, mAppend } from 'fes'\nimport { getCurrentAndOtherPlayerData, sanitize, toggleTurn } from './helpers'\nimport {\n  createIfRequestIsValid,\n  ifResponseIsNot404,\n  ifStatusIsNot404,\n} from 'server/utils'\nimport {\n  dal,\n  docidToHash,\n  hashToDocid,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst ifRequestIsValid = createIfRequestIsValid('guess'),\n  optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  }\n\n//\n//------//\n// Main //\n//------//\n\nfunction createPostGuess(arg) {\n  const { router, websocketServer } = arg,\n    addGuess = createAddGuess(websocketServer)\n\n  router.post('/:roomHash/player/:playerHash/guess', ifRequestIsValid(addGuess))\n\n  return arg\n}\n\nfunction createAddGuess(websocketServer) {\n  const addGuessAndReturnCurrentPlayer = createAddGuessAndReturnCurrentPlayer(\n    websocketServer\n  )\n\n  return ctx => {\n    const { playerHash, roomHash } = ctx.params,\n      { guess } = ctx.request.body,\n      errorArgs = [playerHash, roomHash, guess],\n      authorizeThenGetPlayerData = createAuthorizeThenGetPlayerData(\n        ctx,\n        playerHash\n      )\n\n    return dal.activeRoom\n      .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, authorizeThenGetPlayerData))\n      .then(ifStatusIsNot404(addGuessAndReturnCurrentPlayer))\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n  }\n}\n\nfunction createAuthorizeThenGetPlayerData(ctx, currentPlayerHash) {\n  return function authorizeThenGetPlayerData(roomData) {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your specified playerHash\",\n      }\n      return { is404: true }\n    }\n\n    return Promise.all([\n      ctx,\n      roomData,\n      getCurrentAndOtherPlayerData({\n        currentPlayerHash,\n        player1Hash,\n        player2Hash,\n      }),\n    ])\n  }\n}\n\nfunction createAddGuessAndReturnCurrentPlayer(websocketServer) {\n  return result => {\n    const [ctx, couchdbRoomData, { currentPlayer, otherPlayer }] = result,\n      { guess: guessedWord } = ctx.request.body,\n      { word } = otherPlayer,\n      roomIdAndRev = pickIdAndRev(couchdbRoomData),\n      playerIdAndRev = pickIdAndRev(currentPlayer),\n      roomData = removeCouchdbProperties(couchdbRoomData),\n      playerData = removeCouchdbProperties(currentPlayer)\n\n    const guess = {\n      word: guessedWord,\n      isCorrect: word === guessedWord,\n    }\n\n    roomData.playerNumberTurn = toggleTurn(roomData.playerNumberTurn)\n    mAppend(guess)(playerData.guesses)\n\n    return Promise.all([\n      dal.activeRoom.update(combine(roomData)(roomIdAndRev)),\n      dal.player.update(combine(playerData)(playerIdAndRev)),\n    ]).then(() => {\n      const sanitizedRoom = sanitize.room(roomData)\n\n      websocketServer.maybeUpdateClient({\n        playerHash: docidToHash(otherPlayer._id),\n        data: {\n          id: 'otherPlayerGuessed',\n          data: {\n            commitOrDispatch: 'commit',\n            type: 'room/updateOtherPlayerAndRoom',\n            payload: {\n              otherPlayer: sanitize.player.other(playerData),\n              room: sanitizedRoom,\n            },\n          },\n        },\n      })\n\n      ctx.status = 200\n      ctx.body = {\n        room: sanitizedRoom,\n        currentPlayer: sanitize.player.current(playerData),\n      }\n    })\n  }\n}\n\nfunction createErrorMessage(playerHash, roomHash, guess) {\n  return {\n    friendly: 'adding your guess',\n    detailed: dedent(`\n      error occurred during POST guess\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n        guess: ${guess}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPostGuess\n","//\n// TODO: update friend's client via web sockets\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { combine, last, mAssignOver } from 'fes'\nimport { sanitize } from './helpers'\nimport {\n  createIfRequestIsValid,\n  ifResponseIsNot404,\n  ifStatusIsNot404,\n} from 'server/utils'\nimport {\n  dal,\n  docidToHash,\n  hashToDocid,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst ifRequestIsValid = createIfRequestIsValid('markChosenLetter'),\n  optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  }\n\n//\n//------//\n// Main //\n//------//\n\nfunction createPostMarkChosenLetter(arg) {\n  const { router, websocketServer } = arg,\n    markChosenLetter = createMarkChosenLetter(websocketServer)\n\n  router.post(\n    '/:roomHash/player/:playerHash/mark-chosen-letter',\n    ifRequestIsValid(markChosenLetter)\n  )\n\n  return arg\n}\n\nfunction createMarkChosenLetter(websocketServer) {\n  return ctx => {\n    const { playerHash, roomHash } = ctx.params,\n      { chosenLetter } = ctx.request.body,\n      errorArgs = [playerHash, roomHash, chosenLetter],\n      authorizeThenGetOtherPlayerData = createAuthorizeThenGetOtherPlayerData(\n        ctx\n      ),\n      markChosenLetterAndReturnOtherPlayer = createMarkChosenLetterAndReturnOtherPlayer(\n        websocketServer\n      )\n\n    return dal.activeRoom\n      .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, authorizeThenGetOtherPlayerData))\n      .then(ifStatusIsNot404(markChosenLetterAndReturnOtherPlayer))\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n  }\n}\n\nfunction createAuthorizeThenGetOtherPlayerData(ctx) {\n  const { playerHash: currentPlayerHash } = ctx.params\n\n  return function authorizeThenGetOtherPlayerData(roomData) {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your specified playerHash\",\n      }\n      return { is404: true }\n    }\n\n    const otherPlayerHash =\n      currentPlayerHash === player1Hash ? player2Hash : player1Hash\n\n    return Promise.all([\n      ctx,\n      dal.player.get({ _id: hashToDocid(otherPlayerHash) }),\n    ])\n  }\n}\n\nfunction createMarkChosenLetterAndReturnOtherPlayer(websocketServer) {\n  return ([ctx, couchdbOtherPlayerData]) => {\n    const playerIdAndRev = pickIdAndRev(couchdbOtherPlayerData),\n      otherPlayerData = removeCouchdbProperties(couchdbOtherPlayerData),\n      { chosenLetter } = ctx.request.body,\n      lastGuess = last(otherPlayerData.guesses)\n\n    mAssignOver(lastGuess)({\n      chosenLetter,\n      isValid: true,\n      wasReviewed: true,\n    })\n\n    return dal.player\n      .update(combine(otherPlayerData)(playerIdAndRev))\n      .then(() => {\n        websocketServer.maybeUpdateClient({\n          playerHash: docidToHash(couchdbOtherPlayerData._id),\n          data: {\n            id: 'otherPlayerChoseLetter',\n            data: {\n              commitOrDispatch: 'commit',\n              type: 'room/updateCurrentPlayer',\n              payload: {\n                currentPlayer: sanitize.player.current(otherPlayerData),\n              },\n            },\n          },\n        })\n\n        ctx.status = 200\n        ctx.body = {\n          otherPlayer: sanitize.player.other(otherPlayerData),\n        }\n      })\n  }\n}\n\nfunction createErrorMessage(playerHash, roomHash, chosenLetter) {\n  return {\n    friendly: 'marking your chosen letter',\n    detailed: dedent(`\n      error occurred during POST mark-chosen-letter\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n        chosenLetter: ${chosenLetter}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPostMarkChosenLetter\n","//\n// TODO: extract shared code between this file and post_init-player\n//   into helpers.js\n//\n// TODO: update friend's client via web sockets\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { alwaysReturn as justReturn, combine, last, mAssignOver } from 'fes'\nimport { sanitize, toggleTurn } from './helpers'\nimport { ifResponseIsNot404, ifStatusIsNot404 } from 'server/utils'\nimport {\n  dal,\n  docidToHash,\n  hashToDocid,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst optionsForGet = {\n  allow404: true,\n  returnRawResponse: true,\n}\n\n//\n//------//\n// Main //\n//------//\n\nfunction createPostMarkGuessAsInvalid(arg) {\n  const { router, websocketServer } = arg,\n    markGuessAsInvalid = createMarkGuessAsInvalid(websocketServer)\n\n  router.post(\n    '/:roomHash/player/:playerHash/mark-guess-as-invalid',\n    markGuessAsInvalid\n  )\n\n  return arg\n}\n\nfunction createMarkGuessAsInvalid(websocketServer) {\n  return ctx => {\n    const { playerHash, roomHash } = ctx.params,\n      errorArgs = [playerHash, roomHash],\n      authorizeThenGetOtherPlayerAndRoomData = createAuthorizeThenGetOtherPlayerAndRoomData(\n        ctx\n      )\n\n    return dal.activeRoom\n      .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, authorizeThenGetOtherPlayerAndRoomData))\n      .then(\n        ifStatusIsNot404(async ([ctx, roomData, otherPlayerData]) => {\n          const [otherPlayer, room] = await Promise.all([\n            markGuessAsInvalidAndReturnOtherPlayer(otherPlayerData),\n            updateTurnAndReturnRoomData(roomData),\n          ])\n\n          const sanitizedRoom = sanitize.room(room)\n\n          websocketServer.maybeUpdateClient({\n            playerHash: docidToHash(otherPlayerData._id),\n            data: {\n              id: 'otherPlayerMarkedGuessAsInvalid',\n              data: {\n                commitOrDispatch: 'commit',\n                type: 'room/updateCurrentPlayerAndRoom',\n                payload: {\n                  currentPlayer: sanitize.player.current(otherPlayer),\n                  room: sanitizedRoom,\n                },\n              },\n            },\n          })\n\n          ctx.status = 200\n          ctx.body = {\n            otherPlayer: sanitize.player.other(otherPlayer),\n            room: sanitizedRoom,\n          }\n        })\n      )\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n  }\n}\n\nfunction createAuthorizeThenGetOtherPlayerAndRoomData(ctx) {\n  const { playerHash: currentPlayerHash } = ctx.params\n\n  return function authorizeThenGetOtherPlayerAndRoomData(roomData) {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your specified playerHash\",\n      }\n      return { is404: true }\n    }\n\n    const otherPlayerHash =\n      currentPlayerHash === player1Hash ? player2Hash : player1Hash\n\n    return Promise.all([\n      ctx,\n      roomData,\n      dal.player.get({ _id: hashToDocid(otherPlayerHash) }),\n    ])\n  }\n}\n\nfunction markGuessAsInvalidAndReturnOtherPlayer(couchdbPlayerData) {\n  const playerIdAndRev = pickIdAndRev(couchdbPlayerData),\n    playerData = removeCouchdbProperties(couchdbPlayerData),\n    lastGuess = last(playerData.guesses)\n\n  mAssignOver(lastGuess)({\n    isValid: false,\n    wasReviewed: true,\n  })\n\n  return dal.player\n    .update(combine(playerData)(playerIdAndRev))\n    .then(justReturn(playerData))\n}\n\nfunction updateTurnAndReturnRoomData(couchdbRoomData) {\n  const roomData = removeCouchdbProperties(couchdbRoomData),\n    roomIdAndRev = pickIdAndRev(couchdbRoomData)\n\n  roomData.playerNumberTurn = toggleTurn(roomData.playerNumberTurn)\n\n  return dal.activeRoom\n    .update(combine(roomData)(roomIdAndRev))\n    .then(justReturn(roomData))\n}\n\nfunction createErrorMessage(playerHash, roomHash) {\n  return {\n    friendly: \"marking your friend's guess as invalid\",\n    detailed: dedent(`\n      error occurred during POST mark-guess-as-invalid\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPostMarkGuessAsInvalid\n","//\n// TODO: extract shared code between this file and post_init-player\n//   into helpers.js\n//\n// TODO: update friend's client via web sockets\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { alwaysReturn as justReturn, combine, last, mAssignOver } from 'fes'\nimport { sanitize } from './helpers'\nimport { ifResponseIsNot404, ifStatusIsNot404 } from 'server/utils'\nimport {\n  dal,\n  docidToHash,\n  hashToDocid,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst optionsForGet = {\n  allow404: true,\n  returnRawResponse: true,\n}\n\n//\n//------//\n// Main //\n//------//\n\nfunction createPostMarkGuessAsValid(arg) {\n  const { router, websocketServer } = arg,\n    markGuessAsValid = createMarkGuessAsValid(websocketServer)\n\n  router.post(\n    '/:roomHash/player/:playerHash/mark-guess-as-valid',\n    markGuessAsValid\n  )\n\n  return arg\n}\n\nfunction createMarkGuessAsValid(websocketServer) {\n  return ctx => {\n    const { playerHash, roomHash } = ctx.params,\n      errorArgs = [playerHash, roomHash],\n      authorizeThenGetOtherPlayer = createAuthorizeThenGetOtherPlayer(ctx)\n\n    return dal.activeRoom\n      .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, authorizeThenGetOtherPlayer))\n      .then(\n        ifStatusIsNot404(async ([ctx, otherPlayerData]) => {\n          const otherPlayer = await markGuessAsValidAndReturnOtherPlayer(\n            otherPlayerData\n          )\n\n          websocketServer.maybeUpdateClient({\n            playerHash: docidToHash(otherPlayerData._id),\n            data: {\n              id: 'otherPlayerMarkedGuessAsValid',\n              data: {\n                commitOrDispatch: 'commit',\n                type: 'room/updateCurrentPlayer',\n                payload: {\n                  currentPlayer: sanitize.player.current(otherPlayer),\n                },\n              },\n            },\n          })\n\n          ctx.status = 200\n          ctx.body = { otherPlayer: sanitize.player.other(otherPlayer) }\n        })\n      )\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n  }\n}\n\nfunction createAuthorizeThenGetOtherPlayer(ctx) {\n  const { playerHash: currentPlayerHash } = ctx.params\n\n  return roomData => {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your specified playerHash\",\n      }\n      return { is404: true }\n    }\n\n    const otherPlayerHash =\n      currentPlayerHash === player1Hash ? player2Hash : player1Hash\n\n    return Promise.all([\n      ctx,\n      dal.player.get({ _id: hashToDocid(otherPlayerHash) }),\n    ])\n  }\n}\n\nfunction markGuessAsValidAndReturnOtherPlayer(couchdbPlayerData) {\n  const playerIdAndRev = pickIdAndRev(couchdbPlayerData),\n    playerData = removeCouchdbProperties(couchdbPlayerData),\n    lastGuess = last(playerData.guesses)\n\n  mAssignOver(lastGuess)({\n    isValid: true,\n    wasReviewed: true,\n  })\n\n  return dal.player\n    .update(combine(playerData)(playerIdAndRev))\n    .then(justReturn(playerData))\n}\n\nfunction createErrorMessage(playerHash, roomHash) {\n  return {\n    friendly: \"marking your friend's guess as valid\",\n    detailed: dedent(`\n      error occurred during POST mark-guess-as-valid\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPostMarkGuessAsValid\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { handleErrorDuringRoute } from 'project-root/create/router/api/helpers'\nimport { combine } from 'fes'\nimport { getCurrentAndOtherPlayerData, sanitize } from './helpers'\nimport {\n  dal,\n  docidToHash,\n  hashToDocid,\n  removeCouchdbProperties,\n} from 'server/db'\nimport {\n  createIfRequestIsValid,\n  ifResponseIsNot404,\n  ifStatusIsNot404,\n} from 'server/utils'\n\n//\n//------//\n// Init //\n//------//\n\nconst ifRequestIsValid = createIfRequestIsValid('initPlayer'),\n  optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  }\n\n//\n//------//\n// Main //\n//------//\n\nfunction createPostInitPlayer(arg) {\n  const { router, websocketServer } = arg,\n    initializePlayer = createInitializePlayer(websocketServer)\n\n  router.post(\n    '/:roomHash/player/:playerHash',\n    ifRequestIsValid(initializePlayer)\n  )\n\n  return arg\n}\n\nfunction createInitializePlayer(websocketServer) {\n  const initPlayerAndReturnBothPlayersData = createInitPlayerAndReturnBothPlayersData(\n    websocketServer\n  )\n\n  return ctx => {\n    const { playerHash, roomHash } = ctx.params,\n      { displayName, word } = ctx.request.body,\n      errorArgs = [playerHash, roomHash, displayName, word],\n      authorizeThenGetPlayerData = createAuthorizeThenGetPlayerData(\n        ctx,\n        playerHash\n      )\n\n    return dal.activeRoom\n      .get({ _id: hashToDocid(roomHash) }, optionsForGet)\n      .then(ifResponseIsNot404(ctx, authorizeThenGetPlayerData))\n      .then(ifStatusIsNot404(initPlayerAndReturnBothPlayersData))\n      .catch(handleErrorDuringRoute(ctx, createErrorMessage, errorArgs))\n  }\n}\n\nfunction createAuthorizeThenGetPlayerData(ctx, currentPlayerHash) {\n  return function authorizeThenGetPlayerData(roomData) {\n    const { player1Hash, player2Hash } = roomData,\n      possiblePlayerHashes = new Set([player1Hash, player2Hash])\n\n    if (!possiblePlayerHashes.has(currentPlayerHash)) {\n      ctx.status = 404\n      ctx.body = {\n        error: \"The room isn't associated with your specified playerHash\",\n      }\n      return { is404: true }\n    }\n\n    return Promise.all([\n      ctx,\n      getCurrentAndOtherPlayerData({\n        currentPlayerHash,\n        player1Hash,\n        player2Hash,\n      }),\n    ])\n  }\n}\n\nfunction createInitPlayerAndReturnBothPlayersData(websocketServer) {\n  return result => {\n    const [ctx, { currentPlayer, otherPlayer }] = result,\n      newPlayerData = ctx.request.body,\n      { _id, _rev } = currentPlayer,\n      existingPlayerData = removeCouchdbProperties(currentPlayer),\n      playerData = combine(newPlayerData)(existingPlayerData)\n\n    return dal.player.update(combine(playerData)({ _id, _rev })).then(() => {\n      websocketServer.maybeUpdateClient({\n        playerHash: docidToHash(otherPlayer._id),\n        data: {\n          id: 'otherPlayerInitialized',\n          data: {\n            commitOrDispatch: 'commit',\n            type: 'room/updateOtherPlayer',\n            payload: {\n              otherPlayer: sanitize.player.other(playerData),\n            },\n          },\n        },\n      })\n\n      ctx.status = 200\n      ctx.body = {\n        currentPlayer: sanitize.player.current(playerData),\n        otherPlayer: sanitize.player.other(otherPlayer),\n      }\n    })\n  }\n}\n\nfunction createErrorMessage(playerHash, roomHash, displayName, word) {\n  return {\n    friendly: 'adding word and display name',\n    detailed: dedent(`\n      error occurred during POST init-player\n        playerHash: ${playerHash}\n        roomHash: ${roomHash}\n        displayName: ${displayName}\n        word: ${word}\n    `),\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPostInitPlayer\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\nimport createGetRoute from './get'\nimport createPostGuess from './post_guess'\nimport createPostMarkChosenLetter from './post_mark-chosen-letter'\nimport createPostMarkGuessAsInvalid from './post_mark-guess-as-invalid'\nimport createPostMarkGuessAsValid from './post_mark-guess-as-valid'\nimport createPostInitPlayer from './post_init-player'\n\nimport { passThrough } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst createRoomRouter = websocketServer => {\n  const router = new KoaRouter()\n\n  passThrough({ router, websocketServer }, [\n    createGetRoute,\n    createPostInitPlayer,\n    createPostGuess,\n    createPostMarkGuessAsInvalid,\n    createPostMarkGuessAsValid,\n    createPostMarkChosenLetter,\n  ])\n\n  return router\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createRoomRouter\n","//---------//\n// Imports //\n//---------//\n\nimport { dal } from 'server/db'\nimport { resolveAllProperties } from 'universal/utils'\n\n//\n//------//\n// Main //\n//------//\n\nconst createEmailSentRecords = encryptedEmails => {\n  const [player1EncryptedEmail, player2EncryptedEmail] = encryptedEmails\n\n  return resolveAllProperties({\n    player1EmailSentData: createPlayer1EmailSentRecord(player1EncryptedEmail),\n    player2EmailSentData: createPlayer2EmailSentRecord(player2EncryptedEmail),\n    encryptedEmails,\n  })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createPlayer1EmailSentRecord(player1EncryptedEmail) {\n  return dal.emailSent.create({\n    to: player1EncryptedEmail,\n    type: 'room-created',\n  })\n}\n\nfunction createPlayer2EmailSentRecord(player2EncryptedEmail) {\n  return dal.emailSent.create({\n    to: player2EncryptedEmail,\n    type: 'invitation',\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createEmailSentRecords\n","//---------//\n// Imports //\n//---------//\n\nimport { dal, docidToHash } from 'server/db'\nimport { resolveAllProperties } from 'universal/utils'\n\n//\n//------//\n// Main //\n//------//\n\nconst createGameAndPlayers = responses => {\n  const {\n      encryptedEmails,\n      player1EmailSentData,\n      player2EmailSentData,\n    } = responses,\n    [player1EncryptedEmail, player2EncryptedEmail] = encryptedEmails\n\n  return dal.activeRoom.create({}).then(activeRoomResult => {\n    const roomHash = docidToHash(activeRoomResult._id)\n\n    return resolveAllProperties({\n      player1Data: createPlayer(1, roomHash, player1EncryptedEmail),\n      player1EmailSentHash: docidToHash(player1EmailSentData._id),\n      player2Data: createPlayer(2, roomHash, player2EncryptedEmail),\n      player2EmailSentHash: docidToHash(player2EmailSentData._id),\n      roomHash,\n    })\n  })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createPlayer(number, roomHash, encryptedEmail) {\n  return dal.player.create({\n    encryptedEmail,\n    roomHash,\n    number,\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createGameAndPlayers\n","//\n// README\n//   - unfortunateley there doesn't seem to be a great way to automatically\n//     validate compiled template input.  The below approach is manual.\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport handlebars from 'handlebars'\n\nimport youAreInvited from './templates/you-are-invited.html'\nimport youCreatedARoom from './templates/you-created-a-room.html'\n\nimport { baseUrl } from 'project-root/config/app'\nimport { createApproveSimpleInput } from 'universal/utils'\nimport { combine, map, mSet, reduce } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst globalTemplateVariables = getGlobalTemplateVariables(),\n  templateNameToCompiledTemplate = getTemplateNameToCompiledTemplate(),\n  templateNameToRequiredProperties = getTemplateNameToRequiredProperties()\n\n//\n//------//\n// Main //\n//------//\n\nconst templateNameToCompile = reduce(createCompileFunction, {})(\n  Object.keys(templateNameToCompiledTemplate)\n)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\n//\n// This method should only ever be called on pre-validated input, so I'm only\n//   going to perform light validation here as a sanity check.\n//\nfunction createCompileFunction(result, templateName) {\n  const compiledTemplate = templateNameToCompiledTemplate[templateName],\n    approve = createApproveSimpleInput(`compiling template '${templateName}'`),\n    requiredProperties = templateNameToRequiredProperties[templateName]\n\n  return mSet(templateName, approveThenCompile)(result)\n\n  function approveThenCompile(...arrayOfArguments) {\n    const error = approve(arrayOfArguments, requiredProperties)\n    if (error) return { error }\n\n    const finalTemplateVariables = combine(arrayOfArguments[0])(\n      globalTemplateVariables\n    )\n\n    return { html: compiledTemplate(finalTemplateVariables) }\n  }\n}\n\n//\n// Per usual - input must be an object whose properties match the expected\n//   template variables\n//\n\nfunction getTemplateNameToRequiredProperties() {\n  return {\n    youAreInvited: new Set(['emailSentHash', 'playerHash', 'roomHash']),\n    youCreatedARoom: new Set(['emailSentHash', 'playerHash', 'roomHash']),\n  }\n}\n\nfunction getTemplateNameToCompiledTemplate() {\n  return map(handlebars.compile)({\n    youAreInvited,\n    youCreatedARoom,\n  })\n}\n\nfunction getGlobalTemplateVariables() {\n  return { global: { externalBaseUrl: baseUrl.external } }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default templateNameToCompile\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\nimport nodemailer from 'nodemailer'\nimport pify from 'pify'\n\nimport templateNameToCompile from './template-name-to-compile'\nimport debug from 'project-root/config/debug'\n\nimport { baseUrl } from 'project-root/config/app'\nimport { combineAll, map, mSet, omit, reduce, transformProperties } from 'fes'\nimport { smtpAuth } from 'project-root/config/app'\nimport { handleServerError, handleServerErrorSync } from 'server/utils'\nimport { createApproveSimpleInput, jstring, mAddToSet } from 'universal/utils'\n\n//\n//------//\n// Init //\n//------//\n\nconst { preventEmailFromSending } = debug\n\n//\n//------//\n// Main //\n//------//\n\nconst smtpTransporter = createSmtpTransporter(),\n  templateNameToInfo = getTemplateNameToInfo(),\n  templateNames = Object.keys(templateNameToInfo),\n  send = pify(smtpTransporter.sendMail.bind(smtpTransporter))\n\nconst templateNameToSend = reduce(createSendFunction, {})(templateNames)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createSendFunction(templateNameToSend, templateName) {\n  const approveInput = createApproveSimpleInput(\n      `sending email '${templateName}'`\n    ),\n    { messageData, requiredProperties, type } = templateNameToInfo[\n      templateName\n    ],\n    approveThenCompileToHtml = templateNameToCompile[templateName]\n\n  return mSet(templateName, approveThenSend)(templateNameToSend)\n\n  // scoped helper functions\n\n  function approveThenSend(...arrayOfArguments) {\n    const error = approveInput(arrayOfArguments, requiredProperties)\n    if (error) return handleSendError(error)\n\n    const input = arrayOfArguments[0],\n      { error: err, html } = approveThenCompileToHtml(input.templateVariables)\n    if (err) return handleSendError(err)\n\n    // valid input, phew!\n\n    const { emailSentHash } = input.templateVariables,\n      listUnsubscribeUrl =\n        baseUrl.external + `/email/unsubscribe/${type}/${emailSentHash}`,\n      inputMessageData = omit('templateVariables')(input),\n      finalMessageData = combineAll.objects([\n        messageData,\n        inputMessageData,\n        {\n          html,\n          list: {\n            unsubscribe: {\n              url: listUnsubscribeUrl,\n            },\n          },\n        },\n      ])\n\n    if (process.env.NODE_ENV === 'development' && preventEmailFromSending) {\n      return Promise.resolve()\n    }\n\n    return send(finalMessageData).catch(\n      handleServerError(createErrorMessage, [type, emailSentHash, input])\n    )\n  }\n}\n\nfunction createErrorMessage(type, emailSentHash, input) {\n  return {\n    friendly: 'sending an email',\n    detailed: dedent(`\n      Error occurred while sending an email\n      type: ${type}\n      emailSentHash: ${emailSentHash}\n      templateVariables: ${jstring(input.templateVariables)}\n    `),\n  }\n}\n\nfunction handleSendError(error) {\n  return handleServerErrorSync(\n    'an error occurred while sending an email',\n    error\n  )\n}\n\nfunction getTemplateNameToInfo() {\n  return map(normalizeTemplateInfo)({\n    youAreInvited: {\n      type: 'invitation',\n      requiredProperties: new Set(['to']),\n      messageData: {\n        from: 'info@passthequill.com',\n        subject: 'Your friend has invited you to Pass The Quill',\n      },\n    },\n\n    youCreatedARoom: {\n      type: 'room-created',\n      requiredProperties: new Set(['to']),\n      messageData: {\n        from: 'info@passthequill.com',\n        subject: 'You created a room',\n      },\n    },\n  })\n}\n\nfunction normalizeTemplateInfo(templateInfo) {\n  return transformProperties({\n    requiredProperties: mAddToSet('templateVariables'),\n  })(templateInfo)\n}\n\nfunction createSmtpTransporter() {\n  return nodemailer.createTransport({\n    host: 'mail.passthequill.com',\n    auth: smtpAuth,\n    authMethod: 'LOGIN',\n    secure: false,\n    requireTLS: true,\n    pool: true,\n    rateLimit: 5,\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default templateNameToSend\n","//---------//\n// Imports //\n//---------//\n\nimport sendEmail from 'server/email/send'\n\nimport { docidToHash } from 'server/db'\nimport { resolveAllProperties } from 'universal/utils'\n\n//------//\n// Main //\n//------//\n\nconst createSendEmails = (player1Email, player2Email) => {\n  return responses => {\n    const {\n      player1Data,\n      player1EmailSentHash,\n      player2Data,\n      player2EmailSentHash,\n      roomHash,\n    } = responses\n\n    const player1 = {\n        email: player1Email,\n        emailSentHash: player1EmailSentHash,\n        hash: docidToHash(player1Data._id),\n      },\n      player2 = {\n        email: player2Email,\n        emailSentHash: player2EmailSentHash,\n        hash: docidToHash(player2Data._id),\n      }\n\n    return resolveAllProperties({\n      player1SendResult: send(player1, roomHash, 'youCreatedARoom'),\n      player2SendResult: send(player2, roomHash, 'youAreInvited'),\n    })\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction send(player, roomHash, templateName) {\n  return sendEmail[templateName]({\n    to: player.email,\n    templateVariables: {\n      emailSentHash: player.emailSentHash,\n      playerHash: player.hash,\n      roomHash,\n    },\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createSendEmails\n","//---------//\n// Imports //\n//---------//\n\nimport { containedIn, mAppend, none } from 'fes'\nimport { sequentiallyResolveEach } from 'universal/utils'\n\n//\n//------//\n// Init //\n//------//\n\n//\n// the wording here is goofy because there's no such thing as subscribing to an\n//   email, however 'not unsubscribed' is a double negative, so we're left with\n//   two evils\n//\nconst isSubscribedTo = {\n  roomCreated: none(containedIn(['room-created', 'all'])),\n  invitation: none(containedIn(['invitation', 'all'])),\n}\n\n//\n//------//\n// Main //\n//------//\n\nconst ifNotUnsubscribed = asyncFunctions => {\n  return responses => {\n    const [\n      player1UnsubscriptionTypes,\n      player2UnsubscriptionTypes,\n      encryptedEmails,\n    ] = responses\n\n    const player1 = {\n        isSubscribed: isSubscribedTo.roomCreated(player1UnsubscriptionTypes),\n      },\n      player2 = {\n        isSubscribed: isSubscribedTo.invitation(player2UnsubscriptionTypes),\n      },\n      bothAreSubscribed = player1.isSubscribed && player2.isSubscribed\n\n    if (bothAreSubscribed)\n      return sequentiallyResolveEach(asyncFunctions, encryptedEmails)\n\n    const unsubscribedPlayers = []\n    if (!player1.isSubscribed) mAppend('player1')(unsubscribedPlayers)\n    if (!player2.isSubscribed) mAppend('player2')(unsubscribedPlayers)\n\n    return { unsubscribedPlayers }\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default ifNotUnsubscribed\n","//---------//\n// Imports //\n//---------//\n\nimport bcryptjs from 'bcryptjs'\n\nimport { handleServerError } from 'server/utils'\nimport { salt } from 'project-root/config/app'\nimport { map, passThrough, prepend } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst encryptEmail = email =>\n  bcryptjs\n    .hash(email, salt.email)\n    .catch(handleServerError(createEncryptEmailMessage, [email]))\n\nconst encryptAllEmails = allEmails =>\n  passThrough(allEmails, [\n    map(email => bcryptjs.hash(email, salt.email)),\n    eventualEncryptedEmails =>\n      Promise.all(eventualEncryptedEmails).catch(\n        handleServerError(createEncryptAllEmailsMessage, [allEmails])\n      ),\n  ])\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEncryptEmailMessage(email) {\n  return {\n    friendly: 'encrypting the email address',\n    detailed: `error while encrypting the email address: ${email}`,\n  }\n}\n\nfunction createEncryptAllEmailsMessage(allEmails) {\n  return {\n    friendly: 'error while encrypting the email addresses',\n    detailed:\n      'error while encrypting the following email addresses:' +\n      `${map(prepend('\\n'))(allEmails)}`,\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { encryptEmail, encryptAllEmails }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport createEmailSentRecords from './create-email-sent-records'\nimport createGameAndPlayers from './create-game-and-players'\nimport createSendEmails from './create-send-emails'\nimport ifNotUnsubscribed from './if-not-unsubscribed'\n\nimport { isLaden } from 'fes'\nimport { encryptAllEmails } from 'server/email/encrypt'\nimport { dal } from 'server/db'\nimport { createIfRequestIsValid } from 'server/utils'\nimport { handleErrorDuringRoute } from '../helpers'\n\n//\n//------//\n// Init //\n//------//\n\nconst ifRequestIsValid = createIfRequestIsValid('createARoom'),\n  optionsForGet = {\n    allow404: true,\n    returnRawResponse: true,\n  }\n\n//\n//------//\n// Main //\n//------//\n\nconst post_createARoom = ifRequestIsValid(ctx => {\n  const { player1Email, player2Email } = ctx.request.body,\n    sendEmails = createSendEmails(player1Email, player2Email)\n\n  return encryptAllEmails([player1Email, player2Email])\n    .then(getUnsubscribedTypes)\n    .then(\n      ifNotUnsubscribed([\n        createEmailSentRecords,\n        createGameAndPlayers,\n        sendEmails,\n      ])\n    )\n    .then(({ unsubscribedPlayers = [] }) => {\n      ctx.status = 200\n\n      const result = isLaden(unsubscribedPlayers)\n        ? 'emails were not sent due to one or both players being unsubscribed'\n        : 'emails sent successfully'\n\n      ctx.body = {\n        result,\n        unsubscribedPlayers,\n      }\n    })\n    .catch(\n      handleErrorDuringRoute(ctx, createErrorMessage, [\n        player1Email,\n        player2Email,\n      ])\n    )\n})\n\nfunction getUnsubscribedTypes(encryptedEmails) {\n  const [player1EncryptedEmail, player2EncryptedEmail] = encryptedEmails\n\n  return Promise.all([\n    getEmailUnsubscriptionTypes(player1EncryptedEmail),\n    getEmailUnsubscriptionTypes(player2EncryptedEmail),\n    encryptedEmails,\n  ])\n}\n\nfunction getEmailUnsubscriptionTypes(encryptedEmail) {\n  return dal.emailUnsubscription\n    .get({ _id: encryptedEmail }, optionsForGet)\n    .then(response => {\n      return response.status === 404 ? [] : response.data.types\n    })\n}\n\nfunction createErrorMessage(player1Email, player2Email) {\n  return encryptAllEmails([player1Email, player2Email]).then(\n    ([player1EncryptedEmail, player2EncryptedEmail]) => {\n      const friendly = 'creating a room',\n        detailed = dedent(`\n          An error occurred while creating a room\n          player1EncryptedEmail: ${player1EncryptedEmail}\n          player2EncryptedEmail: ${player2EncryptedEmail}\n        `)\n\n      return { detailed, friendly }\n    }\n  )\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default post_createARoom\n","//---------//\n// Imports //\n//---------//\n\nimport bodyparser from 'koa-bodyparser'\nimport dedent from 'dedent'\nimport KoaRouter from 'koa-router'\nimport { RateLimit } from 'koa2-ratelimit'\n\nimport log from 'server/log'\nimport createEmailRouter from './email'\nimport createRoomRouter from './room'\nimport post_createARoom from './create-a-room'\nimport createWebsocketServer from '../../websocket-server'\nimport { jstring } from 'universal/utils'\n\n//\n//------//\n// Main //\n//------//\n\nconst createApiRouter = () => {\n  const apiRouter = new KoaRouter(),\n    websocketServer = createWebsocketServer.liveUpdate(),\n    emailRouter = createEmailRouter(),\n    roomRouter = createRoomRouter(websocketServer),\n    createARoomRateLimiter = getCreateARoomRateLimiter()\n\n  return apiRouter\n    .use(bodyparser())\n    .use('/email', emailRouter.routes(), emailRouter.allowedMethods())\n    .use('/room', roomRouter.routes(), roomRouter.allowedMethods())\n    .post('/create-a-room', createARoomRateLimiter, post_createARoom)\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getCreateARoomRateLimiter() {\n  const max = 10,\n    interval = { min: 30 }\n\n  return RateLimit.middleware({\n    interval,\n    max,\n    keyGenerator: ctx => ctx.request.ip,\n    onLimitReached: ctx => {\n      log.http.concern(\n        dedent(`\n          Max create-a-room limit reached for ip: ${ctx.request.ip}\n            max: ${max}\n            interval: ${jstring(interval)}\n        `)\n      )\n    },\n    message: 'Too many rooms created from this IP',\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createApiRouter\n","//---------//\n// Imports //\n//---------//\n\nimport bodyparser from 'koa-bodyparser'\nimport KoaRouter from 'koa-router'\n\nimport api from 'server/api/couchdb'\nimport createWebsocketServer from '../websocket-server'\nimport { dashelize } from 'universal/utils'\n\n//\n//------//\n// Main //\n//------//\n\nconst createDebugRouter = currentFixtureName =>\n  createPostRevertToFixture(new KoaRouter(), dashelize(currentFixtureName))\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createPostRevertToFixture(...args) {\n  const [debugRouter, initialFixtureName] = args,\n    websocketServer = createWebsocketServer.debug()\n\n  return debugRouter.use(bodyparser()).post('/revert-to-fixture', ctx => {\n    const { fixtureName = initialFixtureName } = ctx.request.body\n\n    return api.revertToFixture(fixtureName).then(() => {\n      websocketServer.broadcast('reload page')\n\n      ctx.status = 200\n      ctx.body = { result: `fixture '${fixtureName}' successfully reverted` }\n    })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createDebugRouter\n","//---------//\n// Imports //\n//---------//\n\nimport KoaRouter from 'koa-router'\nimport log from 'server/log'\n\n//\n//------//\n// Main //\n//------//\n\nconst createPageRouter = getRenderer => {\n  const pageRouter = new KoaRouter()\n\n  return pageRouter.get('*', ctx => {\n    const { renderToString } = getRenderer(),\n      vueContext = { url: ctx.url }\n\n    return renderToString(vueContext)\n      .then(html => {\n        ctx.status = vueContext.httpStatusCode\n        ctx.body = html\n      })\n      .catch(error => {\n        log.server.error(\n          'unexpected error occurred during renderToString',\n          error\n        )\n\n        return Promise.reject(error)\n      })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createPageRouter\n","//---------//\n// Imports //\n//---------//\n\nimport ws from 'ws'\nimport log from 'server/log'\n\nimport { applyAt, forEach, keepWhen, passThrough } from 'fes'\nimport debug from 'project-root/config/debug'\n\n//\n//------//\n// Init //\n//------//\n\nconst { websocketPort } = debug\n\n//\n//------//\n// Main //\n//------//\n\nconst createWebsocketServer = () => {\n  const server = new ws.Server({ port: websocketPort.debug })\n\n  server.broadcast = data => {\n    const sendData = applyAt('send', [data, handleBroadcastError])\n\n    passThrough(server.clients, [keepWhen(isOpen), forEach(sendData)])\n  }\n\n  server.on('connection', ws => {\n    ws.on('error', handleConnectionError)\n  })\n\n  return server\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction handleBroadcastError(error) {\n  if (!error) return\n\n  log.server.error('Error occurred when attempting to broadcast', error)\n}\n\nfunction handleConnectionError(error) {\n  log.server.error('Error occurred with the connection to a client', error)\n}\n\nfunction isOpen(client) {\n  return client.readyState === ws.OPEN\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createWebsocketServer\n","//\n// TODO: implement connection limit\n// TODO: implement connection verification\n// TODO: validate playerHash & roomHash pair\n// TODO: implement heartbeat\n//   https://www.npmjs.com/package/ws#how-to-detect-and-close-broken-connections\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport ws from 'ws'\nimport log from 'server/log'\n\nimport { liveUpdateWebsocket } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\n// together these create a two-way map\nconst playerHashToClientSocket = {},\n  clientSocketToPlayerHash = new Map()\n\n//\n//------//\n// Main //\n//------//\n\nconst createWebsocketServer = () => {\n  const server = new ws.Server({ port: liveUpdateWebsocket.port })\n\n  server.on('connection', ws => {\n    ws.on('error', handleConnectionError)\n\n    ws.on('close', () => {\n      const playerHash = clientSocketToPlayerHash.get(ws)\n      clientSocketToPlayerHash.delete(ws)\n      delete playerHashToClientSocket[playerHash]\n    })\n\n    ws.on('message', messageData => {\n      const { id, data } = JSON.parse(messageData)\n\n      if (id === 'initial-connection') {\n        const { playerHash, _unused_roomHash } = data\n\n        playerHashToClientSocket[playerHash] = ws\n        clientSocketToPlayerHash.set(ws, playerHash)\n      }\n    })\n  })\n\n  return {\n    maybeUpdateClient,\n    server,\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction handleConnectionError(error) {\n  log.server.error('Error occurred in the liveUpdate websocket', error)\n}\n\nfunction maybeUpdateClient({ data, playerHash }) {\n  const clientSocket = playerHashToClientSocket[playerHash]\n\n  if (!clientSocket) return\n\n  clientSocket.send(JSON.stringify(data))\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createWebsocketServer\n","import debug from './debug'\nimport liveUpdate from './live-update'\n\nexport default {\n  debug,\n  liveUpdate,\n}\n","export default something => () => something\n","export default anObject => Object.assign({}, anObject)\n","export default (key, value) => aMap => {\n  aMap.set(key, value)\n  return aMap\n}\n","export default (key, value) => anObject => {\n  anObject[key] = value\n  return anObject\n}\n","export default (reducerFunction, result) => aMap => {\n  for (const [key, value] of aMap) {\n    result = reducerFunction(result, value, key, aMap)\n  }\n  return result\n}\n","export default (reducerFunction, start) => anObject => {\n  return Array.prototype.reduce.call(\n    Object.keys(anObject),\n    (result, key) => reducerFunction(result, anObject[key], key, anObject),\n    start\n  )\n}\n","export default aMapOrSet => aMapOrSet[Symbol.iterator]().next().value\n","export default str => str[0].toLowerCase() + str.slice(1)\n","export default functionArray => arg =>\n  functionArray.reduce((result, aFunction) => aFunction(result), arg)\n","import flow from './flow'\n\nexport default (arg, functionArray) => flow(functionArray)(arg)\n","export default possibleSubString => fullString =>\n  fullString.indexOf(possibleSubString) !== -1\n","export default numberOfLinesToGet => aString => {\n  const lines = ['']\n\n  let i = 0,\n    numLinesReached = false\n\n  while (!numLinesReached && i < aString.length) {\n    const currentCharacter = aString[i],\n      nextCharacter = aString[i + 1]\n\n    if (isNewline(currentCharacter, nextCharacter)) {\n      if (currentCharacter === '\\r') i += 1\n\n      numLinesReached = lines.length === numberOfLinesToGet\n      if (!numLinesReached) lines.push('')\n    } else lines[lines.length - 1] += aString[i]\n\n    i += 1\n  }\n\n  return {\n    lines,\n    moreLinesExist: numLinesReached,\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction isNewline(currentCharacter, nextCharacter) {\n  return (\n    currentCharacter === '\\n' ||\n    (currentCharacter === '\\r' && nextCharacter === '\\n')\n  )\n}\n","import { EOL } from 'os'\nimport getFirstNLines from './get-first-n-lines'\n\nexport default numberOfLines => aString => {\n  const { lines, moreLinesExist } = getFirstNLines(numberOfLines)(aString)\n  if (moreLinesExist) lines.push('...')\n\n  return lines.join(EOL)\n}\n","import contains from './contains_string'\nimport truncateToNLines from './truncate-to-n-lines'\n\nconst hasNewline = contains('\\n')\n\nexport default numberOfCharacters => aString => {\n  if (hasNewline(aString)) {\n    throw new Error(\n      \"You can't call 'truncate-to-n-chars' on a multi-line string\" +\n        `\\nstring passed: ${truncateToNLines(2)(aString)}`\n    )\n  }\n\n  if (aString.length > numberOfCharacters) {\n    aString = aString.slice(0, numberOfCharacters) + '...'\n  }\n\n  return aString\n}\n","//---------//\n// Imports //\n//---------//\n\nimport objectInspect from 'object-inspect'\nimport typeDetect from 'type-detect'\n\nimport first from './internal/first_map-or-set'\nimport firstCharacterToLowerCase from './internal/first-character-to-lower-case'\nimport passThrough from './internal/pass-through'\nimport truncateToNChars from './internal/truncate-to-n-chars'\n\n//\n//------//\n// Init //\n//------//\n\nconst typeToSpecialCase = getTypeToSpecialCase()\n\n//\n//------//\n// Main //\n//------//\n\nconst getType = something => {\n  const type = typeDetect(something)\n\n  return typeToSpecialCase[type] || firstCharacterToLowerCase(type)\n}\n\n//\n// used in 'can-combine_(map|set).js'\n//\n// there's no helpful way to display all the shared keys with maps and sets, so\n//   let's just display the first one\n//\nfunction getFirstSharedKeyString(duplicateKeys) {\n  return passThrough(duplicateKeys, [\n    first,\n    objectInspect,\n    truncateToNChars(20),\n  ])\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getTypeToSpecialCase() {\n  return {\n    HTMLCollection: 'htmlCollection'\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { getFirstSharedKeyString, getType }\n","//---------//\n// Imports //\n//---------//\n\nimport cloneDeep from 'clone-deep'\n\nimport cloneObject from './clone_object'\nimport mSet_map from './m-set_map'\nimport mSet_object from './m-set_object'\nimport reduce_map from './reduce_map'\nimport reduce_object from './reduce_object'\n\nimport { getType } from '../helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst assignOverRecursively = {\n  map: mapThatGetsAssignedOver => {\n    return reduce_map((result, newValue, key) => {\n      const existingValue = result.get(key)\n      return mSet_map(key, merge(existingValue, newValue))(result)\n    }, new Map(mapThatGetsAssignedOver))\n  },\n\n  object: objectThatGetsAssignedOver => {\n    return reduce_object((result, newValue, key) => {\n      const existingValue = result[key]\n      return mSet_object(key, merge(existingValue, newValue))(result)\n    }, cloneObject(objectThatGetsAssignedOver))\n  },\n}\n\n//\n// this has to be declared after `assignOverRecursively` because it utilizes\n//   that structure\n//\nconst typeToAssignRecursively = getTypeToAssignRecursively()\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction merge(existingValue, newValue) {\n  const existingValueType = getType(existingValue),\n    newValueType = getType(newValue)\n\n  const mergeFunction =\n    existingValueType === newValueType\n      ? typeToAssignRecursively[newValueType] || overwriteWithDeepClone\n      : overwriteWithDeepClone\n\n  return mergeFunction(existingValue)(newValue)\n}\n\nfunction overwriteWithDeepClone(_unusedExistingValue) {\n  return newValue => cloneDeep(newValue)\n}\n\nfunction cloneAndMergeSets(firstSet) {\n  return secondSet => {\n    const cloneOfFirstSet = cloneDeep(firstSet),\n      cloneOfSecondSet = cloneDeep(secondSet)\n\n    return new Set([...cloneOfFirstSet, ...cloneOfSecondSet])\n  }\n}\n\nfunction getTypeToAssignRecursively() {\n  return {\n    map: assignOverRecursively.map,\n    object: assignOverRecursively.object,\n    set: cloneAndMergeSets,\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default assignOverRecursively\n","export default mapThatGetsAssignedOver => primaryMap =>\n  new Map([...mapThatGetsAssignedOver, ...primaryMap])\n","export default objectThatGetsAssignedOver => primaryObject =>\n  Object.assign({}, objectThatGetsAssignedOver, primaryObject)\n","export default setThatGetsAssignedOver => primarySet =>\n  new Set([...setThatGetsAssignedOver, ...primarySet])\n","export default (reducerFunction, result) => aSet => {\n  for (const value of aSet) {\n    result = reducerFunction(result, value, value, aSet)\n  }\n  return result\n}\n","import reduce from './reduce_set'\n\nexport default set1 => set2 => {\n  return reduce((result, set1Value) => {\n    if (set2.has(set1Value)) result.add(set1Value)\n    return result\n  }, new Set())(set1)\n}\n","export default aMap => new Set(aMap.keys())\n","import keepIntersection from './keep-intersection_set'\nimport setOfKeys from './set-of-keys_map'\nimport { getFirstSharedKeyString } from '../helpers'\n\nexport default map1 => map2 => {\n  const setOfMap1Keys = setOfKeys(map1),\n    setOfMap2Keys = setOfKeys(map2),\n    duplicateKeys = keepIntersection(setOfMap1Keys)(setOfMap2Keys)\n\n  if (duplicateKeys.size) {\n    const firstSharedKeyString = getFirstSharedKeyString(duplicateKeys)\n\n    return new Error(\n      'Unable to combine the passed maps as they have at least one shared key' +\n        `first shared key found: ${firstSharedKeyString}`\n    )\n  }\n}\n","export default aSet => [...aSet]\n","export default aString => arrayLike =>\n  Array.prototype.join.call(arrayLike, aString)\n","export default numberOfElementsToKeep => arrayLike =>\n  Array.prototype.slice.call(arrayLike, 0, numberOfElementsToKeep)\n","export default eachFunction => arrayLike => {\n  for (let i = 0; i < arrayLike.length; i += 1) {\n    eachFunction(arrayLike[i], i, arrayLike)\n  }\n  return arrayLike\n}\n","import forEach from './for-each_array-like'\n\nexport default mapFunction => arrayLike => {\n  const result = new Array(arrayLike.length)\n\n  forEach((element, idx) => {\n    result[idx] = mapFunction(element, idx, arrayLike)\n  })(arrayLike)\n\n  return result\n}\n","//\n// README\n// - This file is not correct strictly speaking, as strings are both immutable\n//   and 'array-like'.  This is thus a convenience method for declaring\n//   array-like behavior for functions where mutability gives us speed gains\n//   and strings must be handled alongside\n//\n\nexport default value => arrayLike => {\n  if (typeof arrayLike === 'string') return arrayLike + value\n\n  Array.prototype.push.call(arrayLike, value)\n  return arrayLike\n}\n","export default anObject => new Set(Object.keys(anObject))\n","//---------//\n// Imports //\n//---------//\n\nimport getArrayOfValues from './get-array-of-values_set'\nimport join from './join_array-like'\nimport keepFirst from './keep-first_array-like'\nimport keepIntersection from './keep-intersection_set'\nimport map from './map_array-like'\nimport mAppend from './m-append_array-like'\nimport passThrough from './pass-through'\nimport setOfKeys from './set-of-keys_object'\nimport truncateToNChars from './truncate-to-n-chars'\n\n//\n//------//\n// Main //\n//------//\n\nexport default object1 => object2 => {\n  const setOfObject1Keys = setOfKeys(object1),\n    setOfObject2Keys = setOfKeys(object2),\n    duplicateKeys = keepIntersection(setOfObject1Keys)(setOfObject2Keys)\n\n  if (duplicateKeys.size) {\n    const [s, aKeyOrKeys] =\n        duplicateKeys.size === 1 ? ['', 'a key'] : ['s', 'keys'],\n      numberOfKeysToShow = 3,\n      numberOfKeysNotShown = duplicateKeys.size - numberOfKeysToShow,\n      sharedKeysString = passThrough(duplicateKeys, [\n        getArrayOfValues,\n        keepFirst(numberOfKeysToShow),\n        map(truncateToNChars(8)),\n        keys => {\n          return numberOfKeysNotShown > 0\n            ? mAppend(`...(${numberOfKeysNotShown} more)`)(keys)\n            : keys\n        },\n        join(', '),\n      ])\n\n    return new Error(\n      `Unable to combine the passed objects as they share ${aKeyOrKeys}` +\n        `\\nkey${s} shared: ${sharedKeysString}`\n    )\n  }\n}\n","import keepIntersection from './keep-intersection_set'\nimport { getFirstSharedKeyString } from '../helpers'\n\nexport default set1 => set2 => {\n  const duplicateKeys = keepIntersection(set1)(set2)\n\n  if (duplicateKeys.size) {\n    const firstSharedKeyString = getFirstSharedKeyString(duplicateKeys)\n\n    return new Error(\n      'Unable to combine the passed sets as they have at least one shared value' +\n        `first shared value found: ${firstSharedKeyString}`\n    )\n  }\n}\n","export default anArgumentsObject => returnArguments(...anArgumentsObject)\n\nfunction returnArguments() {\n  return arguments\n}\n","export default anArray => anArray.slice()\n","//\n// README\n//  - I can't think of a good name for this file.  This function's purpose is to\n//    take <something> which has own enumberable properties and copy them onto\n//    <cloned something>.  This allows us to copy own enumerable properties\n//    from/to e.g. a function\n//\n\nexport default (originalSomething, clonedSomething) => {\n  for (const key of Object.keys(originalSomething)) {\n    clonedSomething[key] = originalSomething[key]\n  }\n  return clonedSomething\n}\n","import copyOwnEnumerableProps from './copy-own-enumerable-props'\n\nexport default aDate => copyOwnEnumerableProps(aDate, new Date(aDate.getTime()))\n","export default ctor => () => new ctor()\n","export default ctor => arg => new ctor(arg)\n","export default setOfValuesToCheckFor => aSet => {\n  let allAreContained = true\n\n  for (const value of setOfValuesToCheckFor) {\n    allAreContained = aSet.has(value)\n    if (!allAreContained) break\n  }\n\n  return allAreContained\n}\n","import containsAll from './contains-all_set'\n\nexport default setOfElementsToCheckFor => inThisArrayLike =>\n  containsAll(setOfElementsToCheckFor)(new Set(inThisArrayLike))\n","import { getType } from '../helpers'\n\nconst typeToEmptyCollectionCreator = getTypeToEmptyCollectionCreator()\n\nexport default collection => typeToEmptyCollectionCreator[getType(collection)]()\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getTypeToEmptyCollectionCreator() {\n  return {\n    array: () => [],\n    float32Array: () => new Float32Array(),\n    float64Array: () => new Float64Array(),\n    int16Array: () => new Int16Array(),\n    int32Array: () => new Int32Array(),\n    int8Array: () => new Int8Array(),\n    map: () => new Map(),\n    object: () => ({}),\n    set: () => new Set(),\n    string: () => '',\n    uint16Array: () => new Uint16Array(),\n    uint32Array: () => new Uint32Array(),\n    uint8Array: () => new Uint8Array(),\n    uint8ClampedArray: () => new Uint8ClampedArray(),\n  }\n}\n","import reduce from './reduce_set'\n\nexport default setOfValuesToRemove => fromASet =>\n  reduce((result, value) => {\n    if (!setOfValuesToRemove.has(value)) result.add(value)\n    return result\n  }, new Set())(fromASet)\n","export default idxToRemove => arrayLike =>\n  Array.prototype.concat.call(\n    Array.prototype.slice.call(arrayLike, 0, idxToRemove),\n    Array.prototype.slice.call(arrayLike, idxToRemove + 1)\n  )\n","export default numberOfElementsToDiscard => arrayLike =>\n  Array.prototype.slice.call(arrayLike, numberOfElementsToDiscard)\n","export default numberOfCharactersToDiscard => aString =>\n  String.prototype.slice.call(aString, numberOfCharactersToDiscard)\n","export default numberOfElementsToDiscard => arrayLike =>\n  Array.prototype.slice.call(arrayLike, 0, -numberOfElementsToDiscard)\n","export default shouldDiscard => arrayLike => {\n  const result = []\n  Array.prototype.forEach.call(arrayLike, (value, index) => {\n    if (!shouldDiscard(value, index, arrayLike)) result.push(value)\n  })\n  return result\n}\n","import reduce from './reduce_object'\n\nexport default predicate =>\n  reduce((result, value, key, anObject) => {\n    if (predicate(value, key, anObject)) result[key] = value\n\n    return result\n  }, {})\n","export default predicate => anArrayLike => {\n  for (let i = 0; i < anArrayLike.length; i += 1) {\n    const value = anArrayLike[i]\n    if (predicate(value, i, anArrayLike)) return value\n  }\n}\n","export default anArrayLike => anArrayLike[0]\n","export default aFunction => (first, second) => aFunction(second, first)\n","export default anObject => Object.keys(anObject).length\n","export default key => anObject => anObject[key]\n","export default anObject => key => anObject[key]\n","export default key => anObject => anObject[key] !== undefined || key in anObject\n","export default key => something =>\n  something != null &&\n  typeof something === 'object' &&\n  new Set(Object.keys(something)).has(key)\n","export default aFunction => aFunction()\n","export default something => something.length === 0\n","export default something => something.size === 0\n","export default anObject => Object.keys(anObject).length === 0\n","export default predicate => (...args) => !predicate(...args)\n","import isEmpty from './is-empty_has-length'\nimport negate from './negate'\nexport default negate(isEmpty)\n","import isEmpty from './is-empty_has-size'\nimport negate from './negate'\nexport default negate(isEmpty)\n","import isEmpty from './is-empty_object'\nimport negate from './negate'\nexport default negate(isEmpty)\n","export default something => !!something\n","export default aString => aSet => {\n  if (!aSet.size) return ''\n\n  const iterator = aSet.values()\n  let { value } = iterator.next(),\n    result = `${value}`\n\n  for (value of iterator) {\n    result += `${aString}${value}`\n  }\n\n  return result\n}\n","export default something => {\n  const replacer = createReplacer()\n\n  return '' + JSON.stringify(something, replacer, 2)\n}\n\nfunction createReplacer() {\n  //\n  // I'm choosing to use 'replacer' because I don't like 'utils.inspect'.\n  //   To solve the problem of circular json structures, I'm just keeping track\n  //   of all objects added.  I think I actually prefer this because it provides\n  //   both a more concise and acurate structure of the data.\n  //\n  const duplicateObjects = new Map()\n\n  return (key, value) => {\n    if (value && typeof value === 'object') {\n      if (duplicateObjects.has(value)) {\n        return `<duplicate of '${duplicateObjects.get(value)}'>`\n      } else {\n        duplicateObjects.set(value, key)\n        return value\n      }\n    }\n    return typeof value === 'function' ? '<function>' : value\n  }\n}\n","export default numberOfCharactersToKeep => aString =>\n  String.prototype.slice.call(aString, 0, numberOfCharactersToKeep)\n","import reduce from './reduce_set'\n\nexport default array1 => array2 => {\n  const setOfArray1Values = new Set(array1),\n    setOfArray2Values = new Set(array2)\n\n  return reduce((result, array1value) => {\n    if (setOfArray2Values.has(array1value)) result.push(array1value)\n    return result\n  }, [])(setOfArray1Values)\n}\n","export default filterFunction => arrayLike =>\n  Array.prototype.filter.call(arrayLike, filterFunction)\n","export default arrayLike => Array.prototype.slice.call(arrayLike, -1)\n","export default mapThatGetsAssignedInto => primaryMap => {\n  for (const [key, value] of primaryMap) {\n    mapThatGetsAssignedInto.set(key, value)\n  }\n  return mapThatGetsAssignedInto\n}\n","export default objectThatGetsAssignedInto => primaryObject =>\n  Object.assign(objectThatGetsAssignedInto, primaryObject)\n","export default setThatGetsAssignedInto => primarySet => {\n  for (const value of primarySet) {\n    setThatGetsAssignedInto.add(value)\n  }\n  return setThatGetsAssignedInto\n}\n","import forEach from './for-each_array-like'\n\nexport default mapFunction => arrayLike => {\n  forEach((element, idx) => {\n    arrayLike[idx] = mapFunction(element, idx, arrayLike)\n  })(arrayLike)\n\n  return arrayLike\n}\n","import reduce from './reduce_object'\n\nexport default mapFunction => object => {\n  return reduce((result, value, key) => {\n    result[key] = mapFunction(value, key, object)\n    return result\n  }, object)(object)\n}\n","import hasKey from './has-key_object'\nimport reduce from './reduce_object'\n\nexport default transforms => anObject => {\n  return reduce((result, aTransform, key) => {\n    if (hasKey(key)(anObject))\n      result[key] = aTransform(anObject[key], key, anObject)\n    return result\n  }, anObject)(transforms)\n}\n","import forEach from './for-each_array-like'\n\nexport default mapFunction => object => {\n  const result = {}\n\n  forEach(key => {\n    result[key] = mapFunction(object[key], key, object)\n  })(Object.keys(object))\n\n  return result\n}\n","export default () => {}\n","export default (reducerFunction, start) => arrayLike =>\n  Array.prototype.reduce.call(arrayLike, reducerFunction, start)\n","//\n// implementation thanks to Jon Schlinkert\n//\n/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nexport default numberOfTimes => stringToRepeat => {\n  // cover common, quick use cases\n  if (numberOfTimes === 1) return stringToRepeat\n  if (numberOfTimes === 2) return stringToRepeat + stringToRepeat\n\n  const max = stringToRepeat.length * numberOfTimes\n  let result = ''\n\n  while (max > result.length && numberOfTimes > 1) {\n    if (numberOfTimes & 1) {\n      result += stringToRepeat\n    }\n\n    numberOfTimes >>= 1\n    stringToRepeat += stringToRepeat\n  }\n\n  result += stringToRepeat\n  result = result.substr(0, max)\n\n  return result\n}\n","export default firstArgument => firstArgument\n","export default val1 => val2 => val1 === val2\n","import reduce from './reduce_object'\n\nexport default transforms => anObject => {\n  return reduce((result, value, key) => {\n    const aTransform = transforms[key]\n    result[key] = aTransform ? aTransform(value, key, anObject) : value\n    return result\n  }, {})(anObject)\n}\n","export { default as alwaysReturn } from './always-return'\nexport { default as assignOverRecursively } from './assign-over-recursively'\nexport { default as assignOver_map } from './assign-over_map'\nexport { default as assignOver_object } from './assign-over_object'\nexport { default as assignOver_set } from './assign-over_set'\nexport { default as canCombine_map } from './can-combine_map'\nexport { default as canCombine_object } from './can-combine_object'\nexport { default as canCombine_set } from './can-combine_set'\nexport { default as clone_arguments } from './clone_arguments'\nexport { default as clone_array } from './clone_array'\nexport { default as clone_date } from './clone_date'\nexport { default as clone_object } from './clone_object'\nexport { default as construct_0arg } from './construct_0arg'\nexport { default as construct_1arg } from './construct_1arg'\nexport { default as containsAll_arrayLike } from './contains-all_array-like'\nexport { default as containsAll_set } from './contains-all_set'\nexport { default as contains_string } from './contains_string'\nexport { default as copyOwnEnumerableProps } from './copy-own-enumerable-props'\nexport {\n  default as createEmptyCollectionFromInstance,\n} from './create-empty-collection-from-instance'\nexport { default as discardAll_set } from './discard-all_set'\nexport { default as discardAt_arrayLike } from './discard-at_array-like'\nexport { default as discardFirst_arrayLike } from './discard-first_array-like'\nexport { default as discardFirst_string } from './discard-first_string'\nexport { default as discardLast_arrayLike } from './discard-last_array-like'\nexport { default as discardWhen_arrayLike } from './discard-when_array-like'\nexport { default as filter_object } from './filter_object'\nexport {\n  default as findFirstWhen_arrayLike,\n} from './find-first-when_array-like'\nexport {\n  default as firstCharacterToLowerCase,\n} from './first-character-to-lower-case'\nexport { default as first_arrayLike } from './first_array-like'\nexport { default as first_mapOrSet } from './first_map-or-set'\nexport { default as flip } from './flip'\nexport { default as flow } from './flow'\nexport { default as forEach_arrayLike } from './for-each_array-like'\nexport { default as getArrayOfValues_set } from './get-array-of-values_set'\nexport { default as getCount_object } from './get-count_object'\nexport { default as getFirstNLines } from './get-first-n-lines'\nexport { default as getValueAt_object } from './get-value-at_object'\nexport { default as getValueFrom_object } from './get-value-from_object'\nexport { default as hasKey_object } from './has-key_object'\nexport { default as hasOwnEnumerableKey } from './has-own-enumerable-key'\nexport { default as invoke } from './invoke'\nexport { default as isEmpty_hasLength } from './is-empty_has-length'\nexport { default as isEmpty_hasSize } from './is-empty_has-size'\nexport { default as isEmpty_object } from './is-empty_object'\nexport { default as isLaden_hasLength } from './is-laden_has-length'\nexport { default as isLaden_hasSize } from './is-laden_has-size'\nexport { default as isLaden_object } from './is-laden_object'\nexport { default as isTruthy } from './is-truthy'\nexport { default as join_arrayLike } from './join_array-like'\nexport { default as join_set } from './join_set'\nexport { default as jstring } from './jstring'\nexport { default as keepFirst_arrayLike } from './keep-first_array-like'\nexport { default as keepFirst_string } from './keep-first_string'\nexport { default as keepIntersection_array } from './keep-intersection_array'\nexport { default as keepIntersection_set } from './keep-intersection_set'\nexport { default as keepWhen_arrayLike } from './keep-when_array-like'\nexport { default as last_arrayLike } from './last_array-like'\nexport { default as mAppend_arrayLike } from './m-append_array-like'\nexport { default as mAssignOver_map } from './m-assign-over_map'\nexport { default as mAssignOver_object } from './m-assign-over_object'\nexport { default as mAssignOver_set } from './m-assign-over_set'\nexport { default as mMap_arrayLike } from './m-map_array-like'\nexport { default as mMap_object } from './m-map_object'\nexport { default as mSet_map } from './m-set_map'\nexport { default as mSet_object } from './m-set_object'\nexport { default as mTransformProperties } from './m-transform-properties'\nexport { default as map_arrayLike } from './map_array-like'\nexport { default as map_object } from './map_object'\nexport { default as negate } from './negate'\nexport { default as noop } from './noop'\nexport { default as passThrough } from './pass-through'\nexport { default as reduce_arrayLike } from './reduce_array-like'\nexport { default as reduce_map } from './reduce_map'\nexport { default as reduce_object } from './reduce_object'\nexport { default as reduce_set } from './reduce_set'\nexport { default as repeat_string } from './repeat_string'\nexport { default as returnFirstArgument } from './return-first-argument'\nexport { default as setOfKeys_map } from './set-of-keys_map'\nexport { default as setOfKeys_object } from './set-of-keys_object'\nexport { default as strictlyEquals } from './strictly-equals'\nexport {\n  default as transformProperties_object,\n} from './transform-properties_object'\nexport { default as truncateToNChars } from './truncate-to-n-chars'\nexport { default as truncateToNLines } from './truncate-to-n-lines'\n","//---------//\n// Imports //\n//---------//\n\nimport jstring from '../../internal/jstring'\nimport findFirstWhen from '../../internal/find-first-when_array-like'\nimport first from '../../internal/first_array-like'\nimport flow from '../../internal/flow'\nimport getValueAt from '../../internal/get-value-at_object'\nimport passThrough from '../../internal/pass-through'\nimport truncateToNLines from '../../internal/truncate-to-n-lines'\n\n//\n//------//\n// Main //\n//------//\n\nconst findFirstValueWithTruthyKey = flow([findFirstWhen(first), getValueAt(1)])\n\nconst formatGivenArgument = ({ anArg, argIdx }) => {\n  const argToString = passThrough(anArg, [jstring, truncateToNLines(3)])\n\n  return `Argument ${argIdx} given: ${argToString}`\n}\n\nconst setIfNotDefined = (obj, key, val) => {\n  if (obj[key] === undefined) obj[key] = val\n  return obj\n}\n\nconst throwOrReject = (error, isAsynchronous) => {\n  if (isAsynchronous) return Promise.reject(error)\n  else throw error\n}\n\nconst setOfTypedArrays = getSetOfTypedArrays()\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getSetOfTypedArrays() {\n  return new Set([\n    'float32Array',\n    'float64Array',\n    'int16Array',\n    'int32Array',\n    'int8Array',\n    'uint16Array',\n    'uint32Array',\n    'uint8Array',\n    'uint8ClampedArray',\n  ])\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport {\n  findFirstValueWithTruthyKey,\n  formatGivenArgument,\n  setIfNotDefined,\n  setOfTypedArrays,\n  throwOrReject,\n}\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport {\n  containsAll_set as containsAll,\n  discardAll_set as discardAll,\n  flow,\n  join_arrayLike as join,\n  join_set,\n  jstring,\n  map_arrayLike as map,\n  mMap_arrayLike as mMap,\n  passThrough,\n  truncateToNLines,\n} from '../../internal'\n\nimport { getType } from '../../helpers'\nimport { formatGivenArgument, setOfTypedArrays } from './helpers'\n\n//\n//------//\n// Init //\n//------//\n\nconst truncateDataArg = flow([jstring, truncateToNLines(3)])\n\n//\n//------//\n// Main //\n//------//\n\nexport default function approveDataArgument(\n  args,\n  authorDefinedApproveArguments,\n  definition,\n  specialCaseProperties = {}\n) {\n  const { takesAnyDataType } = specialCaseProperties,\n    {\n      name,\n      isArrayOfData,\n      shouldThrowOnExtraDataArguments,\n      typeToDataDependentProps,\n      typeToFunction,\n    } = definition\n\n  // it's not possible for args.length === 0 here\n  if (args.length !== 1 && shouldThrowOnExtraDataArguments) {\n    const truncatedArgs = passThrough(args, [\n      map((anArg, argIdx) => ({ anArg, argIdx })),\n      mMap(formatGivenArgument),\n    ])\n\n    return new Error(\n      dedent(`\n        You passed more than a single data argument to '${name}'\n        Number of arguments passed: ${args.length}\n\n        ${join('\\n\\n')(truncatedArgs)}\n      `)\n    )\n  }\n\n  const dataArg = args[0]\n\n  if (isArrayOfData) {\n    const dataType = getType(dataArg)\n    if (dataType !== 'array') {\n      return new Error(\n        dedent(`\n          The function '${name}' was passed a data argument type of\n            '${dataType}' but requires an array\n\n          Data argument passed: ${truncateDataArg(dataArg)}\n        `)\n      )\n    }\n  } else if (!takesAnyDataType) {\n    const dataTypes = Object.keys(typeToFunction || typeToDataDependentProps),\n      setOfValidDataTypes = new Set(dataTypes),\n      dataType = getType(dataArg)\n\n    if (!setOfValidDataTypes.has(dataType)) {\n      const validDataTypesString = passThrough(setOfValidDataTypes, [\n        consolidateTypedArrays,\n        join_set(', '),\n      ])\n      return new Error(\n        dedent(`\n          The function '${name}' was passed a data argument type\n            of '${dataType}'\n\n          Allowed types: ${validDataTypesString}\n\n          Data argument passed: ${truncateDataArg(dataArg)}\n        `)\n      )\n    }\n  }\n\n  // might also be a function or undefined\n  const maybeError = authorDefinedApproveArguments(dataArg)\n  if (getType(maybeError) === 'error') return maybeError\n}\n\nfunction consolidateTypedArrays(setOfValidDataTypes) {\n  let result = setOfValidDataTypes\n  if (containsAll(setOfTypedArrays)(setOfValidDataTypes)) {\n    result = discardAll(setOfTypedArrays)(setOfValidDataTypes)\n    result.add('any typed array e.g. int8Array or float32Array')\n  }\n\n  return result\n}\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  first_mapOrSet as first,\n  join_arrayLike,\n  join_set,\n  jstring,\n  keepFirst_arrayLike as keepFirst,\n  keepWhen_arrayLike as keepWhen,\n  map_arrayLike as map,\n  passThrough,\n  reduce_arrayLike as reduce,\n} from '../../internal'\n\nimport { formatGivenArgument } from './helpers'\nimport { getType } from '../../helpers'\n\n//\n//------//\n// Main //\n//------//\n\n//\n// TODO: separate this method in two.  One for argumentTypes and one\n//   for serviceArgumentTypes\n//\nconst approveTypes = arg => {\n  const {\n      args,\n      expectedArgumentTypes,\n      expectedServiceArgumentTypes,\n      name,\n    } = arg,\n    allExpectedTypes = expectedArgumentTypes || expectedServiceArgumentTypes\n\n  // sanity check\n  validateArg(arg)\n\n  const areServiceArguments = !!expectedServiceArgumentTypes,\n    str = {\n      arguments: areServiceArguments ? 'service arguments' : 'arguments',\n    },\n    functionChain = [\n      keepWhen(argumentIsWrongType),\n      map(toInvalidTypeError),\n      reduce(toAllIndecesAndMessages, { indices: [], messages: [] }),\n      toInvalidTypeErrorMessage,\n    ]\n\n  if (areServiceArguments) {\n    functionChain.unshift(keepFirst(expectedServiceArgumentTypes.length))\n  }\n\n  return passThrough(args, functionChain)\n\n  // scoped helper functions\n\n  function toInvalidTypeErrorMessage({ indices, messages }) {\n    if (!indices.length) return\n\n    const truncatedArgs = passThrough(indices, [\n        map(argIdx => ({ anArg: args[argIdx], argIdx })),\n        map(formatGivenArgument),\n      ]),\n      firstLine =\n        `'${name}' was passed one or more ${str.arguments} with` +\n        ' incorrect types'\n\n    return (\n      firstLine +\n      `\\n${join_arrayLike('\\n\\n')(messages)}` +\n      `\\n\\n${join_arrayLike('\\n\\n')(truncatedArgs)}`\n    )\n  }\n\n  function toInvalidTypeError(anArg, idx) {\n    const actualType = getType(anArg),\n      setOfExpectedTypes = allExpectedTypes[idx],\n      initialMessage = `Argument ${idx} has type ${actualType} but was supposed to have `,\n      restOfMessage =\n        setOfExpectedTypes.size > 1\n          ? `one of the following types: ${join_set(', ')(setOfExpectedTypes)}`\n          : `the type ${first(setOfExpectedTypes)}`,\n      message = initialMessage + restOfMessage\n\n    return { idx, message }\n  }\n\n  function argumentIsWrongType(anArg, idx) {\n    const setOfExpectedTypes = allExpectedTypes[idx]\n    if (setOfExpectedTypes.has('any')) return false\n\n    const actualType = getType(anArg)\n\n    return !setOfExpectedTypes.has(actualType)\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction toAllIndecesAndMessages(result, { idx, message }) {\n  const { indices, messages } = result\n\n  indices.push(idx)\n  messages.push(message)\n\n  return result\n}\n\nfunction validateArg(arg) {\n  const { expectedArgumentTypes, expectedServiceArgumentTypes } = arg\n\n  if (expectedArgumentTypes === expectedServiceArgumentTypes) {\n    throw new Error(\n      'This function requires either a property expectedArgumentTypes or' +\n        ' expectedServiceArgumentTypes' +\n        `\\n\\nArgument passed: ${jstring(arg)}`\n    )\n  } else if (!expectedArgumentTypes && !expectedServiceArgumentTypes) {\n    throw new Error(\n      'This function requires either a property expectedArgumentTypes OR' +\n        ' expectedServiceArgumentTypes, not both' +\n        `\\n\\nArgument passed: ${jstring(arg)}`\n    )\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default approveTypes\n","//---------//\n// Imports //\n//---------//\n\nimport approveTypes from './approve-types'\n\nimport { formatGivenArgument } from './helpers'\nimport { getType } from '../../helpers'\nimport {\n  join_arrayLike as join,\n  map_arrayLike as map,\n  mMap_arrayLike as mMap,\n  passThrough,\n} from '../../internal'\n\n//\n//------//\n// Main //\n//------//\n\n//\n// expectedServiceArgumentTypes is not extracted from definition because it's\n//   also used in `create-type-to-data-utility` which must first determine the\n//   data argument type before passing\n//   `typeToDataDependentProps[data argument type].expectedServiceArgumentTypes`\n//\nconst common = (\n  args,\n  authorDefinedApproveArguments,\n  definition,\n  expectedServiceArgumentTypes\n) => {\n  const { name, shouldThrowOnExtraServiceArguments } = definition,\n    numberOfServiceArguments = expectedServiceArgumentTypes.length\n\n  if (\n    (args.length !== numberOfServiceArguments &&\n      shouldThrowOnExtraServiceArguments) ||\n    (args.length < numberOfServiceArguments &&\n      !shouldThrowOnExtraServiceArguments)\n  ) {\n    const truncatedArgs = passThrough(args, [\n      map((anArg, argIdx) => ({ anArg, argIdx })),\n      mMap(formatGivenArgument),\n    ])\n\n    return new Error(\n      `The function '${name}' requires ${numberOfServiceArguments} service` +\n        ` arguments.   You passed ${args.length}.` +\n        `\\n\\n${join('\\n\\n')(truncatedArgs)}`\n    )\n  }\n\n  const errorMessage = approveTypes({\n    args,\n    expectedServiceArgumentTypes,\n    name,\n  })\n  if (errorMessage) return new Error(errorMessage)\n\n  // might also be a function or undefined\n  const maybeError = authorDefinedApproveArguments(...args)\n  if (getType(maybeError) === 'Error') return maybeError\n}\n\nconst dataDependent = common,\n  independent = (args, authorDefinedApproveArguments, definition) =>\n    common(\n      args,\n      authorDefinedApproveArguments,\n      definition,\n      definition.expectedServiceArgumentTypes\n    )\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { dataDependent, independent }\n","import { map_arrayLike as map } from '../../../internal'\n\nexport default function normalizeExpectedArgumentTypes(expectedArgumentTypes) {\n  return map(oneOrManyTypes => {\n    oneOrManyTypes = Array.isArray(oneOrManyTypes)\n      ? oneOrManyTypes\n      : [oneOrManyTypes]\n\n    return new Set(oneOrManyTypes)\n  })(expectedArgumentTypes)\n}\n","import normalizeExpectedArgumentTypes from './expected-argument-types'\nimport transformProperties from '../../../internal/transform-properties_object'\n\nconst normalizeHasNoDataArgument = props => {\n  return transformProperties({\n    expectedArgumentTypes: normalizeExpectedArgumentTypes,\n  })(props)\n}\n\nexport default normalizeHasNoDataArgument\n","//\n// TODO: move this file to a higher scope as other files utilize it\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport clone from '../../../internal/clone_object'\nimport reduce from '../../../internal/reduce_set'\n\nimport { setIfNotDefined, setOfTypedArrays } from '../helpers'\n\n//\n//------//\n// Init //\n//------//\n\nconst { assign } = Object\n\n//\n//------//\n// Main //\n//------//\n\nexport default function normalizeTypeToFunction(typeToFunction) {\n  const { arrayLike, mapOrSet, object } = typeToFunction\n  let normalized = clone(typeToFunction)\n\n  if (arrayLike) {\n    normalized = assign(\n      {\n        allArrays: arrayLike,\n        arguments: arrayLike,\n        string: arrayLike,\n        htmlCollection: arrayLike,\n      },\n      normalized\n    )\n\n    delete normalized.arrayLike\n  }\n\n  if (mapOrSet) {\n    assign(normalized, {\n      map: mapOrSet,\n      set: mapOrSet,\n    })\n\n    delete normalized.mapOrSet\n  }\n\n  // this must happen before the 'untypedArray' check, because otherwise typed\n  //   arrays will be added when they shouldn't be\n  normalizeArrays(normalized)\n\n  if (!normalized.function && object) {\n    normalized.function = object\n  }\n  if (!normalized.error && object) {\n    normalized.error = object\n  }\n\n  return normalized\n}\n\nfunction normalizeArrays(normalized) {\n  if (!normalized.allArrays && !normalized.typedArray) return normalized\n  if (normalized.allArrays && normalized.typedArray) {\n    throw new Error(\n      'You cannot declare allArrays and typedArray' +\n        `\\nutility name: ${normalized.name}`\n    )\n  }\n\n  let arrayFunction\n  if (normalized.allArrays) {\n    arrayFunction = normalized.array = normalized.allArrays\n    delete normalized.allArrays\n  } else {\n    arrayFunction = normalized.typedArray\n    delete normalized.typedArray\n  }\n\n  return reduce(\n    (result, aTypedArray) =>\n      setIfNotDefined(result, aTypedArray, arrayFunction),\n    normalized\n  )(setOfTypedArrays)\n}\n","//---------//\n// Imports //\n//---------//\n\nimport normalizeExpectedArgumentTypes from './expected-argument-types'\nimport normalizeTypeToFunction from './type-to-function'\n\nimport {\n  flow,\n  map_object as map,\n  transformProperties_object as transformProperties,\n} from '../../../internal'\n\n//\n//------//\n// Main //\n//------//\n\nexport default flow([\n  map(\n    transformProperties({\n      expectedServiceArgumentTypes: normalizeExpectedArgumentTypes,\n    })\n  ),\n  normalizeTypeToFunction,\n])\n","//---------//\n// Imports //\n//---------//\n\nimport normalizeExpectedArgumentTypes from './expected-argument-types'\nimport normalizeHasNoDataArgument from './has-no-data-argument'\nimport normalizeTypeToDataDependentProps from './type-to-data-dependent-props'\nimport normalizeTypeToFunction from './type-to-function'\nimport assignOverRecursively from '../../../internal/assign-over-recursively'\nimport identity from '../../../internal/return-first-argument'\nimport noop from '../../../internal/noop'\nimport transformProperties from '../../../internal/transform-properties_object'\n\nimport { setIfNotDefined } from '../helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst normalizeDefinition = definition => {\n  const { mergeDefinitionWith } = definition\n\n  if (mergeDefinitionWith) {\n    definition = recursivelyMergeDefinition(definition, mergeDefinitionWith)\n  }\n\n  const {\n    flippedFrom,\n    hasNoDataArgument,\n    name,\n    expectedServiceArgumentTypes = [],\n    transformResult = identity,\n    approveArguments = () => noop,\n  } = definition\n\n  Object.assign(definition, {\n    approveArguments,\n    transformResult,\n    hasDataArgument: !hasNoDataArgument,\n    hasServiceArguments: expectedServiceArgumentTypes.length !== 0,\n  })\n\n  if (definition.hasDataArgument) {\n    setIfNotDefined(definition, 'shouldThrowOnExtraDataArguments', true)\n  } else {\n    delete definition.transformResult\n  }\n\n  if (definition.hasServiceArguments) {\n    setIfNotDefined(definition, 'shouldThrowOnExtraServiceArguments', true)\n  }\n\n  if (flippedFrom) {\n    Object.assign(definition, flippedFrom, { name })\n    if (definition.isDataFirst) {\n      throw new Error(\n        \"Don't flip utilities which are already data-first.  For sake of\" +\n          ' simplicity we should only be flipping data-last utilities'\n      )\n    }\n    if (!definition.hasDataArgument) {\n      throw new Error(\n        'You must flip a utility which has a data argument.  Flipping means' +\n          ' you flip the service and data arguments around e.g. ' +\n          ' `getValueAt(key)(object)` vs `getValueFrom(object)(key)`'\n      )\n    }\n\n    definition.isFlipped = true\n    definition.isDataFirst = true\n    delete definition.flippedFrom\n  }\n\n  return transformProperties({\n    expectedServiceArgumentTypes: normalizeExpectedArgumentTypes,\n    hasNoDataArgument: normalizeHasNoDataArgument,\n    typeToDataDependentProps: normalizeTypeToDataDependentProps,\n    typeToFunction: normalizeTypeToFunction,\n  })(definition)\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction recursivelyMergeDefinition(definition, definitionToMergeWith) {\n  delete definition.mergeDefinitionWith\n  definition = assignOverRecursively.object(definitionToMergeWith)(definition)\n\n  return definition.mergeDefinitionWith\n    ? recursivelyMergeDefinition(definition, definition.mergeDefinitionWith)\n    : definition\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default normalizeDefinition\n","export default anObject => Object.keys(anObject)[0]\n","//\n// TODO: reorganize special-case consumption of approveDataArgument to better\n//   handle isArrayOfData (below we pass 'noop' which should be avoidable).\n//\n// TODO: figure out sane way to implement\n//   alongside 'create-data-dependent-utility'\n//\n// TODO: handle service arguments\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport approveDataArgument from './approve-data-argument'\nimport discardWhen from '../../internal/discard-when_array-like'\nimport firstKey from '../../internal/first-key_object'\nimport flow from '../../internal/flow'\nimport hasOwnEnumerableKey from '../../internal/has-own-enumerable-key'\nimport isLaden from '../../internal/is-laden_has-length'\nimport jstring from '../../internal/jstring'\nimport mSet from '../../internal/m-set_object'\nimport noop from '../../internal/noop'\nimport passThrough from '../../internal/pass-through'\nimport reduce from '../../internal/reduce_object'\nimport strictlyEquals from '../../internal/strictly-equals'\nimport truncateToNLines from '../../internal/truncate-to-n-lines'\n\nimport { getType } from '../../helpers'\nimport { throwOrReject } from './helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst createArrayOfDataUtility = definition => {\n  const {\n      approveArguments: authorDefinedApproveArguments,\n      isAsynchronous,\n      name,\n      transformResult,\n      typeToFunction,\n    } = definition,\n    throwIfCalledDirectly = createThrowIfCalledDirectly(definition)\n\n  return reduce(toTypeSpecificUtility, throwIfCalledDirectly)(typeToFunction)\n\n  // scoped helper functinos\n\n  function toTypeSpecificUtility(pluralTypeToFunction, theFunction, dataType) {\n    return mSet(dataType + 's', typedUtility)(pluralTypeToFunction)\n\n    function typedUtility(...dataArgs) {\n      let error =\n        approveDataArgument(dataArgs, noop, definition) ||\n        approveElementTypes(name, dataArgs, dataType)\n      if (error) throwOrReject(error, isAsynchronous)\n\n      error = authorDefinedApproveArguments(dataArgs[0])\n      if (getType(error) === 'error') throwOrReject(error, isAsynchronous)\n\n      // phew no errors.  Onward!\n\n      const validDataArg = dataArgs[0]\n      return transformResult(theFunction(validDataArg))\n    }\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createThrowIfCalledDirectly(definition) {\n  const { isAsynchronous, name, typeToFunction } = definition\n\n  return function throwIfCalledDirectly(arg) {\n    const example = `${name}.${firstKey(typeToFunction)}s(...)`,\n      expectedType = getType(arg) === 'array' ? getType(arg[0]) : null,\n      hint = hasOwnEnumerableKey(expectedType)(typeToFunction)\n        ? `Hint: you probably meant to call ${name}.${expectedType}s(...)\\n`\n        : ''\n\n    const error = new Error(\n      dedent(`\n        ${name} requires you specify the type such as ${example}.\n\n        Without specifying the type, fes can't return a reasonable value in the\n        case of an empty list.\n\n        ${hint}\n      `)\n    )\n\n    return throwOrReject(error, isAsynchronous)\n  }\n}\n\nfunction approveElementTypes(name, dataArgs, dataType) {\n  const arrayOfData = dataArgs[0],\n    invalidElements = discardWhen(flow([getType, strictlyEquals(dataType)]))(\n      arrayOfData\n    )\n\n  if (isLaden(invalidElements)) {\n    const firstInvalidElement = invalidElements[0],\n      firstInvalidElementString = passThrough(firstInvalidElement, [\n        jstring,\n        truncateToNLines(3),\n      ])\n    return new Error(\n      `The function '${name}.${dataType}s' was passed at least one element of an incorrect type` +\n        `\\nfirst invalid element type: ${getType(firstInvalidElement)}` +\n        `\\nfirst invalid element: ${firstInvalidElementString}`\n    )\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createArrayOfDataUtility\n","//---------//\n// Imports //\n//---------//\n\nimport approveTypes from './approve-types'\nimport identity from '../../internal/return-first-argument'\nimport join from '../../internal/join_array-like'\nimport map from '../../internal/map_array-like'\nimport mMap from '../../internal/m-map_array-like'\nimport passThrough from '../../internal/pass-through'\n\nimport { formatGivenArgument, throwOrReject } from './helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst createNoDataArgumentUtility = definition => {\n  const { hasNoDataArgument, isAsynchronous, name } = definition,\n    {\n      expectedArgumentTypes,\n      shouldThrowOnExtraArguments = true,\n      theFunction,\n      transformResult = identity,\n    } = hasNoDataArgument\n\n  return (...args) => {\n    const error = approveArguments(args)\n\n    if (error) return throwOrReject(error, isAsynchronous)\n\n    // no errors, we good fam\n\n    return transformResult(theFunction(...args))\n  }\n\n  // scoped helper functions\n\n  function approveArguments(args) {\n    const numberOfExpectedArguments = Object.keys(expectedArgumentTypes).length\n\n    if (\n      args.length < numberOfExpectedArguments ||\n      (shouldThrowOnExtraArguments && args.length > numberOfExpectedArguments)\n    ) {\n      const truncatedArgs = passThrough(args, [\n        map((anArg, argIdx) => ({ anArg, argIdx })),\n        mMap(formatGivenArgument),\n      ])\n\n      return new Error(\n        `The function '${name}' requires ${numberOfExpectedArguments}` +\n          ` arguments.   You passed ${args.length}.` +\n          `\\n\\n${join('\\n\\n')(truncatedArgs)}`\n      )\n    }\n\n    const errorMessage = approveTypes({\n      args,\n      expectedArgumentTypes,\n      name,\n    })\n    if (errorMessage) return new Error(errorMessage)\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createNoDataArgumentUtility\n","//\n// README\n// - I can not think of a better name for this file.  Of course most of the\n//   utilities are \"data dependent\" in that they provide different functionality\n//   depending on the data argument passed.  This file however handles utilities\n//   with the property `typeToDataDependentProps` whose functions have\n//   other properties which are data-dependent.  The current two properties\n//   available are `expectedServiceArgumentTypes`\n//   and `transformServiceArguments`\n//\n// - Currently this type of utility will never be unary\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport approveDataArgument from './approve-data-argument'\nimport approveServiceArguments from './approve-service-arguments'\n\nimport hasKey from '../../internal/has-own-enumerable-key'\nimport mTransformProperties from '../../internal/m-transform-properties'\nimport noop from '../../internal/noop'\n\nimport { getType } from '../../helpers'\nimport { throwOrReject } from './helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst createTypeToDataUtility = (definition, specialCaseProperties) => {\n  const { isDataFirst, isFlipped } = specialCaseProperties,\n    { isAsynchronous, typeToDataDependentProps } = definition\n\n  //\n  // TODO: rewrite below to handle 'isDataFirst' case more appropriately i.e. if\n  //   the data argument is first then we can run validation before service\n  //   arguments are passed.  The code may turn hairy as a result.\n  //\n\n  return (...firstArgs) => (...secondArgs) => {\n    const [dataArgs, serviceArgs] = isDataFirst\n      ? [firstArgs, secondArgs]\n      : [secondArgs, firstArgs]\n\n    //\n    // need to validate data before service arguments because the service\n    //   arguments depend on the data\n    //\n    let error = approveDataArgument(\n      dataArgs,\n      //\n      // TODO: if approveArguments is passed in the root definition, then we\n      //   should use that instead.  This is somewhat related to the above todo\n      //   because we should be potentially running checks when firstArgs\n      //   is passed\n      //\n      noop,\n      definition,\n      specialCaseProperties\n    )\n    if (error) return throwOrReject(error, isAsynchronous)\n\n    let dataType = getType(dataArgs[0])\n    if (!hasKey(dataType)(typeToDataDependentProps)) dataType = 'any'\n\n    const {\n        theFunction,\n        approveArguments = definition.approveArguments,\n        expectedServiceArgumentTypes = definition.expectedServiceArgumentTypes,\n        transformResult = definition.transformResult,\n        transformServiceArguments = definition.transformServiceArguments,\n      } = typeToDataDependentProps[dataType],\n      authorDefinedApproveArguments = approveArguments\n\n    error = approveServiceArguments.dataDependent(\n      serviceArgs,\n      authorDefinedApproveArguments(dataArgs[0]),\n      definition,\n      expectedServiceArgumentTypes\n    )\n    if (error) return throwOrReject(error, isAsynchronous)\n\n    // success woo woo\n\n    if (transformServiceArguments) {\n      const serviceArguments = isDataFirst ? secondArgs : firstArgs\n\n      mTransformProperties(transformServiceArguments)(serviceArguments)\n    }\n\n    const result = isFlipped\n      ? theFunction(...secondArgs)(...firstArgs)\n      : theFunction(...firstArgs)(...secondArgs)\n\n    return transformResult(result)\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createTypeToDataUtility\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  filter_object as filter,\n  hasKey_object as hasKey,\n  isLaden_object as isLaden,\n  isTruthy,\n  mTransformProperties,\n  returnFirstArgument as identity,\n} from '../../internal'\n\nimport approveDataArgument from './approve-data-argument'\nimport approveServiceArguments from './approve-service-arguments'\nimport createArrayOfDataUtility from './create-array-of-data-utility'\nimport createNoDataArgumentUtility from './create-no-data-argument-utility'\nimport createDataDependentUtility from './create-data-dependent-utility'\n\nimport { getType } from '../../helpers'\nimport { findFirstValueWithTruthyKey, throwOrReject } from './helpers'\n\n//\n//------//\n// Main //\n//------//\n\nconst handleSpecialCaseUtility = definition => {\n  const specialCaseProperties = getSpecialCaseProperties(definition),\n    {\n      expectedServiceArgumentTypes,\n      hasNoDataArgument,\n      isArrayOfData,\n      typeToDataDependentProps,\n    } = definition\n\n  const createUtility = findFirstValueWithTruthyKey([\n    [hasNoDataArgument, createNoDataArgumentUtility],\n    [isArrayOfData, createArrayOfDataUtility],\n    [typeToDataDependentProps, createDataDependentUtility],\n    [expectedServiceArgumentTypes, createPseudoCurriedFunction],\n    [!expectedServiceArgumentTypes, createUnaryFunction],\n  ])\n\n  return createUtility(definition, specialCaseProperties)\n}\n\nconst utilityIsSpecialCase = definition => {\n  return isLaden(getSpecialCaseProperties(definition))\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getSpecialCaseProperties(definition) {\n  const {\n    hasDataArgument,\n    isArrayOfData,\n    isDataFirst,\n    isFlipped,\n    shouldThrowOnExtraDataArguments,\n    shouldThrowOnExtraServiceArguments,\n    transformResult,\n    transformServiceArguments,\n    typeToDataDependentProps,\n    typeToFunction,\n  } = definition\n\n  const result = filter(isTruthy)({\n    hasNoDataArgument: !hasDataArgument,\n    hasServiceArgumentTransforms: !!transformServiceArguments,\n    isArrayOfData,\n    isDataFirst,\n    isFlipped,\n    takesAnyDataType: !!(\n      hasDataArgument && (typeToFunction || typeToDataDependentProps).any\n    ),\n    transformResult: transformResult !== identity,\n    typeToDataDependentProps,\n  })\n\n  if (\n    hasKey('shouldThrowOnExtraDataArguments', definition) &&\n    !shouldThrowOnExtraDataArguments\n  ) {\n    result.ignoreExtraDataArguments = true\n  }\n\n  if (\n    hasKey('shouldThrowOnExtraServiceArguments', definition) &&\n    !shouldThrowOnExtraServiceArguments\n  ) {\n    result.ignoreExtraServiceArguments = true\n  }\n\n  return result\n}\n\nfunction createUnaryFunction(definition, specialCaseProperties) {\n  const {\n    approveArguments: authorDefinedApproveArguments,\n    isAsynchronous,\n    transformResult,\n    typeToFunction,\n  } = definition\n\n  return (...dataArgs) => {\n    const error = approveDataArgument(\n      dataArgs,\n      authorDefinedApproveArguments,\n      definition,\n      specialCaseProperties\n    )\n    if (error) return throwOrReject(error, isAsynchronous)\n\n    // no errors - good to go!\n\n    const validDataArg = dataArgs[0],\n      dataType = getType(validDataArg),\n      theFunction = typeToFunction[dataType] || typeToFunction.any\n\n    return transformResult(theFunction(validDataArg))\n  }\n}\n\nfunction createPseudoCurriedFunction(definition, specialCaseProperties) {\n  //\n  // remember we will never have a utility that was configured to be data-first\n  //   and flipped at the same time.  That gets caught during normalization\n  //\n  const { isDataFirst, isFlipped } = specialCaseProperties,\n    {\n      approveArguments: authorDefinedApproveArguments,\n      isAsynchronous,\n      transformResult,\n      transformServiceArguments,\n    } = definition,\n    [approveFirstArgs, approveSecondArgs] = isDataFirst\n      ? [approveDataArgument, approveServiceArguments.independent]\n      : [approveServiceArguments.independent, approveDataArgument]\n\n  return (...firstArgs) => {\n    let error = approveFirstArgs(\n      firstArgs,\n      authorDefinedApproveArguments,\n      definition,\n      specialCaseProperties\n    )\n    if (error) throw error\n\n    // no errors yet\n\n    return (...secondArgs) => {\n      error = approveSecondArgs(\n        secondArgs,\n        authorDefinedApproveArguments(...firstArgs),\n        definition,\n        specialCaseProperties\n      )\n      if (error) return throwOrReject(error, isAsynchronous)\n\n      // success woo woo\n\n      const { typeToFunction } = definition,\n        validDataArg = isDataFirst ? firstArgs[0] : secondArgs[0],\n        dataType = getType(validDataArg)\n\n      if (transformServiceArguments) {\n        const serviceArguments = isDataFirst ? secondArgs : firstArgs\n\n        mTransformProperties(transformServiceArguments)(serviceArguments)\n      }\n\n      const theFunction = typeToFunction[dataType] || typeToFunction.any,\n        result = isFlipped\n          ? theFunction(...secondArgs)(...firstArgs)\n          : theFunction(...firstArgs)(...secondArgs)\n\n      return transformResult(result)\n    }\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { handleSpecialCaseUtility, utilityIsSpecialCase }\n","//---------//\n// Imports //\n//---------//\n\nimport approveDataArgument from './approve-data-argument'\nimport approveServiceArguments from './approve-service-arguments'\nimport normalizeDefinition from './normalize/definition'\n\nimport { clone_object as clone } from '../../internal'\nimport { getType } from '../../helpers'\nimport { findFirstValueWithTruthyKey, throwOrReject } from './helpers'\nimport { handleSpecialCaseUtility, utilityIsSpecialCase } from './special-case'\n\n//\n//------//\n// Main //\n//------//\n\nconst createUtility = definition => {\n  definition = normalizeDefinition(clone(definition))\n\n  const { expectedServiceArgumentTypes } = definition\n\n  const createUtilityFrom = findFirstValueWithTruthyKey([\n    [utilityIsSpecialCase(definition), handleSpecialCaseUtility],\n    [expectedServiceArgumentTypes, createPseudoCurriedFunction],\n    [!expectedServiceArgumentTypes, createUnaryFunction],\n  ])\n\n  return createUtilityFrom(definition)\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createUnaryFunction(definition) {\n  const {\n    approveArguments: authorDefinedApproveArguments,\n    isAsynchronous,\n    typeToFunction,\n  } = definition\n\n  return (...dataArgs) => {\n    const error = approveDataArgument(\n      dataArgs,\n      authorDefinedApproveArguments,\n      definition\n    )\n    if (error) return throwOrReject(error, isAsynchronous)\n\n    // no errors - good to go!\n\n    const validDataArg = dataArgs[0],\n      dataType = getType(validDataArg)\n\n    return typeToFunction[dataType](validDataArg)\n  }\n}\n\nfunction createPseudoCurriedFunction(definition) {\n  const {\n    approveArguments: authorDefinedApproveArguments,\n    isAsynchronous,\n    typeToFunction,\n  } = definition\n\n  return (...serviceArgs) => {\n    let error = approveServiceArguments.independent(\n      serviceArgs,\n      authorDefinedApproveArguments,\n      definition\n    )\n    if (error) throw error\n\n    // no errors yet\n\n    return (...dataArgs) => {\n      error = approveDataArgument(\n        dataArgs,\n        authorDefinedApproveArguments(...serviceArgs),\n        definition\n      )\n      if (error) return throwOrReject(error, isAsynchronous)\n\n      // success woo woo\n\n      const validDataArg = dataArgs[0],\n        dataType = getType(validDataArg)\n\n      return typeToFunction[dataType](...serviceArgs)(validDataArg)\n    }\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createUtility\n","import {\n  containsAll_arrayLike as arrayLike,\n  containsAll_set,\n} from '../internal'\n\nexport default {\n  name: 'containsAll',\n  expectedServiceArgumentTypes: [['array', 'set']],\n  transformServiceArguments: [arrayOrSet => new Set(arrayOrSet)],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set: containsAll_set,\n  },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction object(setOfValuesToCheck) {\n  return anObject => {\n    const inThisSetOfValues = new Set(Object.values(anObject))\n    return containsAll_set(setOfValuesToCheck)(inThisSetOfValues)\n  }\n}\n\nfunction map(setOfValuesToCheck) {\n  return aMap => {\n    const inThisSetOfValues = new Set(aMap.values())\n    return containsAll_set(setOfValuesToCheck)(inThisSetOfValues)\n  }\n}\n","import containsAllDefinition from './contains-all'\n\nexport default {\n  name: 'allContainedIn',\n  flippedFrom: containsAllDefinition,\n}\n","export default {\n  name: 'all',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(predicate) {\n  return anArrayLike => {\n    let stillTruthy = true,\n      i = 0\n\n    while (stillTruthy && i < anArrayLike.length) {\n      stillTruthy = predicate(anArrayLike[i], i, anArrayLike)\n      i += 1\n    }\n\n    return stillTruthy\n  }\n}\n\nfunction map(predicate) {\n  return aMap => {\n    let stillTruthy = true\n\n    for (const [key, val] of aMap) {\n      stillTruthy = predicate(val, key, aMap)\n      if (!stillTruthy) break\n    }\n\n    return stillTruthy\n  }\n}\n\nfunction object(predicate) {\n  return anObject => {\n    const keys = Object.keys(anObject)\n\n    let stillTruthy = true,\n      i = 0\n\n    while (stillTruthy && i < keys.length) {\n      const aKey = keys[i]\n      stillTruthy = predicate(anObject[aKey], aKey, anObject)\n      i += 1\n    }\n\n    return stillTruthy\n  }\n}\n\nfunction set(predicate) {\n  return aSet => {\n    let stillTruthy = true\n\n    for (const value of aSet) {\n      stillTruthy = predicate(value, value, aSet)\n      if (!stillTruthy) break\n    }\n\n    return stillTruthy\n  }\n}\n","import theFunction from '../internal/always-return'\n\nexport default {\n  name: 'alwaysReturn',\n  hasNoDataArgument: {\n    expectedArgumentTypes: ['any'],\n    theFunction,\n  },\n}\n","export default {\n  name: 'any',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(predicate) {\n  return anArrayLike => {\n    for (let i = 0; i < anArrayLike.length; i += 1) {\n      if (predicate(anArrayLike[i], i, anArrayLike)) return true\n    }\n\n    return false\n  }\n}\n\nfunction object(predicate) {\n  return anObject => {\n    const keys = Object.keys(anObject)\n\n    for (const aKey of keys) {\n      if (predicate(anObject[aKey], aKey, anObject)) return true\n    }\n\n    return false\n  }\n}\n\nfunction map(predicate) {\n  return aMap => {\n    for (const [key, val] of aMap) {\n      if (predicate(val, key, aMap)) return true\n    }\n\n    return false\n  }\n}\n\nfunction set(predicate) {\n  return aSet => {\n    for (const val of aSet) {\n      if (predicate(val, val, aSet)) return true\n    }\n\n    return false\n  }\n}\n","export default {\n  name: 'appendAll',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['array'],\n  typeToFunction: {\n    array: appendAll,\n  },\n}\n\nfunction appendAll(appendThese) {\n  return toThis => toThis.concat(appendThese)\n}\n","export default {\n  name: 'append',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    array: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: appendArray,\n    },\n    string: {\n      expectedServiceArgumentTypes: ['string'],\n      theFunction: appendString,\n    },\n  },\n}\n\nfunction appendArray(appendThis) {\n  appendThis = [appendThis]\n  return toThisArray => toThisArray.concat(appendThis)\n}\n\nfunction appendString(appendThisString) {\n  return toThisString => toThisString + appendThisString\n}\n","import append from './append'\n\nexport default {\n  name: 'appendTo',\n  flippedFrom: append,\n  shouldThrowOnExtraServiceArguments: false,\n}\n","export default {\n  name: 'applyAt',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['string', ['array', 'arguments']],\n  typeToFunction: {\n    array: apply,\n    object: apply,\n  },\n}\n\nfunction apply(key, argumentsToApply) {\n  return anObject => anObject[key](...argumentsToApply)\n}\n","export default {\n  name: 'apply',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: [['array', 'arguments']],\n  typeToFunction: { function: apply },\n}\n\nfunction apply(argumentsToApply) {\n  return aFunction => aFunction(...argumentsToApply)\n}\n","import apply from './apply'\n\nexport default {\n  name: 'applyTo',\n  flippedFrom: apply,\n}\n","import {\n  construct_0arg as createEmpty,\n  mAssignOver_map,\n  mAssignOver_object,\n  mAssignOver_set,\n  reduce_arrayLike as reduce,\n} from '../internal'\n\nexport default {\n  name: 'assignOverAll',\n  isArrayOfData: true,\n  typeToFunction: {\n    map: createAssignOverAll(mAssignOver_map, createEmpty(Map)),\n    object: createAssignOverAll(mAssignOver_object, createEmpty(Object)),\n    set: createAssignOverAll(mAssignOver_set, createEmpty(Set)),\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createAssignOverAll(mAssign, createInitialResult) {\n  return reduce(\n    (result, element) => mAssign(result)(element),\n    createInitialResult()\n  )\n}\n","import assignOverRecursively from '../internal/assign-over-recursively'\n\nexport default {\n  name: 'assignOverRecursively',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    object: {\n      expectedServiceArgumentTypes: ['object'],\n      theFunction: assignOverRecursively.object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['map'],\n      theFunction: assignOverRecursively.map,\n    },\n  },\n}\n","import { assignOver_map, assignOver_object, assignOver_set } from '../internal'\n\nexport default {\n  name: 'assignOver',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    object: {\n      expectedServiceArgumentTypes: ['object'],\n      theFunction: assignOver_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['map'],\n      theFunction: assignOver_map,\n    },\n    set: {\n      expectedServiceArgumentTypes: ['set'],\n      theFunction: assignOver_set,\n    },\n  },\n}\n","//\n// README\n//   - Currently I just want cloneDeep to take in arguments which can actually\n//     be cloned deeply.  In the future I may change my mind to allow any type\n//     or maybe just those which are clone'able.  Gotta figure out what makes\n//     sense as I come across use-cases.\n//\n\nimport cloneDeep from 'clone-deep'\n\nexport default {\n  name: 'cloneDeep',\n  typeToFunction: {\n    arguments: cloneDeep,\n    array: cloneDeep,\n    object: cloneDeep,\n    map: cloneDeep,\n    set: cloneDeep,\n  },\n}\n","import {\n  clone_arguments,\n  clone_array as allArrays,\n  clone_date as date,\n  clone_object as object,\n} from '../internal'\n\nexport default {\n  name: 'clone',\n  typeToFunction: {\n    allArrays,\n    arguments: clone_arguments,\n    buffer: aBuffer => Buffer.from(aBuffer),\n    object,\n    date,\n    regExp,\n    map: aMap => new Map(aMap),\n    set: aSet => new Set(aSet),\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction regExp(aRegexp) {\n  const clonedRegexp = new RegExp(aRegexp.source, aRegexp.flags)\n  clonedRegexp.lastIndex = aRegexp.lastIndex\n  return clonedRegexp\n}\n","//\n// TODO: decide whether this method belongs in this library.  It's not very\n//   stable due to the fallback, but enforcing a finite number of constructors\n//   also doesn't seem very useful.  hmmmm\n//\n\n//------//\n// Init //\n//------//\n\nconst constructorToCoerce = getConstructorToCoerce(),\n  fallbackCoerce = (anything, aConstructorFunction) =>\n    new aConstructorFunction(anything)\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'coerceTo',\n  isDataFirst: true,\n  shouldThrowOnExtraServiceArguments: false,\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: {\n    function: aConstructorFunction => anything => {\n      const coerce = constructorToCoerce.has(aConstructorFunction)\n        ? constructorToCoerce.get(aConstructorFunction)\n        : fallbackCoerce\n\n      return coerce(anything, aConstructorFunction)\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getConstructorToCoerce() {\n  return new Map([\n    [Boolean, anything => !!anything],\n    [Array, anything => Array.from(anything)],\n  ])\n}\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  canCombine_map,\n  canCombine_object,\n  canCombine_set,\n  construct_0arg as createEmpty,\n  mAssignOver_map,\n  mAssignOver_object,\n  mAssignOver_set,\n  reduce_arrayLike as reduce,\n} from '../internal'\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'combineAll',\n  isArrayOfData: true,\n  typeToFunction: {\n    map: createCombineAll(mAssignOver_map, canCombine_map, createEmpty(Map)),\n    object: createCombineAll(\n      mAssignOver_object,\n      canCombine_object,\n      createEmpty(Object)\n    ),\n    set: createCombineAll(mAssignOver_set, canCombine_set, createEmpty(Set)),\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createCombineAll(mAssign, canCombine, createInitialResult) {\n  return function combineAll(arrayOfData) {\n    return reduce((result, element) => {\n      //\n      // it's cleaner to separate validation from application logic, however\n      //   in this case it's unreasonable to iterate through all the elements\n      //   while merging their keys just to determine up front whether the input\n      //   is valid.  It makes much more sense to validate while we\n      //   iterate through.\n      //\n      const error = canCombine(result)(element)\n      if (error) throw error\n\n      return mAssign(result)(element)\n    }, createInitialResult())(arrayOfData)\n  }\n}\n","import assignOver from './assign-over'\nimport { canCombine_map, canCombine_object, canCombine_set } from '../internal'\n\nexport default {\n  name: 'combine',\n  mergeDefinitionWith: assignOver,\n  typeToDataDependentProps: {\n    map: {\n      approveArguments: canCombine_map,\n    },\n    object: {\n      approveArguments: canCombine_object,\n    },\n    set: {\n      approveArguments: canCombine_set,\n    },\n  },\n}\n","export default {\n  name: 'construct',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: { array },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction array(constructorFunction) {\n  return argumentsArray => new constructorFunction(...argumentsArray)\n}\n","import construct_1arg from '../internal/construct_1arg'\n\nexport default {\n  name: 'construct_1arg',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: { any: construct_1arg },\n}\n","import { contains_string } from '../internal'\n\nexport default {\n  name: 'contains',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['any'],\n  typeToDataDependentProps: {\n    arrayLike: { theFunction: arrayLike },\n    map: { theFunction: map },\n    object: { theFunction: object },\n    set: { theFunction: set },\n    string: {\n      expectedServiceArgumentTypes: ['string'],\n      theFunction: contains_string,\n    },\n  },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction arrayLike(element) {\n  return anArrayLike =>\n    Array.prototype.indexOf.call(anArrayLike, element) !== -1\n}\n\nfunction object(valueToSearchFor) {\n  return anObject => Object.values(anObject).indexOf(valueToSearchFor) !== -1\n}\n\nfunction map(valueToSearchFor) {\n  return aMap => {\n    let found = false\n\n    for (const aValue of aMap.values()) {\n      found = valueToSearchFor === aValue\n      if (found) break\n    }\n\n    return found\n  }\n}\n\nfunction set(valueToSearchFor) {\n  return aSet => aSet.has(valueToSearchFor)\n}\n","import containsDefinition from './contains'\n\nexport default {\n  name: 'containedIn',\n  flippedFrom: containsDefinition,\n}\n","import { containsAll_set } from '../internal'\n\nexport default {\n  name: 'containsOnly',\n  expectedServiceArgumentTypes: [['array', 'set']],\n  transformServiceArguments: [arrayOrSet => new Set(arrayOrSet)],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction arrayLike(setOfValuesToCheck) {\n  return anArrayLike => {\n    const inThisSetOfValues = new Set(anArrayLike)\n    return containsOnly(setOfValuesToCheck, inThisSetOfValues)\n  }\n}\n\nfunction object(setOfValuesToCheck) {\n  return anObject => {\n    const inThisSetOfValues = new Set(Object.values(anObject))\n    return containsOnly(setOfValuesToCheck, inThisSetOfValues)\n  }\n}\n\nfunction map(setOfValuesToCheck) {\n  return aMap => {\n    const inThisSetOfValues = new Set(aMap.values())\n    return containsOnly(setOfValuesToCheck, inThisSetOfValues)\n  }\n}\n\nfunction set(setOfValuesToCheck) {\n  return aSet => containsOnly(setOfValuesToCheck, aSet)\n}\n\nfunction containsOnly(set1, set2) {\n  return containsAll_set(set1)(set2) && set1.size === set2.size\n}\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  createEmptyCollectionFromInstance,\n  discardAll_set as set,\n  mAppend_arrayLike as mAppend,\n  reduce_arrayLike,\n  reduce_map,\n  reduce_object,\n} from '../internal'\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'discardAll',\n  expectedServiceArgumentTypes: [['array', 'set']],\n  transformServiceArguments: [arrayOrSet => new Set(arrayOrSet)],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(setOfValuesToRemove) {\n  return collection =>\n    reduce_arrayLike((result, value) => {\n      if (!setOfValuesToRemove.has(value)) mAppend(value)(result)\n      return result\n    }, createEmptyCollectionFromInstance(collection))(collection)\n}\n\nfunction map(setOfValuesToRemove) {\n  return aMap =>\n    reduce_map((result, value, key) => {\n      if (!setOfValuesToRemove.has(value)) result.set(key, value)\n      return result\n    }, new Map())(aMap)\n}\n\nfunction object(setOfValuesToRemove) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      if (!setOfValuesToRemove.has(value)) result[key] = value\n      return result\n    }, {})(anObject)\n}\n","import discardFirst from '../internal/discard-first_array-like'\n\nexport default {\n  name: 'discardFirstWhile',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: { arrayLike },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction arrayLike(predicate) {\n  return anArrayLike => {\n    let i = 0,\n      keepDropping = true\n\n    while (keepDropping && i < anArrayLike.length) {\n      keepDropping = predicate(anArrayLike[i], i, anArrayLike)\n      if (keepDropping) i += 1\n    }\n\n    return discardFirst(i)(anArrayLike)\n  }\n}\n","import arrayLike from '../internal/discard-first_array-like'\nimport string from '../internal/discard-first_string'\n\nexport default {\n  name: 'discardFirst',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: { arrayLike, string },\n}\n","import keepFirst from '../internal/keep-first_array-like'\n\nexport default {\n  name: 'discardLastWhile',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: { arrayLike },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction arrayLike(predicate) {\n  return anArrayLike => {\n    let idx = anArrayLike.length - 1,\n      keepDropping = true\n\n    while (keepDropping && idx >= 0) {\n      keepDropping = predicate(anArrayLike[idx], idx, anArrayLike)\n      if (keepDropping) idx -= 1\n    }\n\n    return keepFirst(idx + 1)(anArrayLike)\n  }\n}\n","import arrayLike from '../internal/discard-last_array-like'\n\nexport default {\n  name: 'discardFirst',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: { arrayLike },\n}\n","import {\n  reduce_arrayLike,\n  reduce_map,\n  reduce_object,\n  reduce_set,\n} from '../internal'\n\nexport default {\n  name: 'keepWhen',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(predicate) {\n  return anArrayLike =>\n    reduce_arrayLike((result, value, index) => {\n      if (predicate(value, index, anArrayLike)) result.push(value)\n      return result\n    }, [])(anArrayLike)\n}\n\nfunction map(predicate) {\n  return aMap =>\n    reduce_map((result, value, key) => {\n      if (predicate(value, key, aMap)) result.set(key, value)\n      return result\n    }, new Map())(aMap)\n}\n\nfunction object(predicate) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      if (predicate(value, key, anObject)) result[key] = value\n      return result\n    }, {})(anObject)\n}\n\nfunction set(predicate) {\n  return aSet =>\n    reduce_set((result, value) => {\n      if (predicate(value, value, aSet)) result.add(value)\n      return result\n    }, new Set())(aSet)\n}\n","//---------//\n// Imports //\n//---------//\n\nimport keepWhenDefinition from './keep-when'\nimport mapValues from '../internal/map_object'\nimport negate from '../internal/negate'\n\n//\n//------//\n// Main //\n//------//\n\nconst composedTypeToFunction = negatePredicates(\n  keepWhenDefinition.typeToFunction\n)\n\nexport default {\n  name: 'discardWhen',\n  expectedServiceArgumentTypes: keepWhenDefinition.expectedServiceArgumentTypes,\n  typeToFunction: composedTypeToFunction,\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction negatePredicates(typeToFunction) {\n  return mapValues(keepWhen => predicate => keepWhen(negate(predicate)))(\n    typeToFunction\n  )\n}\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  createEmptyCollectionFromInstance,\n  mAppend_arrayLike as mAppend,\n  reduce_arrayLike,\n  reduce_object,\n} from '../internal'\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'discard',\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(valueToRemove) {\n  return anArrayLike =>\n    reduce_arrayLike((result, value) => {\n      if (value !== valueToRemove) mAppend(value)(result)\n      return result\n    }, createEmptyCollectionFromInstance(anArrayLike))(anArrayLike)\n}\n\nfunction map(valueToRemove) {\n  return aMap => {\n    const result = new Map()\n    for (const [key, value] of aMap) {\n      if (value !== valueToRemove) result.set(key, value)\n    }\n    return result\n  }\n}\n\nfunction object(valueToRemove) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      if (value !== valueToRemove) result[key] = value\n      return result\n    }, {})(anObject)\n}\n\nfunction set(valueToRemove) {\n  return aSet => {\n    const result = new Set(aSet)\n    result.delete(valueToRemove)\n    return result\n  }\n}\n","import arrayLike from '../internal/find-first-when_array-like'\n\nexport default {\n  name: 'findFirstWhen',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(predicate) {\n  return aMap => {\n    for (const [key, value] of aMap) {\n      if (predicate(value, key, aMap)) return value\n    }\n  }\n}\n\nfunction set(predicate) {\n  return aSet => {\n    for (const value of aSet) {\n      if (predicate(value, value, aSet)) return value\n    }\n  }\n}\n","export default {\n  name: 'findFirst',\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(valueToFind) {\n  return anArrayLike => {\n    for (const value of anArrayLike) {\n      if (value === valueToFind) return value\n    }\n  }\n}\n\nfunction map(valueToFind) {\n  return aMap => {\n    for (const [_unused_key, value] of aMap) {\n      if (value === valueToFind) return value\n    }\n  }\n}\n\nfunction set(valueToFind) {\n  return aSet => {\n    return aSet.has(valueToFind) ? valueToFind : undefined\n  }\n}\n","import arrayLike from '../internal/first_array-like'\n\nexport default {\n  name: 'first',\n  typeToFunction: { arrayLike },\n}\n","//\n// README\n// - flattens a single level\n//\n\nimport reduce from '../internal/reduce_array-like'\n\nexport default {\n  name: 'flatten',\n  typeToFunction: { array },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction array(anArray) {\n  return reduce((result, element) => {\n    if (Array.isArray(element)) Array.prototype.push.apply(result, element)\n    else result.push(element)\n\n    return result\n  }, [])(anArray)\n}\n","import any from '../internal/flow'\n\nexport default {\n  name: 'flow',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['array'],\n  typeToFunction: { any },\n}\n","import { forEach_arrayLike } from '../internal'\n\nexport default {\n  name: 'forEach',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike: forEach_arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(forEach) {\n  return aMap => {\n    for (const [key, value] of aMap) {\n      forEach(value, key, aMap)\n    }\n    return aMap\n  }\n}\n\nfunction object(forEachFunction) {\n  return anObject => {\n    forEach_arrayLike(key => forEachFunction(anObject[key], key, anObject))(\n      Object.keys(anObject)\n    )\n    return anObject\n  }\n}\n\nfunction set(forEach) {\n  return aSet => {\n    for (const value of aSet) {\n      forEach(value, value, aSet)\n    }\n    return aSet\n  }\n}\n","export default {\n  name: 'getArrayOfKeys',\n  shouldThrowOnExtraDataArguments: false,\n  typeToFunction: {\n    map: aMap => [...aMap.keys()],\n    object: Object.keys,\n  },\n}\n","import set from '../internal/get-array-of-values_set'\n\nexport default {\n  name: 'getArrayOfValues',\n  typeToFunction: {\n    map: aMap => [...aMap.values()],\n    object: Object.values,\n    set,\n  },\n}\n","import object from '../internal/get-count_object'\n\nexport default {\n  name: 'getCount',\n  typeToFunction: {\n    arrayLike: anArrayLike => anArrayLike.length,\n    mapOrSet: aMapOrSet => aMapOrSet.size,\n    object,\n  },\n}\n","//\n// README\n//   - I'm leaving out map and arrayLike because I have only ever needed this\n//     function with nested objects.  If you find another use-case please let\n//     me know so I can understand it and figure out a solution.\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport discardLast from '../internal/discard-last_array-like'\nimport last from '../internal/last_array-like'\n\n//\n//------//\n// Init //\n//------//\n\nconst getAllButLastKey = discardLast(1)\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'getValueAtPath',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['array'],\n  typeToFunction: {\n    object: getValueAtPath_object,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction getValueAtPath_object(arrayOfKeys) {\n  const allButLastKey = getAllButLastKey(arrayOfKeys),\n    lastKey = last(arrayOfKeys)\n\n  return anObject => {\n    for (const key of allButLastKey) {\n      if (anObject[key] === null || typeof anObject[key] !== 'object') {\n        return\n      }\n\n      anObject = anObject[key]\n    }\n    return anObject[lastKey]\n  }\n}\n","import getValueAt_object from '../internal/get-value-at_object'\n\nexport default {\n  name: 'getValueAt',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    arrayLike: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: getValueAt_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: key => aMap => aMap.get(key),\n    },\n    object: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: getValueAt_object,\n    },\n  },\n}\n","import getValueAtDefinition from './get-value-at'\n\nexport default {\n  name: 'getValueFrom',\n  flippedFrom: getValueAtDefinition,\n  shouldThrowOnExtraServiceArguments: false,\n}\n","import hasKey_object from '../internal/has-key_object'\n\nexport default {\n  name: 'hasKey',\n  typeToDataDependentProps: {\n    arrayLike: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: hasKey_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: hasKey_map,\n    },\n    object: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: hasKey_object,\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction hasKey_map(key) {\n  return aMap => aMap.has(key)\n}\n","import hasOwnEnumerableKey from '../internal/has-own-enumerable-key'\n\nexport default {\n  name: 'hasOwnEnumerableKey',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['string'],\n  typeToFunction: {\n    any: hasOwnEnumerableKey,\n  },\n}\n","const defaultInvokeAt = { theFunction: invokeAt_object }\n\nexport default {\n  name: 'invokeAt',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: [['number', 'string']],\n  typeToDataDependentProps: {\n    arguments: defaultInvokeAt,\n    array: defaultInvokeAt,\n    map: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: invokeAt_map,\n    },\n    object: defaultInvokeAt,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction invokeAt_object(key) {\n  return anObject => anObject[key]()\n}\n\nfunction invokeAt_map(key) {\n  return aMap => aMap.get(key)()\n}\n","import invoke from '../internal/invoke'\n\nexport default {\n  name: 'invoke',\n  shouldThrowOnExtraDataArguments: false,\n  typeToFunction: { function: invoke },\n}\n","import {\n  isLaden_hasLength as arrayLike,\n  isLaden_hasSize as mapOrSet,\n  isLaden_object as object,\n} from '../internal'\n\nexport default {\n  name: 'isLaden',\n  shouldThrowOnExtraDataArguments: false,\n  typeToFunction: {\n    any,\n    arrayLike,\n    mapOrSet,\n    object,\n  },\n}\n\nfunction any(something) {\n  return !!(something && (something.length || something.size))\n}\n","import isLadenDefinition from './is-laden'\nimport map from '../internal/map_object'\nimport negate from '../internal/negate'\n\nconst composedTypeToFunction = map(negate)(isLadenDefinition.typeToFunction)\n\nexport default {\n  name: 'isEmpty',\n  typeToFunction: composedTypeToFunction,\n}\n","export default {\n  name: 'isFalsey',\n  typeToFunction: { any: something => !something },\n}\n","export default {\n  name: 'isGreaterThan',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: {\n    number: right => left => {\n      return left > right\n    },\n  },\n}\n","export default {\n  name: 'isLessThan',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: {\n    number: right => left => {\n      return left < right\n    },\n  },\n}\n","import any from '../internal/is-truthy'\n\nexport default {\n  name: 'isTruthy',\n  shouldThrowOnExtraDataArguments: false,\n  typeToFunction: { any },\n}\n","import { join_arrayLike as arrayLike, join_set as set } from '../internal'\n\nexport default {\n  name: 'join',\n  expectedServiceArgumentTypes: ['string'],\n  typeToFunction: {\n    arguments: arrayLike,\n    array: arrayLike,\n    set,\n  },\n}\n","import arrayLike from '../internal/keep-first_array-like'\nimport string from '../internal/keep-first_string'\n\nexport default {\n  name: 'keepFirst',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: { arrayLike, string },\n}\n","//\n// README\n//   - I'm writing this initially to support array and set only.  It might make\n//     sense to expand it to key/value collections but I'm going to wait until\n//     I encounter a use-case before implementing that.\n//\n\nimport { keepIntersection_array, keepIntersection_set } from '../internal'\n\nexport default {\n  name: 'keep',\n  typeToDataDependentProps: {\n    array: {\n      expectedServiceArgumentTypes: ['array'],\n      theFunction: keepIntersection_array,\n    },\n    set: {\n      expectedServiceArgumentTypes: ['set'],\n      theFunction: keepIntersection_set,\n    },\n  },\n}\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  createEmptyCollectionFromInstance,\n  mAppend_arrayLike as mAppend,\n  reduce_arrayLike,\n  reduce_map,\n  reduce_object,\n} from '../internal'\n\n//\n//------//\n// Main //\n//------//\n\nexport default {\n  name: 'keep',\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(valueToKeep) {\n  return anArrayLike =>\n    reduce_arrayLike((result, value) => {\n      if (value === valueToKeep) result = mAppend(value)(result)\n      return result\n    }, createEmptyCollectionFromInstance(anArrayLike))(anArrayLike)\n}\n\nfunction map(valueToKeep) {\n  return aMap =>\n    reduce_map((result, value, key) => {\n      if (value === valueToKeep) result.set(key, value)\n      return result\n    }, new Map())(aMap)\n}\n\nfunction object(valueToKeep) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      if (value === valueToKeep) result[key] = value\n      return result\n    }, {})(anObject)\n}\n\nfunction set(valueToKeep) {\n  return aSet => {\n    return aSet.has(valueToKeep) ? new Set([valueToKeep]) : new Set()\n  }\n}\n","export default {\n  name: 'last',\n  typeToFunction: {\n    arrayLike: collection => collection[collection.length - 1],\n  },\n}\n","export default {\n  name: 'mAppendAll',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['array'],\n  typeToFunction: {\n    array: mAppendAll,\n  },\n}\n\nfunction mAppendAll(appendThese) {\n  return toThis => {\n    Array.prototype.push.apply(toThis, appendThese)\n    return toThis\n  }\n}\n","export default {\n  name: 'mAppend',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: {\n    array: mAppend,\n  },\n}\n\nfunction mAppend(appendThis) {\n  return toThis => {\n    toThis.push(appendThis)\n    return toThis\n  }\n}\n","import mAppend from './m-append'\n\nexport default {\n  name: 'mAppendTo',\n  flippedFrom: mAppend,\n  shouldThrowOnExtraServiceArguments: false,\n}\n","import {\n  mAssignOver_map,\n  mAssignOver_object,\n  mAssignOver_set,\n} from '../internal'\n\nimport assignOver from './assign-over'\n\nexport default {\n  name: 'mAssignOver',\n  mergeDefinitionWith: assignOver,\n  typeToDataDependentProps: {\n    object: {\n      theFunction: mAssignOver_object,\n    },\n    map: {\n      theFunction: mAssignOver_map,\n    },\n    set: {\n      theFunction: mAssignOver_set,\n    },\n  },\n}\n","import mAssignOver from './m-assign-over'\nimport { canCombine_map, canCombine_object, canCombine_set } from '../internal'\n\nexport default {\n  name: 'mCombine',\n  mergeDefinitionWith: mAssignOver,\n  typeToDataDependentProps: {\n    map: {\n      approveArguments: canCombine_map,\n    },\n    object: {\n      approveArguments: canCombine_object,\n    },\n    set: {\n      approveArguments: canCombine_set,\n    },\n  },\n}\n","import { mMap_arrayLike, mMap_object } from '../internal'\n\nexport default {\n  name: 'mMap',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    array: mMap_arrayLike,\n    arguments: mMap_arrayLike,\n    object: mMap_object,\n    map,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(mapperFunction) {\n  return aMap => {\n    for (const [key, value] of aMap) {\n      aMap.set(key, mapperFunction(value, key, aMap))\n    }\n    return aMap\n  }\n}\n","export default {\n  name: 'mOmit',\n  typeToDataDependentProps: {\n    object: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: mOmit_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: mOmit_map,\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction mOmit_object(key) {\n  return anObject => {\n    delete anObject[key]\n    return anObject\n  }\n}\nfunction mOmit_map(key) {\n  return aMap => {\n    aMap.delete(key)\n    return aMap\n  }\n}\n","export default {\n  name: 'mPrepend',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    array: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: mPrependArray,\n    },\n  },\n}\n\nfunction mPrependArray(prependThis) {\n  return toThis => {\n    toThis.unshift(prependThis)\n    return toThis\n  }\n}\n","import { mSet_map, mSet_object } from '../internal'\n\nexport default {\n  name: 'mSet',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    object: {\n      expectedServiceArgumentTypes: ['string', 'any'],\n      theFunction: mSet_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['any', 'any'],\n      theFunction: mSet_map,\n    },\n  },\n}\n","import { reduce_object } from '../internal'\n\nexport default {\n  name: 'mapKeys',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    object,\n    map,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction object(mapperFunction) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      const newKey = mapperFunction(key, value, anObject)\n      result[newKey] = value\n      return result\n    }, {})(anObject)\n}\nfunction map(mapperFunction) {\n  return aMap => {\n    const result = new Map()\n    for (const [key, value] of aMap) {\n      const newKey = mapperFunction(key, value, aMap)\n      result.set(newKey, value)\n    }\n    return result\n  }\n}\n","import { map_arrayLike as arrayLike, map_object as object } from '../internal'\n\nexport default {\n  name: 'map',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    arrayLike,\n    object,\n    map,\n    set,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(mapperFunction) {\n  return aMap => {\n    const result = new Map()\n\n    for (const [key, value] of aMap) {\n      result.set(key, mapperFunction(value, key, aMap))\n    }\n\n    return result\n  }\n}\n\nfunction set(mapperFunction) {\n  return aSet => {\n    const result = new Set()\n\n    for (const value of aSet) {\n      result.add(mapperFunction(value, value, aSet))\n    }\n\n    return result\n  }\n}\n","import any from './any'\n\nexport default {\n  name: 'none',\n  mergeDefinitionWith: any,\n  transformResult: result => !result,\n}\n","import reduce from '../internal/reduce_object'\n\nexport default {\n  name: 'omitAll',\n  expectedServiceArgumentTypes: [['array', 'set']],\n  transformServiceArguments: {\n    0: arrayOrSet => new Set(arrayOrSet),\n  },\n  typeToFunction: {\n    map,\n    object,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(setOfKeysToRemove) {\n  return aMap => {\n    const result = new Map()\n    for (const [key, value] of aMap) {\n      if (!setOfKeysToRemove.has(key)) result.set(key, value)\n    }\n    return result\n  }\n}\n\nfunction object(setOfKeysToRemove) {\n  return anObject =>\n    reduce((result, value, key) => {\n      if (!setOfKeysToRemove.has(key)) result[key] = value\n      return result\n    }, {})(anObject)\n}\n","import reduce_object from '../internal/reduce_object'\n\nexport default {\n  name: 'pickWhen',\n  expectedServiceArgumentTypes: ['function'],\n  typeToFunction: {\n    map,\n    object,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(predicate) {\n  return aMap => {\n    const result = new Map()\n    for (const [key, value] of aMap) {\n      if (predicate(key, value, aMap)) result.set(key, value)\n    }\n    return result\n  }\n}\n\nfunction object(predicate) {\n  return anObject =>\n    reduce_object((result, value, key) => {\n      if (predicate(key, value, anObject)) result[key] = value\n      return result\n    }, {})(anObject)\n}\n","import pickWhenDefinition from './pick-when'\nimport mapValues from '../internal/map_object'\nimport negate from '../internal/negate'\n\nconst composedTypeToFunction = negatePredicates(\n  pickWhenDefinition.typeToFunction\n)\n\nexport default {\n  name: 'omitWhen',\n  expectedServiceArgumentTypes: pickWhenDefinition.expectedServiceArgumentTypes,\n  typeToFunction: composedTypeToFunction,\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction negatePredicates(typeToFunction) {\n  return mapValues(pickWhen => predicate => pickWhen(negate(predicate)))(\n    typeToFunction\n  )\n}\n","export default {\n  name: 'omit',\n  typeToDataDependentProps: {\n    map: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: omit_map,\n    },\n    object: {\n      expectedServiceArgumentTypes: [['number', 'string']],\n      theFunction: omit_object,\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction omit_map(keyToRemove) {\n  return aMap => {\n    const result = new Map(aMap)\n    result.delete(keyToRemove)\n    return result\n  }\n}\n\nfunction omit_object(keyToRemove) {\n  return anObject => {\n    const result = Object.assign({}, anObject)\n    delete result[keyToRemove]\n    return result\n  }\n}\n","import theFunction from '../internal/pass-through'\n\nexport default {\n  name: 'passThrough',\n  hasNoDataArgument: {\n    expectedArgumentTypes: ['any', 'array'],\n    theFunction,\n  },\n}\n","import reduce from '../internal/reduce_object'\n\nexport default {\n  name: 'pickAll',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: [['array', 'set']],\n  transformServiceArguments: {\n    0: arrayOrSet => new Set(arrayOrSet),\n  },\n  typeToFunction: {\n    map,\n    object,\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction map(setOfKeysToPick) {\n  return aMap => {\n    const result = new Map()\n    for (const [key, value] of aMap) {\n      if (setOfKeysToPick.has(key)) result.set(key, value)\n    }\n    return result\n  }\n}\n\nfunction object(setOfKeysToPick) {\n  return anObject =>\n    reduce((result, value, key) => {\n      if (setOfKeysToPick.has(key)) result[key] = value\n      return result\n    }, {})(anObject)\n}\n","import pickAll from './pick-all'\n\nexport default {\n  name: 'pickAllFrom',\n  flippedFrom: pickAll,\n  shouldThrowOnExtraServiceArguments: false,\n}\n","export default {\n  name: 'prepend',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    array: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: prependArray,\n    },\n    string: {\n      expectedServiceArgumentTypes: ['string'],\n      theFunction: prependString,\n    },\n  },\n}\n\nfunction prependArray(prependThis) {\n  prependThis = [prependThis]\n  return toThis => prependThis.concat(toThis)\n}\n\nfunction prependString(prependThis) {\n  return toThis => prependThis + toThis\n}\n","import {\n  reduce_arrayLike as arrayLike,\n  reduce_map as map,\n  reduce_object as object,\n  reduce_set as set,\n} from '../internal'\n\nexport default {\n  name: 'reduce',\n  expectedServiceArgumentTypes: ['function', 'any'],\n  typeToFunction: {\n    arrayLike,\n    map,\n    object,\n    set,\n  },\n}\n","import reduceDefinition from './reduce'\nimport invoke from '../internal/invoke'\n\nexport default {\n  name: 'reduceFresh',\n  mergeDefinitionWith: reduceDefinition,\n  expectedServiceArgumentTypes: ['function', 'function'],\n  transformServiceArguments: {\n    1: invoke,\n  },\n}\n","import theFunction from '../internal/return-first-argument'\n\n//\n// also called the 'identity function'\n// https://en.wikipedia.org/wiki/Identity_function\n//\nexport default {\n  name: 'returnFirstArgument',\n  hasNoDataArgument: {\n    expectedArgumentTypes: ['any'],\n    shouldThrowOnExtraArguments: false,\n    theFunction,\n  },\n}\n","import clone from '../internal/clone_array'\n\nexport default {\n  name: 'reverse',\n  typeToFunction: { arrayLike, string },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction arrayLike(anArrayLike) {\n  return clone(anArrayLike).reverse()\n}\n\nfunction string(aString) {\n  return aString\n    .split('')\n    .reverse()\n    .join('')\n}\n","import { setOfKeys_map as map, setOfKeys_object as object } from '../internal'\n\nexport default {\n  name: 'setOfKeys',\n  typeToFunction: {\n    map,\n    object,\n  },\n}\n","export default {\n  name: 'set',\n  typeToDataDependentProps: {\n    object: {\n      expectedServiceArgumentTypes: [['number', 'string'], 'any'],\n      theFunction: set_object,\n    },\n    map: {\n      expectedServiceArgumentTypes: ['any', 'any'],\n      theFunction: set_map,\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction set_map(key, value) {\n  return aMap => {\n    const result = new Map(aMap)\n    result.set(key, value)\n    return result\n  }\n}\n\nfunction set_object(key, value) {\n  return anObject => {\n    const result = Object.assign({}, anObject)\n    result[key] = value\n    return result\n  }\n}\n","export default {\n  name: 'startsWith',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    arrayLike: {\n      expectedServiceArgumentTypes: ['any'],\n      theFunction: startsWith,\n    },\n    string: {\n      expectedServiceArgumentTypes: ['string'],\n      theFunction: startsWith,\n    },\n  },\n}\n\n//\n//-------------//\n// Helper Fxns //\n//-------------//\n\nfunction startsWith(mightStartWith_arrayLike) {\n  return anArrayLike => {\n    if (mightStartWith_arrayLike.length > anArrayLike.length) return false\n\n    for (let i = 0; i < mightStartWith_arrayLike.length; i += 1) {\n      if (mightStartWith_arrayLike[i] !== anArrayLike[i]) return false\n    }\n\n    return true\n  }\n}\n","import strictlyEquals from '../internal/strictly-equals'\n\nexport default {\n  name: 'strictlyEquals',\n  shouldThrowOnExtraDataArguments: false,\n  expectedServiceArgumentTypes: ['any'],\n  typeToFunction: { any: strictlyEquals },\n}\n","//\n// TODO: validate service arguments to ensure values are functions\n//\n\nimport transformProperties_object from '../internal/transform-properties_object'\n\nexport default {\n  name: 'transformProperties',\n  shouldThrowOnExtraDataArguments: false,\n  typeToDataDependentProps: {\n    map: {\n      expectedServiceArgumentTypes: ['map'],\n      theFunction: transformProperties_map,\n    },\n    object: {\n      expectedServiceArgumentTypes: ['object'],\n      theFunction: transformProperties_object,\n    },\n  },\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction transformProperties_map(mapOfTransforms) {\n  return aMap => {\n    const result = new Map()\n\n    for (const [key, value] of aMap) {\n      if (mapOfTransforms.has(key)) {\n        const transform = mapOfTransforms.get(key)\n        result.set(key, transform(value, key, aMap))\n      } else result.set(key, value)\n    }\n\n    return result\n  }\n}\n","import string from '../internal/truncate-to-n-lines'\n\nexport default {\n  name: 'truncateToNLines',\n  expectedServiceArgumentTypes: ['number'],\n  typeToFunction: { string },\n}\n","import join from '../internal/join_set'\n\nexport default {\n  name: 'unique',\n  typeToFunction: {\n    array: anArray => [...new Set(anArray)],\n    string: aString => join('')(new Set(aString)),\n  },\n}\n","import createUtility from './lib/create/utility'\n\nimport allContainedIn_definition from './lib/definitions/all-contained-in'\nconst allContainedIn = createUtility(allContainedIn_definition)\n\nimport all_definition from './lib/definitions/all'\nconst all = createUtility(all_definition)\n\nimport alwaysReturn_definition from './lib/definitions/always-return'\nconst alwaysReturn = createUtility(alwaysReturn_definition)\n\nimport any_definition from './lib/definitions/any'\nconst any = createUtility(any_definition)\n\nimport appendAll_definition from './lib/definitions/append-all'\nconst appendAll = createUtility(appendAll_definition)\n\nimport appendTo_definition from './lib/definitions/append-to'\nconst appendTo = createUtility(appendTo_definition)\n\nimport append_definition from './lib/definitions/append'\nconst append = createUtility(append_definition)\n\nimport applyAt_definition from './lib/definitions/apply-at'\nconst applyAt = createUtility(applyAt_definition)\n\nimport applyTo_definition from './lib/definitions/apply-to'\nconst applyTo = createUtility(applyTo_definition)\n\nimport apply_definition from './lib/definitions/apply'\nconst apply = createUtility(apply_definition)\n\nimport assignOverAll_definition from './lib/definitions/assign-over-all'\nconst assignOverAll = createUtility(assignOverAll_definition)\n\nimport assignOverRecursively_definition from './lib/definitions/assign-over-recursively'\nconst assignOverRecursively = createUtility(assignOverRecursively_definition)\n\nimport assignOver_definition from './lib/definitions/assign-over'\nconst assignOver = createUtility(assignOver_definition)\n\nimport cloneDeep_definition from './lib/definitions/clone-deep'\nconst cloneDeep = createUtility(cloneDeep_definition)\n\nimport clone_definition from './lib/definitions/clone'\nconst clone = createUtility(clone_definition)\n\nimport coerceTo_definition from './lib/definitions/coerce-to'\nconst coerceTo = createUtility(coerceTo_definition)\n\nimport combineAll_definition from './lib/definitions/combine-all'\nconst combineAll = createUtility(combineAll_definition)\n\nimport combine_definition from './lib/definitions/combine'\nconst combine = createUtility(combine_definition)\n\nimport construct_definition from './lib/definitions/construct'\nconst construct = createUtility(construct_definition)\n\nimport construct_1arg_definition from './lib/definitions/construct_1arg'\nconst construct_1arg = createUtility(construct_1arg_definition)\n\nimport containedIn_definition from './lib/definitions/contained-in'\nconst containedIn = createUtility(containedIn_definition)\n\nimport containsAll_definition from './lib/definitions/contains-all'\nconst containsAll = createUtility(containsAll_definition)\n\nimport containsOnly_definition from './lib/definitions/contains-only'\nconst containsOnly = createUtility(containsOnly_definition)\n\nimport contains_definition from './lib/definitions/contains'\nconst contains = createUtility(contains_definition)\n\nimport discardAll_definition from './lib/definitions/discard-all'\nconst discardAll = createUtility(discardAll_definition)\n\nimport discardFirstWhile_definition from './lib/definitions/discard-first-while'\nconst discardFirstWhile = createUtility(discardFirstWhile_definition)\n\nimport discardFirst_definition from './lib/definitions/discard-first'\nconst discardFirst = createUtility(discardFirst_definition)\n\nimport discardLastWhile_definition from './lib/definitions/discard-last-while'\nconst discardLastWhile = createUtility(discardLastWhile_definition)\n\nimport discardLast_definition from './lib/definitions/discard-last'\nconst discardLast = createUtility(discardLast_definition)\n\nimport discardWhen_definition from './lib/definitions/discard-when'\nconst discardWhen = createUtility(discardWhen_definition)\n\nimport discard_definition from './lib/definitions/discard'\nconst discard = createUtility(discard_definition)\n\nimport findFirstWhen_definition from './lib/definitions/find-first-when'\nconst findFirstWhen = createUtility(findFirstWhen_definition)\n\nimport findFirst_definition from './lib/definitions/find-first'\nconst findFirst = createUtility(findFirst_definition)\n\nimport first_definition from './lib/definitions/first'\nconst first = createUtility(first_definition)\n\nimport flatten_definition from './lib/definitions/flatten'\nconst flatten = createUtility(flatten_definition)\n\nimport flow_definition from './lib/definitions/flow'\nconst flow = createUtility(flow_definition)\n\nimport forEach_definition from './lib/definitions/for-each'\nconst forEach = createUtility(forEach_definition)\n\nimport getArrayOfKeys_definition from './lib/definitions/get-array-of-keys'\nconst getArrayOfKeys = createUtility(getArrayOfKeys_definition)\n\nimport getArrayOfValues_definition from './lib/definitions/get-array-of-values'\nconst getArrayOfValues = createUtility(getArrayOfValues_definition)\n\nimport getCount_definition from './lib/definitions/get-count'\nconst getCount = createUtility(getCount_definition)\n\nimport getValueAtPath_definition from './lib/definitions/get-value-at-path'\nconst getValueAtPath = createUtility(getValueAtPath_definition)\n\nimport getValueAt_definition from './lib/definitions/get-value-at'\nconst getValueAt = createUtility(getValueAt_definition)\n\nimport getValueFrom_definition from './lib/definitions/get-value-from'\nconst getValueFrom = createUtility(getValueFrom_definition)\n\nimport hasKey_definition from './lib/definitions/has-key'\nconst hasKey = createUtility(hasKey_definition)\n\nimport hasOwnEnumerableKey_definition from './lib/definitions/has-own-enumerable-key'\nconst hasOwnEnumerableKey = createUtility(hasOwnEnumerableKey_definition)\n\nimport invokeAt_definition from './lib/definitions/invoke-at'\nconst invokeAt = createUtility(invokeAt_definition)\n\nimport invoke_definition from './lib/definitions/invoke'\nconst invoke = createUtility(invoke_definition)\n\nimport isEmpty_definition from './lib/definitions/is-empty'\nconst isEmpty = createUtility(isEmpty_definition)\n\nimport isFalsey_definition from './lib/definitions/is-falsey'\nconst isFalsey = createUtility(isFalsey_definition)\n\nimport isGreaterThan_definition from './lib/definitions/is-greater-than'\nconst isGreaterThan = createUtility(isGreaterThan_definition)\n\nimport isLaden_definition from './lib/definitions/is-laden'\nconst isLaden = createUtility(isLaden_definition)\n\nimport isLessThan_definition from './lib/definitions/is-less-than'\nconst isLessThan = createUtility(isLessThan_definition)\n\nimport isTruthy_definition from './lib/definitions/is-truthy'\nconst isTruthy = createUtility(isTruthy_definition)\n\nimport join_definition from './lib/definitions/join'\nconst join = createUtility(join_definition)\n\nimport keepFirst_definition from './lib/definitions/keep-first'\nconst keepFirst = createUtility(keepFirst_definition)\n\nimport keepIntersection_definition from './lib/definitions/keep-intersection'\nconst keepIntersection = createUtility(keepIntersection_definition)\n\nimport keepWhen_definition from './lib/definitions/keep-when'\nconst keepWhen = createUtility(keepWhen_definition)\n\nimport keep_definition from './lib/definitions/keep'\nconst keep = createUtility(keep_definition)\n\nimport last_definition from './lib/definitions/last'\nconst last = createUtility(last_definition)\n\nimport mAppendAll_definition from './lib/definitions/m-append-all'\nconst mAppendAll = createUtility(mAppendAll_definition)\n\nimport mAppendTo_definition from './lib/definitions/m-append-to'\nconst mAppendTo = createUtility(mAppendTo_definition)\n\nimport mAppend_definition from './lib/definitions/m-append'\nconst mAppend = createUtility(mAppend_definition)\n\nimport mAssignOver_definition from './lib/definitions/m-assign-over'\nconst mAssignOver = createUtility(mAssignOver_definition)\n\nimport mCombine_definition from './lib/definitions/m-combine'\nconst mCombine = createUtility(mCombine_definition)\n\nimport mMap_definition from './lib/definitions/m-map'\nconst mMap = createUtility(mMap_definition)\n\nimport mOmit_definition from './lib/definitions/m-omit'\nconst mOmit = createUtility(mOmit_definition)\n\nimport mPrepend_definition from './lib/definitions/m-prepend'\nconst mPrepend = createUtility(mPrepend_definition)\n\nimport mSet_definition from './lib/definitions/m-set'\nconst mSet = createUtility(mSet_definition)\n\nimport mapKeys_definition from './lib/definitions/map-keys'\nconst mapKeys = createUtility(mapKeys_definition)\n\nimport map_definition from './lib/definitions/map'\nconst map = createUtility(map_definition)\n\nimport none_definition from './lib/definitions/none'\nconst none = createUtility(none_definition)\n\nimport omitAll_definition from './lib/definitions/omit-all'\nconst omitAll = createUtility(omitAll_definition)\n\nimport omitWhen_definition from './lib/definitions/omit-when'\nconst omitWhen = createUtility(omitWhen_definition)\n\nimport omit_definition from './lib/definitions/omit'\nconst omit = createUtility(omit_definition)\n\nimport passThrough_definition from './lib/definitions/pass-through'\nconst passThrough = createUtility(passThrough_definition)\n\nimport pickAllFrom_definition from './lib/definitions/pick-all-from'\nconst pickAllFrom = createUtility(pickAllFrom_definition)\n\nimport pickAll_definition from './lib/definitions/pick-all'\nconst pickAll = createUtility(pickAll_definition)\n\nimport pickWhen_definition from './lib/definitions/pick-when'\nconst pickWhen = createUtility(pickWhen_definition)\n\nimport prepend_definition from './lib/definitions/prepend'\nconst prepend = createUtility(prepend_definition)\n\nimport reduceFresh_definition from './lib/definitions/reduce-fresh'\nconst reduceFresh = createUtility(reduceFresh_definition)\n\nimport reduce_definition from './lib/definitions/reduce'\nconst reduce = createUtility(reduce_definition)\n\nimport returnFirstArgument_definition from './lib/definitions/return-first-argument'\nconst returnFirstArgument = createUtility(returnFirstArgument_definition)\n\nimport reverse_definition from './lib/definitions/reverse'\nconst reverse = createUtility(reverse_definition)\n\nimport setOfKeys_definition from './lib/definitions/set-of-keys'\nconst setOfKeys = createUtility(setOfKeys_definition)\n\nimport set_definition from './lib/definitions/set'\nconst set = createUtility(set_definition)\n\nimport startsWith_definition from './lib/definitions/starts-with'\nconst startsWith = createUtility(startsWith_definition)\n\nimport strictlyEquals_definition from './lib/definitions/strictly-equals'\nconst strictlyEquals = createUtility(strictlyEquals_definition)\n\nimport transformProperties_definition from './lib/definitions/transform-properties'\nconst transformProperties = createUtility(transformProperties_definition)\n\nimport truncateToNLines_definition from './lib/definitions/truncate-to-n-lines'\nconst truncateToNLines = createUtility(truncateToNLines_definition)\n\nimport unique_definition from './lib/definitions/unique'\nconst unique = createUtility(unique_definition)\n\nexport {\n  allContainedIn,\n  all,\n  alwaysReturn,\n  any,\n  appendAll,\n  appendTo,\n  append,\n  applyAt,\n  applyTo,\n  apply,\n  assignOverAll,\n  assignOverRecursively,\n  assignOver,\n  cloneDeep,\n  clone,\n  coerceTo,\n  combineAll,\n  combine,\n  construct,\n  construct_1arg,\n  containedIn,\n  containsAll,\n  containsOnly,\n  contains,\n  discardAll,\n  discardFirstWhile,\n  discardFirst,\n  discardLastWhile,\n  discardLast,\n  discardWhen,\n  discard,\n  findFirstWhen,\n  findFirst,\n  first,\n  flatten,\n  flow,\n  forEach,\n  getArrayOfKeys,\n  getArrayOfValues,\n  getCount,\n  getValueAtPath,\n  getValueAt,\n  getValueFrom,\n  hasKey,\n  hasOwnEnumerableKey,\n  invokeAt,\n  invoke,\n  isEmpty,\n  isFalsey,\n  isGreaterThan,\n  isLaden,\n  isLessThan,\n  isTruthy,\n  join,\n  keepFirst,\n  keepIntersection,\n  keepWhen,\n  keep,\n  last,\n  mAppendAll,\n  mAppendTo,\n  mAppend,\n  mAssignOver,\n  mCombine,\n  mMap,\n  mOmit,\n  mPrepend,\n  mSet,\n  mapKeys,\n  map,\n  none,\n  omitAll,\n  omitWhen,\n  omit,\n  passThrough,\n  pickAllFrom,\n  pickAll,\n  pickWhen,\n  prepend,\n  reduceFresh,\n  reduce,\n  returnFirstArgument,\n  reverse,\n  setOfKeys,\n  set,\n  startsWith,\n  strictlyEquals,\n  transformProperties,\n  truncateToNLines,\n  unique,\n}\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { docidToHash } from '../../lib/server/db'\nimport { dal } from 'server/db'\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'both-players-initialized'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 2,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test2EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test1EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ]).then(([player1Hash, player2Hash]) => {\n    return {\n      roomHash: hash,\n      roomId: _id,\n      roomRev: _rev,\n      player1Hash,\n      player2Hash,\n    }\n  })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return hash\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { docidToHash } from '../../lib/server/db'\nimport { dal } from 'server/db'\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { discardWhen, strictlyEquals } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC',\n  isUndefined = strictlyEquals(undefined)\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'only-player1-is-initialized'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 2,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test1EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test2EncryptedEmail, 2, hash),\n  ]).then(([player1Hash, player2Hash]) => {\n    return {\n      roomHash: hash,\n      roomId: _id,\n      roomRev: _rev,\n      player1Hash,\n      player2Hash,\n    }\n  })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = discardWhen(isUndefined)({\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  })\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return hash\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { alwaysReturn as justReturn, combine } from 'fes'\nimport {\n  dal,\n  docidToHash,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'player2-guessed-and-review'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 1,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test2EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test1EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ])\n    .then(([player1, player2]) => {\n      const idAndRev = pickIdAndRev(player2),\n        player2Data = removeCouchdbProperties(player2)\n\n      player2Data.guesses = [\n        { word: 'blast', wasReviewed: true, chosenLetter: 'a' },\n      ]\n\n      return dal.player\n        .update(combine(idAndRev)(player2Data))\n        .then(justReturn([player1, player2]))\n    })\n    .then(([player1, player2]) => {\n      return {\n        roomHash: hash,\n        roomId: _id,\n        roomRev: _rev,\n        player1Hash: docidToHash(player1._id),\n        player2Hash: docidToHash(player2._id),\n      }\n    })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return dal.player.get({ _id })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { alwaysReturn as justReturn, combine } from 'fes'\nimport {\n  dal,\n  docidToHash,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'player2-guessed-no-match-no-review'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 1,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test2EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test1EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ])\n    .then(([player1, player2]) => {\n      const idAndRev = pickIdAndRev(player2),\n        player2Data = removeCouchdbProperties(player2)\n\n      player2Data.guesses = [{ word: 'help' }]\n\n      return dal.player\n        .update(combine(idAndRev)(player2Data))\n        .then(justReturn([player1, player2]))\n    })\n    .then(([player1, player2]) => {\n      return {\n        roomHash: hash,\n        roomId: _id,\n        roomRev: _rev,\n        player1Hash: docidToHash(player1._id),\n        player2Hash: docidToHash(player2._id),\n      }\n    })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return dal.player.get({ _id })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { alwaysReturn as justReturn, combine } from 'fes'\nimport {\n  dal,\n  docidToHash,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'player2-guessed-no-review'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 1,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test2EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test1EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ])\n    .then(([player1, player2]) => {\n      const idAndRev = pickIdAndRev(player2),\n        player2Data = removeCouchdbProperties(player2)\n\n      player2Data.guesses = [{ word: 'blast' }]\n\n      return dal.player\n        .update(combine(idAndRev)(player2Data))\n        .then(justReturn([player1, player2]))\n    })\n    .then(([player1, player2]) => {\n      return {\n        roomHash: hash,\n        roomId: _id,\n        roomRev: _rev,\n        player1Hash: docidToHash(player1._id),\n        player2Hash: docidToHash(player2._id),\n      }\n    })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return dal.player.get({ _id })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { alwaysReturn as justReturn, combine } from 'fes'\nimport {\n  dal,\n  docidToHash,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'player2-must-review'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 2,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test1EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test2EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ])\n    .then(([player1, player2]) => {\n      const player1IdAndRev = pickIdAndRev(player1),\n        player2IdAndRev = pickIdAndRev(player2),\n        player1Data = removeCouchdbProperties(player1),\n        player2Data = removeCouchdbProperties(player2)\n\n      player1Data.guesses = [{ word: 'coast' }]\n      player2Data.guesses = [\n        { word: 'blast', wasReviewed: true, chosenLetter: 'a' },\n      ]\n\n      return Promise.all([\n        dal.player.update(combine(player1IdAndRev)(player1Data)),\n        dal.player.update(combine(player2IdAndRev)(player2Data)),\n      ]).then(justReturn([player1, player2]))\n    })\n    .then(([player1, player2]) => {\n      return {\n        roomHash: hash,\n        roomId: _id,\n        roomRev: _rev,\n        player1Hash: docidToHash(player1._id),\n        player2Hash: docidToHash(player2._id),\n      }\n    })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return dal.player.get({ _id })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\nimport { alwaysReturn as justReturn, combine } from 'fes'\nimport {\n  dal,\n  docidToHash,\n  pickIdAndRev,\n  removeCouchdbProperties,\n} from 'server/db'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'player2-must-guess'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      log(\n        `player 2 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player2Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 2,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test1EncryptedEmail, 1, hash, 'Space Ghost', 'coast'),\n    createAPlayer(test2EncryptedEmail, 2, hash, 'Wonder Woman', 'guest'),\n  ])\n    .then(([player1, player2]) => {\n      const player1IdAndRev = pickIdAndRev(player1),\n        player2IdAndRev = pickIdAndRev(player2),\n        player1Data = removeCouchdbProperties(player1),\n        player2Data = removeCouchdbProperties(player2)\n\n      player1Data.guesses = [\n        { word: 'coast', wasReviewed: true, chosenLetter: 's' },\n      ]\n      player2Data.guesses = [\n        { word: 'blast', wasReviewed: true, chosenLetter: 'a' },\n      ]\n\n      return Promise.all([\n        dal.player.update(combine(player1IdAndRev)(player1Data)),\n        dal.player.update(combine(player2IdAndRev)(player2Data)),\n      ]).then(justReturn([player1, player2]))\n    })\n    .then(([player1, player2]) => {\n      return {\n        roomHash: hash,\n        roomId: _id,\n        roomRev: _rev,\n        player1Hash: docidToHash(player1._id),\n        player2Hash: docidToHash(player2._id),\n      }\n    })\n}\n\nfunction createAPlayer(encryptedEmail, number, roomHash, displayName, word) {\n  const playerData = {\n    displayName,\n    encryptedEmail,\n    number,\n    roomHash,\n    word,\n  }\n\n  return dal.player.create(playerData).then(({ _id }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n    )\n\n    return dal.player.get({ _id })\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { docidToHash } from '../../lib/server/db'\nimport { dal } from 'server/db'\nimport { log } from 'universal/utils'\nimport { baseUrl } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst test1EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.u6Ps74veAJJWW1b/iPFes9iuT8rpoYC',\n  test2EncryptedEmail =\n    '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.zvRdVlidIL8krbeEJi2CJYTnMfi6hYC'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'room-exists'\n\nconst install = () => {\n  return Promise.all([\n    createRoom(),\n    createEmailSentRecord(test1EncryptedEmail, 'room-created'),\n    createEmailSentRecord(test2EncryptedEmail, 'invitation'),\n  ])\n    .then(createPlayers)\n    .then(roomAndPlayerData => {\n      const {\n        roomHash,\n        roomId,\n        roomRev,\n        player1Hash,\n        player2Hash,\n      } = roomAndPlayerData\n\n      log(\n        `player 1 room url: ${baseUrl.local}/room/` +\n          `${roomHash}/player/${player1Hash}\\n`\n      )\n\n      return dal.activeRoom.update({\n        _id: roomId,\n        _rev: roomRev,\n        player1Hash,\n        player2Hash,\n        playerNumberTurn: 2,\n      })\n    })\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createEmailSentRecord(to, type) {\n  return dal.emailSent.create({ to, type }).then(({ _id }) => {\n    logThenNewline(\n      dedent(`\n        emailSent:\n          _id: ${_id}\n          hash: ${docidToHash(_id)}\n      `)\n    )\n  })\n}\n\nfunction createRoom() {\n  return dal.activeRoom.create({}).then(({ _id, _rev }) => {\n    const hash = docidToHash(_id)\n    logThenNewline(\n      dedent(`\n        room:\n          _id: ${_id}\n          hash: ${hash}\n      `)\n    )\n\n    return { hash, _id, _rev }\n  })\n}\n\nfunction createPlayers([roomData]) {\n  const { hash, _id, _rev } = roomData\n  return Promise.all([\n    createAPlayer(test1EncryptedEmail, hash, 1),\n    createAPlayer(test2EncryptedEmail, hash, 2),\n  ]).then(([player1Hash, player2Hash]) => {\n    return {\n      roomHash: hash,\n      roomId: _id,\n      roomRev: _rev,\n      player1Hash,\n      player2Hash,\n    }\n  })\n}\n\nfunction createAPlayer(encryptedEmail, roomHash, number) {\n  return dal.player\n    .create({\n      encryptedEmail,\n      roomHash,\n      number,\n    })\n    .then(({ _id }) => {\n      const hash = docidToHash(_id)\n      logThenNewline(\n        dedent(`\n        player:\n          _id: ${_id}\n          hash: ${hash}\n          number: ${number}\n      `)\n      )\n\n      return hash\n    })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\nimport { docidToHash } from '../../lib/server/db'\nimport { dal } from 'server/db'\nimport { log } from 'universal/utils'\n\n//\n//------//\n// Init //\n//------//\n\nconst logThenNewline = msg => {\n  log(msg + '\\n')\n}\n\nconst encryptedEmail =\n  '$2b$04$7Umq.2nzEiMyGhgmQ2h8S.CsqjI/FojsBBWhLQ09HHL94QpyLTs1e'\n\n//\n//------//\n// Main //\n//------//\n\nconst name = 'unsubscription-exists'\n\nconst install = () =>\n  Promise.all([createUnsubscription(), createEmailSentRecord()])\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createUnsubscription() {\n  return dal.emailUnsubscription.create({\n    _id: encryptedEmail,\n    types: ['all', 'invitation', 'room-created'],\n  })\n}\n\nfunction createEmailSentRecord() {\n  return dal.emailSent\n    .create({\n      to: encryptedEmail,\n      type: 'room-created',\n    })\n    .then(({ _id }) => {\n      logThenNewline(\n        dedent(`\n          emailSent:\n            _id: ${_id}\n            hash: ${docidToHash(_id)}\n        `)\n      )\n    })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default { install, name }\n","//\n// README\n//   - This code assumes only one fixture will be installed at a time.\n//\n// TODO: extract the common code from each fixture so the fixtures themselves\n//   can be lightweight and composed of the shared pieces.  I imagine\n//   something like:\n// createRoom.then(createBothPlayers).then(createGuessForPlayer1).then(...)\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport api from 'server/api/couchdb'\n\nimport bothPlayersInitialized from './both-players-initialized'\nimport onlyPlayer1IsInitialized from './only-player1-is-initialized'\nimport player2GuessedAndReview from './player2-guessed-and-review'\nimport player2GuessedNoMatchNoReview from './player2-guessed-no-match-no-review'\nimport player2GuessedNoReview from './player2-guessed-no-review'\nimport player2MustReview from './player2-must-review'\nimport player2MustGuess from './player2-must-guess'\nimport roomExists from './room-exists'\nimport unsubscriptionExists from './unsubscription-exists'\n\nimport { log, noop, repeatString } from 'universal/utils'\nimport { map, mSet, passThrough } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst fixtures = getFixtures()\n\n//\n//------//\n// Main //\n//------//\n\nconst fixtureNameToInstall = passThrough(fixtures, [\n  map(createInstall),\n  mSet('none', noop),\n])\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createInstall({ install, name }) {\n  return () => {\n    logHeader(`installing fixture '${name}'`)\n\n    return install()\n      .then(() => api.replicateAllDbs(name))\n      .then(() => {\n        logHeader(`'${name}' installed`)\n      })\n  }\n}\n\nfunction logHeader(header) {\n  const border = repeatString(header.length)('-')\n  log(`${border}\\n${header}\\n${border}\\n`)\n}\n\nfunction getFixtures() {\n  return {\n    bothPlayersInitialized,\n    onlyPlayer1IsInitialized,\n    player2GuessedAndReview,\n    player2GuessedNoMatchNoReview,\n    player2GuessedNoReview,\n    player2MustReview,\n    player2MustGuess,\n    roomExists,\n    unsubscriptionExists,\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default fixtureNameToInstall\n","//---------//\n// Imports //\n//---------//\n\nimport {\n  combine,\n  getValueAt,\n  omitAll,\n  returnFirstArgument as identity,\n} from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst possibleCustomOptions = new Set(['allow404', 'returnRawResponse']),\n  allow404 = status => {\n    return (status >= 200 && status < 300) || status === 404\n  }\n\n//\n//------//\n// Main //\n//------//\n\nconst getAxiosOptions = (options = {}) => {\n  const derivedAxiosOptions = deriveAxiosOptions(options),\n    axiosOptions = omitAll(possibleCustomOptions)(options)\n\n  return combine(axiosOptions)(derivedAxiosOptions)\n}\n\nconst getResponseTransform = (options = {}) => {\n  return options.returnRawResponse ? identity : returnData\n}\n\nconst returnData = getValueAt('data')\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction deriveAxiosOptions(options) {\n  return options.allow404 ? { validateStatus: allow404 } : {}\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { getAxiosOptions, getResponseTransform, returnData }\n","//---------//\n// Imports //\n//---------//\n\nimport axios from 'axios'\n\nimport databaseNames from 'server/db/dal/database-names'\n\nimport { createCouchdbId } from 'server/db'\nimport { handleServerErrorSync } from 'server/utils'\nimport { resolveAll, then } from 'universal/utils'\nimport { baseUrl, couchdbAuth } from 'project-root/config/app'\nimport {\n  getAxiosOptions,\n  getResponseTransform,\n  returnData,\n} from 'universal/axios-helpers'\nimport {\n  flow,\n  isLaden,\n  join,\n  map,\n  mapKeys,\n  mMap,\n  omit,\n  omitAll,\n  passThrough,\n  prepend,\n} from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst couchdb = axios.create({\n  baseURL: baseUrl.couchdb,\n  auth: couchdbAuth,\n})\n\n//\n//------//\n// Main //\n//------//\n\nconst api = {\n  createDb,\n  createDbAccessor,\n  createDbAndAccessor,\n  deleteDb,\n  replicateAllDbs,\n  revertToFixture,\n}\n\nfunction createDbAccessor(name) {\n  return {\n    createDocument,\n    deleteDocument,\n    getDocument,\n    getDocumentAtRevision,\n    updateDocument,\n  }\n\n  // scoped helper functions\n\n  function createDocument(data) {\n    const error = approveId(data._id)\n    if (error) handleServerErrorSync(`error creating a ${name} record`, error)\n\n    return couchdb\n      .put(`/${name}/${data._id}`, omit('_id')(data))\n      .then(normalizeData)\n      .then(returnData)\n  }\n\n  function deleteDocument({ _id, _rev }, options) {\n    const error = approveIdAndRev(_id, _rev)\n    if (error) handleServerErrorSync(`error deleting a ${name} record`, error)\n\n    const maybeTransformResponse = getResponseTransform(options),\n      axiosOptions = getAxiosOptions(options)\n\n    return couchdb\n      .delete(`/${name}/${_id}?rev=${_rev}`, axiosOptions)\n      .then(maybeTransformResponse)\n  }\n\n  function getDocument({ _id }, options) {\n    const error = approveId(_id)\n    if (error) handleServerErrorSync(`error getting a ${name} record`, error)\n\n    const maybeTransformResponse = getResponseTransform(options),\n      axiosOptions = getAxiosOptions(options)\n\n    return couchdb\n      .get(`/${name}/${_id}`, axiosOptions)\n      .then(maybeTransformResponse)\n  }\n\n  function getDocumentAtRevision({ _id, _rev }) {\n    const error = approveIdAndRev(_id, _rev)\n    if (error) handleServerErrorSync(`error getting a ${name} record`, error)\n\n    return couchdb.get(`/${name}/${_id}?rev=${_rev}`).then(returnData)\n  }\n\n  function updateDocument(data) {\n    const { _id, _rev } = data,\n      error = approveIdAndRev(_id, _rev)\n    if (error) handleServerErrorSync(`error updating a ${name} record`, error)\n\n    data = omitAll(['_id', '_rev'])(data)\n    return couchdb\n      .put(`/${name}/${_id}?rev=${_rev}`, data)\n      .then(normalizeData)\n      .then(returnData)\n  }\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction approveId(_id) {\n  if (!_id) return new Error(\"The key '_id' is missing\")\n}\n\nfunction approveIdAndRev(_id, _rev) {\n  const missingKeys = []\n\n  if (!_id) missingKeys.push('_id')\n  if (!_rev) missingKeys.push('_rev')\n\n  if (isLaden(missingKeys)) {\n    return new Error(\n      `The following keys are missing: ${join(', ')(missingKeys)}`\n    )\n  }\n}\n\nfunction createDb(name) {\n  return couchdb.put(`/${name}`)\n}\n\nasync function createDbAndAccessor(name) {\n  await createDb(name)\n  return createDbAccessor(name)\n}\n\nfunction deleteDb(name, options) {\n  const axiosOptions = getAxiosOptions(options)\n  return couchdb.delete(`/${name}`, axiosOptions)\n}\n\nfunction normalizeData(response) {\n  //\n  // normalize the data\n  //   - id => _id\n  //   - rev => _rev\n  //     ** this keeps the api consistent -> simpler code\n  //\n  //   - ok => remove\n  //     ** unsure why this exists, seems to overlap the http status\n  //\n  response.data = passThrough(response.data, [\n    omit('ok'),\n    mapKeys(prepend('_')),\n  ])\n\n  return response\n}\n\nfunction replicateAllDbs(fixtureName) {\n  return passThrough(databaseNames, [\n    map(deletePreviousReplication),\n    resolveAll,\n    then(flow([mMap(replicate), resolveAll])),\n  ])\n\n  // scoped helper functions\n\n  function deletePreviousReplication(dbName) {\n    return Promise.all([\n      dbName,\n      deleteDb(getFixtureDbName(fixtureName, dbName), { allow404: true }),\n    ])\n  }\n\n  function replicate([dbName]) {\n    return couchdb.post(`/_replicate`, {\n      id: getFixtureDbName(fixtureName, dbName),\n      source: dbName,\n      target: getFixtureDbName(fixtureName, dbName),\n      create_target: true,\n    })\n  }\n}\n\nfunction revertToFixture(fixtureName) {\n  return passThrough(databaseNames, [\n    map(deleteCurrentDb),\n    resolveAll,\n    then(flow([mMap(restoreFixture), resolveAll])),\n  ])\n\n  // scoped helper functions\n\n  function deleteCurrentDb(dbName) {\n    return Promise.all([dbName, deleteDb(dbName)])\n  }\n\n  function restoreFixture([dbName]) {\n    return couchdb.post(`/_replicate`, {\n      id: createCouchdbId(),\n      source: getFixtureDbName(fixtureName, dbName),\n      target: dbName,\n      create_target: true,\n    })\n  }\n}\n\nfunction getFixtureDbName(fixtureName, dbName) {\n  return `${fixtureName}_${dbName}`\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default api\n","//---------//\n// Imports //\n//---------//\n\nimport normalizeField from './normalize-field'\nimport presetFields from './preset-fields'\nimport { assignOver, map, passThrough, transformProperties } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst {\n  closedReason,\n  displayName,\n  emailSentType,\n  emailUnsubscribeTypes,\n  guesses,\n  player1Hash,\n  player2Hash,\n  playerNumber,\n  playerNumberTurn,\n  playerWord,\n  roomHash,\n} = presetFields\n\n//\n//------//\n// Main //\n//------//\n\nconst databaseNameToDefinition = map(normalize)({\n  activeRoom: {\n    fields: [playerNumberTurn, player1Hash, player2Hash],\n  },\n  closedRoom: {\n    fields: [closedReason, roomHash],\n  },\n  emailSent: {\n    fields: ['to', emailSentType],\n  },\n  emailUnsubscription: {\n    //\n    // _id should be the encrypted email to ensure we don't duplicate entries\n    //\n    hasCustomId: true,\n    fields: [emailUnsubscribeTypes],\n  },\n  player: {\n    fields: [\n      'encryptedEmail',\n      displayName,\n      guesses,\n      playerNumber,\n      playerWord,\n      roomHash,\n    ],\n  },\n})\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction normalize(databaseDefinition) {\n  return passThrough(databaseDefinition, [\n    assignOver({\n      fields: [],\n    }),\n    transformProperties({\n      fields: map(normalizeField),\n    }),\n  ])\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default databaseNameToDefinition\n","import databaseNameToDefinition from './database-name-to-definition'\nimport { dashelize } from 'universal/utils'\nimport { mMap } from 'fes'\n\nexport default mMap(dashelize)(Object.keys(databaseNameToDefinition))\n","//---------//\n// Imports //\n//---------//\n\nimport { approveIsLaden } from 'universal/utils'\nimport { assignOver } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst normalizeField = aField => {\n  aField = typeof aField === 'string' ? { name: aField } : aField\n\n  return assignOver({\n    approve: approveIsLaden,\n    isRequired: true,\n  })(aField)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default normalizeField\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\nimport typeDetect from 'type-detect'\n\nimport normalizeField from './normalize-field'\nimport inputValidationInfo from 'universal/input-validation-info'\n\nimport { hasher } from 'server/utils'\nimport { approveIsLadenString, truncate } from 'universal/utils'\nimport { approveEmailType, validEmailTypes } from 'universal/email/types'\nimport {\n  allContainedIn,\n  alwaysReturn,\n  containedIn,\n  containsAll,\n  discardAll,\n  discardWhen,\n  isLaden,\n  join,\n  keepFirst,\n  map,\n  passThrough,\n} from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst validReasons = new Set(['game finished']),\n  toCommaList = join(', '),\n  availableReasons = toCommaList(validReasons),\n  isValidReason = containedIn(validReasons),\n  approveWord = inputValidationInfo.initPlayer.body.word.approve,\n  requiredGuessKeys = new Set(['word']),\n  validGuessKeys = new Set([\n    'chosenLetter',\n    'isCorrect',\n    'isValid',\n    'wasReviewed',\n    'word',\n  ])\n\n//\n//------//\n// Main //\n//------//\n\nconst presetFields = map(normalizeField)({\n  _id: {\n    name: '_id',\n    approve: approveIsLadenString,\n  },\n  _rev: {\n    name: '_rev',\n    approve: approveIsLadenString,\n  },\n  closedReason: {\n    name: 'reason',\n    approve: value => {\n      if (!isValidReason(value)) {\n        return dedent(`\n          '${value}' is an invalid reason\n          reasons available: ${availableReasons}\n        `)\n      }\n    },\n  },\n  displayName: {\n    name: 'displayName',\n    isRequired: false,\n  },\n  emailSentType: {\n    name: 'type',\n    approve: approveEmailType.send,\n  },\n  emailUnsubscribeTypes: {\n    name: 'types',\n    approve: value => {\n      const valueType = typeDetect(value)\n      if (valueType !== 'Array') {\n        return dedent(`\n          The field 'types' must be an array of valid unsubscribe types\n          type of value passed: ${valueType}\n          value passed: ${truncate(value)}\n        `)\n      }\n\n      const invalidTypes = discardAll(validEmailTypes.unsubscribe)(value)\n      if (isLaden(invalidTypes)) {\n        return dedent(`\n          Some invalid unsubscribe email types were passed\n          invalid types passed: ${toCommaList(invalidTypes)}\n          types available: all, ${toCommaList(validEmailTypes.unsubscribe)}\n        `)\n      }\n    },\n  },\n  guesses: {\n    name: 'guesses',\n    autogenerate: alwaysReturn([]),\n    approve: value => {\n      const valueType = typeDetect(value)\n      if (valueType !== 'Array') {\n        return dedent(`\n          The field 'guesses' must be an array\n          type of value passed: ${valueType}\n          value passed: ${truncate(value)}\n        `)\n      }\n\n      const invalidGuesses = discardWhen(isValidGuess)(value)\n      if (isLaden(invalidGuesses)) {\n        const invalidGuessesString = passThrough(invalidGuesses, [\n          keepFirst(3),\n          map(truncate),\n        ])\n        return dedent(`\n          Some invalid guesses were passed\n          invalid guesses passed: ${invalidGuessesString}\n        `)\n      }\n    },\n  },\n  player1Hash: {\n    name: 'player1Hash',\n    isRequired: false,\n  },\n  player2Hash: {\n    name: 'player2Hash',\n    isRequired: false,\n  },\n  playerNumber: {\n    name: 'number',\n    approve: value => {\n      if (value !== 1 && value !== 2) {\n        return dedent(`\n          Player number must be 1 or 2\n          value passed: ${truncate(value)}\n        `)\n      }\n    },\n  },\n  playerNumberTurn: {\n    name: 'playerNumberTurn',\n    approve: value => {\n      if (value !== 1 && value !== 2) {\n        return dedent(`\n          Player number turn must be 1 or 2\n          value passed: ${truncate(value)}\n        `)\n      }\n    },\n    autogenerate: alwaysReturn(2),\n  },\n  playerWord: {\n    name: 'word',\n    approve: approveWord,\n    isRequired: false,\n  },\n  roomHash: {\n    name: 'roomHash',\n    approve: value => {\n      if (hasher.decode(value).length !== 2) {\n        return `'${value}' is an invalid roomHash.  It doesn't decode to two numbers`\n      }\n    },\n  },\n})\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction isValidGuess(value) {\n  const dirtyKeys = Object.keys(value)\n  return (\n    typeof value === 'object' &&\n    allContainedIn(validGuessKeys)(dirtyKeys) &&\n    containsAll(requiredGuessKeys)(dirtyKeys)\n  )\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default presetFields\n","//---------//\n// Imports //\n//---------//\n\nimport databaseNames from './dal/database-names'\nimport { map, passThrough } from 'fes'\nimport { couchdb } from 'server/api'\n\n//\n//------//\n// Init //\n//------//\n\nconst { createDb, deleteDb } = couchdb,\n  pAll = arrayOfPromises => Promise.all(arrayOfPromises),\n  deleteIfExists = name => deleteDb(name, { allow404: true })\n\n//\n//------//\n// Main //\n//------//\n\nconst createAllDatabases = () =>\n    passThrough(databaseNames, [map(createDb), pAll]),\n  deleteAllDatabases = () =>\n    passThrough(databaseNames, [map(deleteIfExists), pAll])\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { createAllDatabases, deleteAllDatabases }\n","//---------//\n// Imports //\n//---------//\n\nimport couchdbBase64 from 'couchdb-base64'\nimport moment from 'moment'\n\nimport { hasher } from 'server/utils'\nimport { discardFirst, keepFirst } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst myEpoch = moment.utc('2018.01.01', 'YYYY.MM.DD'),\n  max3ByteUInt = 2 ** 24,\n  timestampBits = 36,\n  randomBits = 24,\n  numberOfTimestampCharacters = timestampBits / 6,\n  getTimestampCharactersFrom = keepFirst(numberOfTimestampCharacters),\n  getRandomCharactersFrom = discardFirst(numberOfTimestampCharacters)\n\n//\n//------//\n// Main //\n//------//\n\n//\n// creates a 60-bit string.  The first 36 bits are the seconds since\n//   'myEpoch'.  The next 24 bits are random\n//\n// 36 bits of seconds gives us unique timestamps til year 4195\n// 24 bits of randomness is overkill to prevent collisions for ids created\n//   on the same second\n//\n// a great article on creating ids can be found hurr:\n//   https://eager.io/blog/how-long-does-an-id-need-to-be/\n//\n// Note: I don't expect to be reaching any performance bottlenecks with ids, but\n//   I did want to follow best-practice for sake of learning.  In that regard,\n//   here is relevant couchdb documentation for document id performance:\n//   http://docs.couchdb.org/en/2.1.1/maintenance/performance.html#document-s-id\n//\nconst createCouchdbId = () => {\n  const secondsSinceMyEpoch = moment.utc().diff(myEpoch, 'seconds'),\n    random3ByteUInt = createRandom3ByteUInt()\n\n  //\n  // 'base64' below refers to the custom base64 encoding provided\n  //   by couchdb-base64\n  //\n\n  const base64Timestamp = encodeTimestamp(secondsSinceMyEpoch),\n    base64Random = encodeRandomUInt(random3ByteUInt)\n\n  return base64Timestamp + base64Random\n}\n\n//\n// docid is a couchdb-base64 encoded string\n//\nconst docidToHash = docid => {\n  const secondsSinceMyEpoch = getSecondsSinceMyEpoch(docid),\n    random3ByteUInt = getRandom3ByteUInt(docid)\n\n  return hasher.encode(secondsSinceMyEpoch, random3ByteUInt)\n}\n\nconst getMomentCreated = docid =>\n  moment(myEpoch).add(getSecondsSinceMyEpoch(docid), 'seconds')\n\nconst getRandom3ByteUInt = docid =>\n  couchdbBase64.decodeToUInt(getRandomCharactersFrom(docid))\n\nconst getSecondsSinceMyEpoch = docid =>\n  couchdbBase64.decodeToUInt(getTimestampCharactersFrom(docid))\n\nconst hashToDocid = hash => {\n  const [secondsSinceMyEpoch, randome3ByteUInt] = hasher.decode(hash),\n    encodedTimestamp = encodeTimestamp(secondsSinceMyEpoch),\n    encodedRandomUInt = encodeRandomUInt(randome3ByteUInt)\n\n  return encodedTimestamp + encodedRandomUInt\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction encodeTimestamp(secondsSinceMyEpoch) {\n  return couchdbBase64.encodeFromUInt({\n    uint: secondsSinceMyEpoch,\n    totalBits: timestampBits,\n  })\n}\n\nfunction encodeRandomUInt(random3ByteUInt) {\n  return couchdbBase64.encodeFromUInt({\n    uint: random3ByteUInt,\n    totalBits: randomBits,\n  })\n}\n\nfunction createRandom3ByteUInt() {\n  return Math.floor(Math.random() * max3ByteUInt)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport {\n  createCouchdbId,\n  docidToHash,\n  getMomentCreated,\n  getRandom3ByteUInt,\n  getSecondsSinceMyEpoch,\n  hashToDocid,\n}\n","//---------//\n// Imports //\n//---------//\n\nimport { omitWhen, pickAll, startsWith } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst pickIdAndRev = pickAll(['_id', '_rev'])\n\nconst removeCouchdbProperties = omitWhen(startsWith('_'))\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { pickIdAndRev, removeCouchdbProperties }\n","export const methods = new Set(['create', 'delete', 'get', 'update'])\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\nimport typeDetect from 'type-detect'\n\nimport presetFields from './preset-fields'\n\nimport { methods } from './helpers'\nimport { isTruthy, truncateDirtyArgs, truncate } from 'universal/utils'\nimport {\n  containedIn,\n  discardAll,\n  discardWhen,\n  getArrayOfKeys,\n  getValueAt,\n  hasOwnEnumerableKey as hasKey,\n  isEmpty,\n  isLaden,\n  join,\n  keepWhen,\n  map,\n  mAppend,\n  mSet,\n  omit,\n  omitAll,\n  passThrough,\n  pickAll,\n  reduce,\n  transformProperties,\n} from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst shouldApprove = getShouldApprove(),\n  { keys } = Object,\n  { _id, _rev } = presetFields,\n  propertyIsTruthy = getValueAt,\n  validOptions = new Set(['allow404', 'returnRawResponse'])\n\n//\n//------//\n// Main //\n//------//\n\nconst createMethodToApproveArgs = databaseDefinition => {\n  const { fields, hasCustomId } = databaseDefinition\n\n  return reduce((methodToApproveArgs, method) => {\n    let fieldsToApprove = []\n\n    if (shouldApprove.fields(method)) fieldsToApprove.push(...fields)\n    if (shouldApprove.documentId(method)) fieldsToApprove.push(_id)\n    if (shouldApprove.revision(method)) fieldsToApprove.push(_rev)\n\n    if (method === 'create') {\n      fieldsToApprove = discardWhen(hasKey('autogenerate'))(fieldsToApprove)\n    }\n\n    const approveArgs = createApproveArgs(fieldsToApprove, method, hasCustomId)\n\n    return mSet(method, approveArgs)(methodToApproveArgs)\n  }, {})(methods)\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction createApproveArgs(fieldsToApprove, method, hasCustomId) {\n  const approveFieldNames = createApproveFieldNames(fieldsToApprove),\n    fieldNameToApprove = reduce(toApprove, {})(fieldsToApprove)\n\n  return (...args) => {\n    if (isEmpty(args)) return new Error('You must pass a single argument')\n    if (args.length > 2) {\n      const truncatedArgs = truncateDirtyArgs(args)\n\n      return new Error(\n        dedent(`\n          You passed more than two arguments\n          Arguments passed:\n\n          ${truncatedArgs}\n        `)\n      )\n    }\n    let firstArg = args[0]\n    const firstArgType = typeDetect(firstArg),\n      secondArg = args[1] || {},\n      secondArgType = typeDetect(secondArg)\n\n    if (firstArgType !== 'Object') {\n      return new Error(\n        dedent(`\n          The first argument passed was not type 'Object' (via type-detect)\n          Type: ${firstArgType}\n          nArg: ${truncate(firstArg)}\n        `)\n      )\n    }\n\n    if (secondArgType !== 'Object') {\n      return new Error(\n        dedent(`\n          The second argument passed was not type 'Object' (via type-detect)\n          Type: ${secondArgType}\n          Arg: ${truncate(secondArg)}\n        `)\n      )\n    }\n\n    const optionsError = approveOptions(secondArg)\n    if (optionsError) return optionsError\n\n    if (method === 'create' && hasCustomId) {\n      if (!firstArg._id) {\n        return new Error(\n          dedent(`\n            This database requires you pass a custom _id\n            Arg: ${truncate(firstArg)}\n          `)\n        )\n      }\n      firstArg = omit('_id')(firstArg)\n    }\n\n    const error = approveFieldNames(firstArg)\n    if (error) return error\n\n    const fieldToErrorMessage = passThrough(firstArg, [\n      transformProperties(fieldNameToApprove),\n      keepWhen(isTruthy),\n    ])\n\n    if (isLaden(fieldToErrorMessage)) {\n      const invalidFields = pickAll(keys(fieldToErrorMessage))(firstArg),\n        truncatedFields = truncateDirtyArgs(invalidFields)\n\n      const errorReasons = passThrough(fieldToErrorMessage, [\n        reduce(toArrayOfReasons, []),\n        join('\\n\\n'),\n      ])\n\n      const invalidFieldsMessage = `The following fields are invalid: ${truncatedFields}`,\n        errorReasonMessage = dedent(`\n          They are invalid for the following reasons:\n\n          ${errorReasons}\n        `)\n\n      return new Error(`${invalidFieldsMessage}\\n\\n${errorReasonMessage}`)\n    }\n  }\n}\n\nfunction createApproveFieldNames(fieldsToApprove) {\n  const validFieldNames = map(getValueAt('name'))(fieldsToApprove),\n    requiredFieldNames = passThrough(fieldsToApprove, [\n      keepWhen(propertyIsTruthy('isRequired')),\n      map(getValueAt('name')),\n    ])\n\n  return fieldsObject => {\n    const fieldNamesPassed = keys(fieldsObject),\n      invalidFields = omitAll(validFieldNames)(fieldsObject)\n\n    if (isLaden(invalidFields)) {\n      const invalidFieldsErrorMessage = truncateDirtyArgs(invalidFields),\n        fieldsAllowedMessage = isLaden(validFieldNames)\n          ? join(', ')(validFieldNames)\n          : '<none>'\n\n      return new Error(\n        dedent(`\n          Invalid fields were passed\n          Fields allowed: ${fieldsAllowedMessage}\n          Fields passed: ${invalidFieldsErrorMessage}\n        `)\n      )\n    }\n\n    const missingFields = discardAll(fieldNamesPassed)(requiredFieldNames)\n    if (isLaden(missingFields)) {\n      return new Error(\n        `The following fields are missing: ${join(', ')(missingFields)}`\n      )\n    }\n  }\n}\n\nfunction toApprove(fieldToApprove, field) {\n  return mSet(field.name, field.approve)(fieldToApprove)\n}\n\nfunction getShouldApprove() {\n  return {\n    documentId: containedIn(['delete', 'get', 'update']),\n    fields: containedIn(['create', 'update']),\n    revision: containedIn(['delete', 'update']),\n  }\n}\n\nfunction toArrayOfReasons(result, reason, key) {\n  return mAppend(`${key}: ${reason}`)(result)\n}\n\nfunction approveOptions(secondArg) {\n  const invalidKeys = passThrough(secondArg, [\n    getArrayOfKeys,\n    discardAll(validOptions),\n  ])\n\n  if (isLaden(invalidKeys)) {\n    return new Error(\n      dedent(`\n        Invalid options were passed\n        Options allowed: ${join(', ')(validOptions)}\n        Invalid options passed: ${join(', ')(invalidKeys)}\n      `)\n    )\n  }\n\n  const invalidOptions = discardWhen(isBoolean)(secondArg)\n  if (isLaden(invalidOptions)) {\n    return new Error(\n      dedent(`\n        All options must be typeof boolean\n        Invalid options: ${truncateDirtyArgs(invalidOptions)}\n      `)\n    )\n  }\n}\n\nfunction isBoolean(value) {\n  return typeof value === 'boolean'\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createMethodToApproveArgs\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { truncateDirtyArgs } from 'universal/utils'\nimport { mSet, reduce } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst methodNameToAction = getMethodNameToAction(),\n  setOfVowels = new Set('aeiou')\n\n//\n//------//\n// Main //\n//------//\n\nconst sections = ['couchdb', 'fallback', 'invalidArgs'],\n  sectionToCreateErrorMessage = reduce(toCreateMessage, {})(sections)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction toCreateMessage(sectionToCreateMessage, section) {\n  return mSet(section, createMessage)(sectionToCreateMessage)\n\n  function createMessage(\n    methodName,\n    databaseName,\n    args,\n    invalidArgsMessage = ''\n  ) {\n    const action = methodNameToAction[methodName],\n      firstLetterIsVowel = setOfVowels.has(databaseName[0]),\n      aOrAn = firstLetterIsVowel ? 'an' : 'a',\n      friendly = `${action} ${aOrAn} ${databaseName} record`,\n      truncatedArgs = truncateDirtyArgs(args)\n\n    let detailed = dedent(`\n      Error occurred while ${friendly}\n\n      section: ${section}\n    `)\n\n    if (invalidArgsMessage) {\n      detailed += `\\n${invalidArgsMessage}`\n    }\n    detailed += `\\n\\n${truncatedArgs}`\n\n    return {\n      friendly,\n      detailed,\n    }\n  }\n}\n\nfunction getMethodNameToAction() {\n  return {\n    create: 'creating',\n    delete: 'deleting',\n    get: 'getting',\n    update: 'updating',\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default sectionToCreateErrorMessage\n","//\n// README\n//  - This code reads a little awkwardly because DAL often means\n//    \"database access layer\".  Here however I'm using it to mean the\n//    \"Data access layer\" because it accesses multiple databases.  I'm new to\n//    couchdb and, for better or worse, am trying an approach where each\n//    database is basically a table in rdbms land.\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport createMethodToApproveArgs from './create-method-to-approve-args'\nimport databaseNameToDefinition from './database-name-to-definition'\nimport sectionToCreateErrorMessage from './section-to-create-error-message'\n\nimport { methods } from './helpers'\nimport { couchdb } from 'server/api'\nimport { createCouchdbId } from '../couchdb-id-utils'\nimport { dashelize } from 'universal/utils'\nimport { handleServerError, handleServerErrorSync } from 'server/utils'\nimport {\n  assignOver,\n  combine,\n  hasOwnEnumerableKey as hasKey,\n  invoke,\n  keepWhen,\n  map,\n  mMap,\n  mSet,\n  passThrough,\n  reduce,\n} from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst databaseNameToAccessLayer = mMap(definitionToAccessLayer)(\n    databaseNameToDefinition\n  ),\n  defaultOptions = {\n    returnRawResponse: false,\n    allow404: false,\n  },\n  applyDefaults = assignOver(defaultOptions)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction definitionToAccessLayer(databaseDefinition, databaseName) {\n  const { fields, hasCustomId } = databaseDefinition\n\n  const couchdbAccessor = couchdb.createDbAccessor(dashelize(databaseName)),\n    methodToApproveArgs = createMethodToApproveArgs(databaseDefinition),\n    fieldToAutogenerate = passThrough(fields, [\n      keepWhen(hasKey('autogenerate')),\n      reduce(\n        (result, field) => mSet(field.name, field.autogenerate)(result),\n        {}\n      ),\n    ])\n\n  return reduce(toAccessLayer, {})(methods)\n\n  // helper functions scoped to 'definitionToAccessLayer'\n\n  function toAccessLayer(result, method) {\n    return mSet(method, accessor)(result)\n\n    // helper functions scoped to 'toAccessLayer'\n\n    function accessor(...args) {\n      const errorArgs = [method, databaseName, args],\n        reject = (section, error) => {\n          const message = sectionToCreateErrorMessage[section](...errorArgs)\n\n          error.message = message.detailed + '\\n\\n' + error.message\n          return handleServerErrorSync(message.friendly, error)\n        }\n\n      try {\n        const error = methodToApproveArgs[method](...args)\n        if (error) return reject('invalidArgs', error)\n\n        // input is valid woo woo\n\n        let validArg = args[0],\n          couchdbMethod = `${method}Document`\n\n        const options = applyDefaults(args[1] || {})\n\n        if (method === 'get' && validArg._rev) {\n          couchdbMethod += 'AtRevision'\n        } else if (method === 'create') {\n          const autogeneratedFields = map(invoke)(fieldToAutogenerate)\n\n          validArg = combine(validArg)(autogeneratedFields)\n\n          if (!validArg._id) validArg._id = createCouchdbId()\n        }\n\n        if (hasCustomId) validArg._id = encodeURIComponent(validArg._id)\n\n        return couchdbAccessor[couchdbMethod](validArg, options).catch(\n          handleServerError(sectionToCreateErrorMessage.couchdb, errorArgs)\n        )\n      } catch (error) {\n        return reject('fallback', error)\n      }\n    }\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default databaseNameToAccessLayer\n","export * from './create-and-delete-all-dbs'\nexport * from './couchdb-id-utils'\nexport * from './helpers'\nexport { default as dal } from './dal'\n","module.exports = \"<!doctype html>\\n<html>\\n\\n<head>\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width\\\" />\\n  <meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\" />\\n  <title>You Are Invited</title>\\n  <style>\\n    /* -------------------------------------\\n          GLOBAL RESETS\\n      ------------------------------------- */\\n\\n    img {\\n      border: none;\\n      -ms-interpolation-mode: bicubic;\\n      max-width: 100%;\\n    }\\n\\n    body {\\n      background-color: #f6f6f6;\\n      font-family: sans-serif;\\n      -webkit-font-smoothing: antialiased;\\n      font-size: 14px;\\n      line-height: 1.4;\\n      margin: 0;\\n      padding: 0;\\n      -ms-text-size-adjust: 100%;\\n      -webkit-text-size-adjust: 100%;\\n    }\\n\\n    table {\\n      border-collapse: separate;\\n      mso-table-lspace: 0pt;\\n      mso-table-rspace: 0pt;\\n      width: 100%;\\n    }\\n\\n    table td {\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      vertical-align: top;\\n    }\\n\\n    /* -------------------------------------\\n          BODY & CONTAINER\\n      ------------------------------------- */\\n\\n    .body {\\n      background-color: #f6f6f6;\\n      width: 100%;\\n    }\\n\\n    /* Set a max-width, and make it display as block so it will automatically stretch to that width, but will also shrink down on a phone or something */\\n\\n    .container {\\n      display: block;\\n      Margin: 0 auto !important;\\n      /* makes it centered */\\n      max-width: 580px;\\n      padding: 10px;\\n      width: 580px;\\n    }\\n\\n    /* This should also be a block element, so that it will fill 100% of the .container */\\n\\n    .content {\\n      box-sizing: border-box;\\n      display: block;\\n      Margin: 0 auto;\\n      max-width: 580px;\\n      padding: 10px;\\n    }\\n\\n    /* -------------------------------------\\n          HEADER, FOOTER, MAIN\\n      ------------------------------------- */\\n\\n    .main {\\n      background: #ffffff;\\n      border-radius: 3px;\\n      width: 100%;\\n    }\\n\\n    .wrapper {\\n      box-sizing: border-box;\\n      padding: 20px;\\n    }\\n\\n    .footer {\\n      clear: both;\\n      Margin-top: 10px;\\n      text-align: center;\\n      width: 100%;\\n    }\\n\\n    .footer td {\\n      padding-top: 3px;\\n      padding-bottom: 3px;\\n    }\\n\\n    .footer td,\\n    .footer p,\\n    .footer span,\\n    .footer a {\\n      color: #999999;\\n      font-size: 12px;\\n      text-align: center;\\n    }\\n\\n    /* -------------------------------------\\n          TYPOGRAPHY\\n      ------------------------------------- */\\n\\n    h1,\\n    h2,\\n    h3,\\n    h4 {\\n      color: #000000;\\n      font-family: sans-serif;\\n      font-weight: 400;\\n      line-height: 1.4;\\n      margin: 0;\\n      Margin-bottom: 30px;\\n    }\\n\\n    h1 {\\n      font-size: 35px;\\n      font-weight: 300;\\n      text-align: center;\\n      text-transform: capitalize;\\n    }\\n\\n    p,\\n    ul,\\n    ol {\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      font-weight: normal;\\n      margin: 0;\\n      Margin-bottom: 15px;\\n    }\\n\\n    p li,\\n    ul li,\\n    ol li {\\n      list-style-position: inside;\\n      margin-left: 5px;\\n    }\\n\\n    a {\\n      color: #3498db;\\n      text-decoration: underline;\\n    }\\n\\n    /* -------------------------------------\\n          BUTTONS\\n      ------------------------------------- */\\n\\n    .btn {\\n      box-sizing: border-box;\\n      width: 100%;\\n    }\\n\\n    .btn>tbody>tr>td {\\n      padding-bottom: 22px;\\n      /*\\n        padding-bottom 22 = 15 + 7, where 15 = margin-down for the above\\n        p element\\n      */\\n      padding-top: 7px;\\n    }\\n\\n    .btn table {\\n      width: auto;\\n    }\\n\\n    .btn table td {\\n      background-color: #ffffff;\\n      border-radius: 5px;\\n      text-align: center;\\n    }\\n\\n    .btn a {\\n      background-color: #ffffff;\\n      border: solid 1px #4caf50;\\n      border-radius: 5px;\\n      box-sizing: border-box;\\n      color: #4caf50;\\n      cursor: pointer;\\n      display: inline-block;\\n      font-size: 14px;\\n      font-weight: bold;\\n      margin: 0;\\n      padding: 12px 25px;\\n      text-decoration: none;\\n      text-transform: capitalize;\\n    }\\n\\n    .btn-primary table td {\\n      background-color: #4caf50;\\n    }\\n\\n    .btn-primary a {\\n      background-color: #4caf50;\\n      border-color: #4caf50;\\n      color: #ffffff;\\n    }\\n\\n    /* -------------------------------------\\n          OTHER STYLES THAT MIGHT BE USEFUL\\n      ------------------------------------- */\\n\\n    .last {\\n      margin-bottom: 0;\\n    }\\n\\n    .first {\\n      margin-top: 0;\\n    }\\n\\n    .align-center {\\n      text-align: center;\\n    }\\n\\n    .align-right {\\n      text-align: right;\\n    }\\n\\n    .align-left {\\n      text-align: left;\\n    }\\n\\n    .clear {\\n      clear: both;\\n    }\\n\\n    .mt0 {\\n      margin-top: 0;\\n    }\\n\\n    .mb0 {\\n      margin-bottom: 0;\\n    }\\n\\n    .powered-by a {\\n      text-decoration: none;\\n    }\\n\\n    hr {\\n      border: 0;\\n      border-bottom: 1px solid #f6f6f6;\\n      Margin: 20px 0;\\n    }\\n\\n    /* -------------------------------------\\n          RESPONSIVE AND MOBILE FRIENDLY STYLES\\n      ------------------------------------- */\\n\\n    @media only screen and (max-width: 620px) {\\n      table[class=body] h1 {\\n        font-size: 28px !important;\\n        margin-bottom: 10px !important;\\n      }\\n      table[class=body] p,\\n      table[class=body] ul,\\n      table[class=body] ol,\\n      table[class=body] td,\\n      table[class=body] span,\\n      table[class=body] a {\\n        font-size: 16px !important;\\n      }\\n      table[class=body] .wrapper,\\n      table[class=body] .article {\\n        padding: 10px !important;\\n      }\\n      table[class=body] .content {\\n        padding: 0 !important;\\n      }\\n      table[class=body] .container {\\n        padding: 0 !important;\\n        width: 100% !important;\\n      }\\n      table[class=body] .main {\\n        border-left-width: 0 !important;\\n        border-radius: 0 !important;\\n        border-right-width: 0 !important;\\n      }\\n      table[class=body] .btn table {\\n        width: 100% !important;\\n      }\\n      table[class=body] .btn a {\\n        width: 100% !important;\\n      }\\n      table[class=body] .img-responsive {\\n        height: auto !important;\\n        max-width: 100% !important;\\n        width: auto !important;\\n      }\\n    }\\n\\n    /* -------------------------------------\\n          PRESERVE THESE STYLES IN THE HEAD\\n      ------------------------------------- */\\n\\n    @media all {\\n      .ExternalClass {\\n        width: 100%;\\n      }\\n      .ExternalClass,\\n      .ExternalClass p,\\n      .ExternalClass span,\\n      .ExternalClass font,\\n      .ExternalClass td,\\n      .ExternalClass div {\\n        line-height: 100%;\\n      }\\n      .apple-link a {\\n        color: inherit !important;\\n        font-family: inherit !important;\\n        font-size: inherit !important;\\n        font-weight: inherit !important;\\n        line-height: inherit !important;\\n        text-decoration: none !important;\\n      }\\n    }\\n\\n  </style>\\n</head>\\n\\n<body class=\\\"\\\">\\n  <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"body\\\">\\n    <tr>\\n      <td>&nbsp;</td>\\n      <td class=\\\"container\\\">\\n        <div class=\\\"content\\\">\\n\\n          <!-- START CENTERED WHITE CONTAINER -->\\n          <table class=\\\"main\\\">\\n\\n            <!-- START MAIN CONTENT AREA -->\\n            <tr>\\n              <td class=\\\"wrapper\\\">\\n                <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n                  <tr>\\n                    <td>\\n                      <p>\\n                        Someone has invited you to join them in a game of Pass The Quill\\n                      </p>\\n\\n                      <p>\\n                        Click the button below to enter the game room and begin playing\\n                      </p>\\n\\n                      <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"btn btn-primary\\\">\\n                        <tbody>\\n                          <tr>\\n                            <td align=\\\"left\\\">\\n                              <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n                                <tbody>\\n                                  <tr>\\n                                    <td> <a href=\\\"{{ global.externalBaseUrl }}/room/{{ roomHash }}/player/{{ playerHash }}\\\" target=\\\"_blank\\\">Enter Room</a> </td>\\n                                  </tr>\\n                                </tbody>\\n                              </table>\\n                            </td>\\n                          </tr>\\n                        </tbody>\\n                      </table>\\n                      <p>Good luck!</p>\\n                    </td>\\n                  </tr>\\n                </table>\\n              </td>\\n            </tr>\\n\\n            <!-- END MAIN CONTENT AREA -->\\n          </table>\\n\\n          <!-- START FOOTER -->\\n          <div class=\\\"footer\\\">\\n            <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n              <tr>\\n                <td>\\n                  <span class=\\\"apple-link\\\">Pass The Quill</span>\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscribe/invitation/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Unsubscribe</a> from 'invitation' emails\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscribe/all/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Unsubscribe</a> from all emails\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscribed/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Manage</a> your subscriptions\\n                </td>\\n              </tr>\\n            </table>\\n          </div>\\n          <!-- END FOOTER -->\\n\\n          <!-- END CENTERED WHITE CONTAINER -->\\n        </div>\\n      </td>\\n      <td>&nbsp;</td>\\n    </tr>\\n  </table>\\n</body>\\n\\n</html>\\n\"","module.exports = \"<!doctype html>\\n<html>\\n\\n<head>\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width\\\" />\\n  <meta http-equiv=\\\"Content-Type\\\" content=\\\"text/html; charset=UTF-8\\\" />\\n  <title>You Created A Room</title>\\n  <style>\\n    /* -------------------------------------\\n          GLOBAL RESETS\\n      ------------------------------------- */\\n\\n    img {\\n      border: none;\\n      -ms-interpolation-mode: bicubic;\\n      max-width: 100%;\\n    }\\n\\n    body {\\n      background-color: #f6f6f6;\\n      font-family: sans-serif;\\n      -webkit-font-smoothing: antialiased;\\n      font-size: 14px;\\n      line-height: 1.4;\\n      margin: 0;\\n      padding: 0;\\n      -ms-text-size-adjust: 100%;\\n      -webkit-text-size-adjust: 100%;\\n    }\\n\\n    table {\\n      border-collapse: separate;\\n      mso-table-lspace: 0pt;\\n      mso-table-rspace: 0pt;\\n      width: 100%;\\n    }\\n\\n    table td {\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      vertical-align: top;\\n    }\\n\\n    /* -------------------------------------\\n          BODY & CONTAINER\\n      ------------------------------------- */\\n\\n    .body {\\n      background-color: #f6f6f6;\\n      width: 100%;\\n    }\\n\\n    /* Set a max-width, and make it display as block so it will automatically stretch to that width, but will also shrink down on a phone or something */\\n\\n    .container {\\n      display: block;\\n      Margin: 0 auto !important;\\n      /* makes it centered */\\n      max-width: 580px;\\n      padding: 10px;\\n      width: 580px;\\n    }\\n\\n    /* This should also be a block element, so that it will fill 100% of the .container */\\n\\n    .content {\\n      box-sizing: border-box;\\n      display: block;\\n      Margin: 0 auto;\\n      max-width: 580px;\\n      padding: 10px;\\n    }\\n\\n    /* -------------------------------------\\n          HEADER, FOOTER, MAIN\\n      ------------------------------------- */\\n\\n    .main {\\n      background: #ffffff;\\n      border-radius: 3px;\\n      width: 100%;\\n    }\\n\\n    .wrapper {\\n      box-sizing: border-box;\\n      padding: 20px;\\n    }\\n\\n    .footer {\\n      clear: both;\\n      Margin-top: 10px;\\n      text-align: center;\\n      width: 100%;\\n    }\\n\\n    .footer td {\\n      padding-top: 3px;\\n      padding-bottom: 3px;\\n    }\\n\\n    .footer td,\\n    .footer p,\\n    .footer span,\\n    .footer a {\\n      color: #999999;\\n      font-size: 12px;\\n      text-align: center;\\n    }\\n\\n    /* -------------------------------------\\n          TYPOGRAPHY\\n      ------------------------------------- */\\n\\n    h1,\\n    h2,\\n    h3,\\n    h4 {\\n      color: #000000;\\n      font-family: sans-serif;\\n      font-weight: 400;\\n      line-height: 1.4;\\n      margin: 0;\\n      Margin-bottom: 30px;\\n    }\\n\\n    h1 {\\n      font-size: 35px;\\n      font-weight: 300;\\n      text-align: center;\\n      text-transform: capitalize;\\n    }\\n\\n    p,\\n    ul,\\n    ol {\\n      font-family: sans-serif;\\n      font-size: 14px;\\n      font-weight: normal;\\n      margin: 0;\\n      Margin-bottom: 15px;\\n    }\\n\\n    p li,\\n    ul li,\\n    ol li {\\n      list-style-position: inside;\\n      margin-left: 5px;\\n    }\\n\\n    a {\\n      color: #3498db;\\n      text-decoration: underline;\\n    }\\n\\n    /* -------------------------------------\\n          BUTTONS\\n      ------------------------------------- */\\n\\n    .btn {\\n      box-sizing: border-box;\\n      width: 100%;\\n    }\\n\\n    .btn>tbody>tr>td {\\n      padding-bottom: 22px;\\n      /*\\n        padding-bottom 22 = 15 + 7, where 15 = margin-down for the above\\n        p element\\n      */\\n      padding-top: 7px;\\n    }\\n\\n    .btn table {\\n      width: auto;\\n    }\\n\\n    .btn table td {\\n      background-color: #ffffff;\\n      border-radius: 5px;\\n      text-align: center;\\n    }\\n\\n    .btn a {\\n      background-color: #ffffff;\\n      border: solid 1px #4caf50;\\n      border-radius: 5px;\\n      box-sizing: border-box;\\n      color: #4caf50;\\n      cursor: pointer;\\n      display: inline-block;\\n      font-size: 14px;\\n      font-weight: bold;\\n      margin: 0;\\n      padding: 12px 25px;\\n      text-decoration: none;\\n      text-transform: capitalize;\\n    }\\n\\n    .btn-primary table td {\\n      background-color: #4caf50;\\n    }\\n\\n    .btn-primary a {\\n      background-color: #4caf50;\\n      border-color: #4caf50;\\n      color: #ffffff;\\n    }\\n\\n    /* -------------------------------------\\n          OTHER STYLES THAT MIGHT BE USEFUL\\n      ------------------------------------- */\\n\\n    .last {\\n      margin-bottom: 0;\\n    }\\n\\n    .first {\\n      margin-top: 0;\\n    }\\n\\n    .align-center {\\n      text-align: center;\\n    }\\n\\n    .align-right {\\n      text-align: right;\\n    }\\n\\n    .align-left {\\n      text-align: left;\\n    }\\n\\n    .clear {\\n      clear: both;\\n    }\\n\\n    .mt0 {\\n      margin-top: 0;\\n    }\\n\\n    .mb0 {\\n      margin-bottom: 0;\\n    }\\n\\n    .powered-by a {\\n      text-decoration: none;\\n    }\\n\\n    hr {\\n      border: 0;\\n      border-bottom: 1px solid #f6f6f6;\\n      Margin: 20px 0;\\n    }\\n\\n    /* -------------------------------------\\n          RESPONSIVE AND MOBILE FRIENDLY STYLES\\n      ------------------------------------- */\\n\\n    @media only screen and (max-width: 620px) {\\n      table[class=body] h1 {\\n        font-size: 28px !important;\\n        margin-bottom: 10px !important;\\n      }\\n      table[class=body] p,\\n      table[class=body] ul,\\n      table[class=body] ol,\\n      table[class=body] td,\\n      table[class=body] span,\\n      table[class=body] a {\\n        font-size: 16px !important;\\n      }\\n      table[class=body] .wrapper,\\n      table[class=body] .article {\\n        padding: 10px !important;\\n      }\\n      table[class=body] .content {\\n        padding: 0 !important;\\n      }\\n      table[class=body] .container {\\n        padding: 0 !important;\\n        width: 100% !important;\\n      }\\n      table[class=body] .main {\\n        border-left-width: 0 !important;\\n        border-radius: 0 !important;\\n        border-right-width: 0 !important;\\n      }\\n      table[class=body] .btn table {\\n        width: 100% !important;\\n      }\\n      table[class=body] .btn a {\\n        width: 100% !important;\\n      }\\n      table[class=body] .img-responsive {\\n        height: auto !important;\\n        max-width: 100% !important;\\n        width: auto !important;\\n      }\\n    }\\n\\n    /* -------------------------------------\\n          PRESERVE THESE STYLES IN THE HEAD\\n      ------------------------------------- */\\n\\n    @media all {\\n      .ExternalClass {\\n        width: 100%;\\n      }\\n      .ExternalClass,\\n      .ExternalClass p,\\n      .ExternalClass span,\\n      .ExternalClass font,\\n      .ExternalClass td,\\n      .ExternalClass div {\\n        line-height: 100%;\\n      }\\n      .apple-link a {\\n        color: inherit !important;\\n        font-family: inherit !important;\\n        font-size: inherit !important;\\n        font-weight: inherit !important;\\n        line-height: inherit !important;\\n        text-decoration: none !important;\\n      }\\n    }\\n\\n  </style>\\n</head>\\n\\n<body class=\\\"\\\">\\n  <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"body\\\">\\n    <tr>\\n      <td>&nbsp;</td>\\n      <td class=\\\"container\\\">\\n        <div class=\\\"content\\\">\\n\\n          <!-- START CENTERED WHITE CONTAINER -->\\n          <table class=\\\"main\\\">\\n\\n            <!-- START MAIN CONTENT AREA -->\\n            <tr>\\n              <td class=\\\"wrapper\\\">\\n                <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n                  <tr>\\n                    <td>\\n                      <p>\\n                        Your room is ready\\n                      </p>\\n\\n                      <p>\\n                        Click the button below to enter and begin playing.\\n                      </p>\\n                      <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\" class=\\\"btn btn-primary\\\">\\n                        <tbody>\\n                          <tr>\\n                            <td align=\\\"left\\\">\\n                              <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n                                <tbody>\\n                                  <tr>\\n                                    <td> <a href=\\\"{{ global.externalBaseUrl }}/room/{{ roomHash }}/player/{{ playerHash }}\\\" target=\\\"_blank\\\">Enter Room</a> </td>\\n                                  </tr>\\n                                </tbody>\\n                              </table>\\n                            </td>\\n                          </tr>\\n                        </tbody>\\n                      </table>\\n                      <p>Good luck!</p>\\n                    </td>\\n                  </tr>\\n                </table>\\n              </td>\\n            </tr>\\n\\n            <!-- END MAIN CONTENT AREA -->\\n          </table>\\n\\n          <!-- START FOOTER -->\\n          <div class=\\\"footer\\\">\\n            <table border=\\\"0\\\" cellpadding=\\\"0\\\" cellspacing=\\\"0\\\">\\n              <tr>\\n                <td>\\n                  <span class=\\\"apple-link\\\">Pass The Quill</span>\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscribe/room-created/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Unsubscribe</a> from \\\"room created\\\" emails\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscribe/all/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Unsubscribe</a> from all emails\\n                </td>\\n              </tr>\\n              <tr>\\n                <td>\\n                  <a href=\\\"{{ global.externalBaseUrl }}/email/unsubscriptions/{{ emailSentHash }}\\\" target=\\\"_blank\\\">Manage</a> your subscriptions\\n                </td>\\n              </tr>\\n            </table>\\n          </div>\\n          <!-- END FOOTER -->\\n\\n          <!-- END CENTERED WHITE CONTAINER -->\\n        </div>\\n      </td>\\n      <td>&nbsp;</td>\\n    </tr>\\n  </table>\\n</body>\\n\\n</html>\\n\"","//---------//\n// Imports //\n//---------//\n\nimport winston from 'winston'\nimport path from 'path'\nimport 'winston-daily-rotate-file'\n\nimport { logDirectory } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\nconst { Logger } = winston,\n  levels = { error: 0, concern: 1, info: 2 }\n\n//\n//------//\n// Main //\n//------//\n\nconst createDailyRotatingLogger = name => {\n  const transport = new winston.transports.DailyRotateFile({\n    dirname: path.resolve(logDirectory, name),\n    filename: '%DATE%.log',\n    zippedArchive: true,\n    maxSize: '20m',\n    maxFiles: '14d',\n    utc: true,\n  })\n\n  return new Logger({\n    levels,\n    transports: [transport],\n  })\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { levels }\nexport default createDailyRotatingLogger\n","//---------//\n// Imports //\n//---------//\n\nimport createDailyRotatingLogger, {\n  levels,\n} from './create-daily-rotating-logger'\n\nimport { map } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst createWinstonWrapper = name => {\n  const dailyRotatingLogger = createDailyRotatingLogger(name)\n\n  return map(toWrapper)(levels)\n\n  // scoped helper functions\n\n  function toWrapper(_unused_levelInteger, levelName) {\n    return (...args) => {\n      if (levelName === 'error') return logError(dailyRotatingLogger, ...args)\n      else return logMessage(dailyRotatingLogger, levelName, args[0])\n    }\n  }\n}\n\nfunction logMessage(dailyRotatingLogger, levelName, message) {\n  dailyRotatingLogger[levelName](message)\n}\n\nfunction logError(dailyRotatingLogger, ...args) {\n  // eslint-disable-next-line prefer-const\n  let [prependToError, error] = args\n\n  if (args.length === 2) {\n    error.message = prependToError + '\\n\\n' + error.message\n  } else {\n    error = prependToError\n  }\n\n  error.stack += '\\n\\n\\n\\n'\n  dailyRotatingLogger.error(error.stack)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createWinstonWrapper\n","import createWinstonWrapper from './create-winston-wrapper'\n\nexport default {\n  http: createWinstonWrapper('http'),\n  server: createWinstonWrapper('server'),\n}\n","//\n// README\n//   - Because we're stuck with an unfortunate side-effect'ful web server api,\n//     this function sets ctx's status and body properties as well as returns\n//     whether the request body was valid.\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { truncateDirtyArgs } from 'universal/utils'\nimport {\n  discardAll,\n  getArrayOfKeys,\n  getArrayOfValues,\n  getCount,\n  getValueAt,\n  isLaden,\n  isTruthy,\n  join,\n  keepWhen,\n  map,\n  omitAll,\n  passThrough,\n  pickAllFrom,\n} from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst propertyIsTruthy = getValueAt\n\n//\n//------//\n// Main //\n//------//\n\n//\n// requestValidationInfo has the shape\n// {\n//   body: inputIdToValidationInfo,\n//   queryParameters: inputIdToValidationInfo\n// }\n//\n// inputIdToValidationInfo has the shape\n// {\n//   <input id>: {\n//     approve: value => string (error message) | undefined\n//     isRequired: <boolean>\n//   }\n//   <input id>: ...\n// }\n//\nconst createApproveRequest = requestValidationInfo => {\n  const allAllowedKeys = map(getArrayOfKeys)(requestValidationInfo),\n    allRequiredKeys = map(toRequiredKeys)(requestValidationInfo),\n    allApprovers = map(toApproveFunction)(requestValidationInfo)\n\n  return function validateRequest(ctx) {\n    const dirty = {\n        body: ctx.request.body,\n        queryParameters: ctx.query,\n      },\n      errorMessage = passThrough(\n        [approve('body'), approve('queryParameters')],\n        [keepWhen(isTruthy), join('\\n\\n')]\n      )\n\n    return errorMessage\n\n    // helper functions scoped to 'validateRequestBody'\n\n    function approve(bodyOrQueryParameters) {\n      const allowedKeys = allAllowedKeys[bodyOrQueryParameters],\n        requiredKeys = allRequiredKeys[bodyOrQueryParameters],\n        idToApprove = allApprovers[bodyOrQueryParameters],\n        propertiesPassed = dirty[bodyOrQueryParameters]\n\n      return (\n        approveExpectedProperties(allowedKeys, propertiesPassed) ||\n        approveRequiredProperties(requiredKeys, propertiesPassed) ||\n        approveValidProperties(idToApprove, propertiesPassed)\n      )\n    }\n\n    function approveExpectedProperties(allowedKeys, propertiesPassed) {\n      const unexpectedProperties = omitAll(allowedKeys)(propertiesPassed),\n        numberOfUnexpectedProperties = getCount(unexpectedProperties)\n\n      if (numberOfUnexpectedProperties > 0) {\n        const unexpectedPropsString = truncateDirtyArgs(unexpectedProperties)\n        return dedent(`\n          Unexpected properties were passed\n          expected keys: ${join(', ')(allowedKeys)}\n          unexpected props passed: ${unexpectedPropsString}\n        `)\n      }\n    }\n\n    function approveRequiredProperties(requiredKeys, propertiesPassed) {\n      const passedKeys = Object.keys(propertiesPassed),\n        missingKeys = discardAll(passedKeys)(requiredKeys)\n\n      if (isLaden(missingKeys)) {\n        return `You are missing the following keys: ${join(', ')(missingKeys)}`\n      }\n    }\n\n    function approveValidProperties(idToApprove, propertiesPassed) {\n      const invalidIdToReason = passThrough(propertiesPassed, [\n          map((value, key) => idToApprove[key](value)),\n          keepWhen(isLaden),\n        ]),\n        numberOfInvalidProperties = getCount(invalidIdToReason)\n\n      if (numberOfInvalidProperties > 0) {\n        const invalidProps = passThrough(invalidIdToReason, [\n            getArrayOfKeys,\n            pickAllFrom(propertiesPassed),\n            truncateDirtyArgs,\n          ]),\n          reasons = passThrough(invalidIdToReason, [\n            map((value, key) => `${key}: ${value}`),\n            getArrayOfValues,\n            join('\\n\\n'),\n          ])\n\n        return dedent(`\n          Invalid properties were passed:\n          ${invalidProps}\n\n          reasons:\n          ${reasons}\n        `)\n      }\n    }\n  }\n}\n\nfunction toApproveFunction(inputIdToValidationInfo) {\n  return map(getValueAt('approve'))(inputIdToValidationInfo)\n}\n\nfunction toRequiredKeys(inputIdToValidationInfo) {\n  return passThrough(inputIdToValidationInfo, [\n    keepWhen(propertyIsTruthy('isRequired')),\n    getArrayOfKeys,\n  ])\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createApproveRequest\n","//---------//\n// Imports //\n//---------//\n\nimport _fs from 'fs'\nimport Hashids from 'hashids'\nimport pify from 'pify'\n\nimport createApproveRequest from './create-approve-request'\nimport inputValidationInfo from '../universal/input-validation-info'\nimport log from './log'\nimport { noop } from '../universal/utils'\nimport { salt } from 'project-root/config/app'\n\n//\n//------//\n// Init //\n//------//\n\nconst pFs = pify(_fs)\n\n//\n//------//\n// Main //\n//------//\n\nconst createIfRequestIsValid = endpointId => {\n  const approveRequest = createApproveRequest(inputValidationInfo[endpointId])\n\n  return runThisIfValid => ctx => {\n    const errorMessage = approveRequest(ctx)\n    if (errorMessage) {\n      ctx.status = 400\n      ctx.body = { error: errorMessage }\n    } else {\n      return runThisIfValid(ctx)\n    }\n  }\n}\n\nconst handleServerError = (createMessage, args) => error => {\n  const message = createMessage(...args)\n\n  error.message = message.detailed + '\\n\\n' + error.message\n  return handleServerErrorSync(message.friendly, error)\n}\n\nconst handleServerErrorSync = (friendlyMessage, error) => {\n  //\n  // we want to let upstream know this has been logged/handled by the server.\n  //   We also need to provide the friendly message so the web server code knows\n  //   what to send to the client.\n  //\n  friendlyMessage = `An error occurred while ${friendlyMessage}`\n  Object.assign(error, {\n    isHandled: true,\n    friendlyMessage,\n  })\n  log.server.error(error)\n  return Promise.reject(error)\n}\n\nconst hasher = new Hashids(salt.hashid)\n\nconst ifResponseIsNot404 = (ctx, runThisIfNot404) => response => {\n  if (response.status === 404) {\n    ctx.status = 404\n    return { is404: true }\n  }\n\n  return runThisIfNot404(response.data)\n}\n\n// TODO: figure out a better way to manage 404s.  I'm hoping a better solution\n//   reveals itself soon\nconst ifStatusIsNot404 = runThisIfNot404 => result => {\n  return result.is404 ? undefined : runThisIfNot404(result)\n}\n\nconst maybeReadFile = fpath => readFile(fpath).catch(noop)\n\nconst readdir = fpath => pFs.readdir(fpath)\n\nconst readFile = fpath => pFs.readFile(fpath, 'utf8')\n\nconst writeFile = fpath => content => pFs.writeFile(fpath, content)\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport {\n  createIfRequestIsValid,\n  handleServerError,\n  handleServerErrorSync,\n  hasher,\n  ifResponseIsNot404,\n  ifStatusIsNot404,\n  maybeReadFile,\n  readdir,\n  readFile,\n  writeFile,\n}\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { toCommaList } from '../utils'\nimport { containedIn } from 'fes'\n\n//\n//------//\n// Init //\n//------//\n\nconst validSendEmailTypes = ['invitation', 'room-created']\n\n//\n//------//\n// Main //\n//------//\n\nconst validEmailTypes = {\n    send: new Set(validSendEmailTypes),\n    unsubscribe: new Set(['all', ...validSendEmailTypes]),\n  },\n  isValidEmailType = {\n    send: containedIn(validEmailTypes.send),\n    unsubscribe: containedIn(validEmailTypes.unsubscribe),\n  },\n  approveEmailType = {\n    send: approveSendEmailType,\n    unsubscribe: approveUnsubscribeEmailType,\n  }\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction approveSendEmailType(value) {\n  if (!isValidEmailType.send(value)) {\n    return dedent(`\n      '${value}' is an invalid send email type\n      email types available: ${toCommaList(validEmailTypes.send)}\n    `)\n  }\n}\n\nfunction approveUnsubscribeEmailType(value) {\n  if (!isValidEmailType.unsubscribe(value)) {\n    return dedent(`\n      '${value}' is an invalid unsubscribe email type\n      email types available: ${toCommaList(validEmailTypes.unsubscribe)}\n    `)\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { approveEmailType, isValidEmailType, validEmailTypes }\n","//\n// README\n//   - This structure is very brittle atm because I'm still trying to figure out\n//     a clean way to share these structures between the back and frontends.\n//     At first I thought all forms would share validation info with a post\n//     endpoint but this is not true for forms which have no submit button.\n//     Anyway, we can refactor it later so let's just move forward!\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport { approveIsLaden, truncate } from 'universal/utils'\nimport { assignOver, map, passThrough } from 'fes'\nimport { approveEmailType } from 'universal/email/types'\n\n//\n//------//\n// Main //\n//------//\n\nconst inputValidationInfo = map(normalize)({\n  createARoom: {\n    body: {\n      player1Email: {},\n      player2Email: {},\n    },\n  },\n  emailResubscribe: {\n    body: {\n      type: {\n        approve: approveEmailType.unsubscribe,\n      },\n    },\n  },\n  emailUnsubscribe: {\n    body: {\n      type: {\n        approve: approveEmailType.unsubscribe,\n      },\n    },\n  },\n  guess: {\n    body: {\n      guess: {\n        approve: value => {\n          if (typeof value !== 'string' || !value) {\n            return dedent(`\n              Your guess must be a non-empty string\n              typeof value: ${typeof value}\n              value passed: ${truncate(value)}\n            `)\n          }\n          if (value.length > 5) {\n            return dedent(`\n              Your guess cannot be greater than 5 letters\n              number of letters: ${value.length}\n              string passed: ${value}\n            `)\n          }\n        },\n      },\n    },\n  },\n  initPlayer: {\n    body: {\n      displayName: {\n        approve: value => {\n          if (typeof value !== 'string' || !value || value.length > 15) {\n            return 'displayName must be 1-15 letters'\n          }\n        },\n      },\n      word: {\n        approve: value => {\n          if (typeof value !== 'string' || !value) {\n            return dedent(`\n              The word must be a non-empty string\n              typeof value: ${typeof value}\n              value passed: ${truncate(value)}\n            `)\n          }\n          if (value.length !== 5) {\n            return dedent(`\n              The word must be exactly 5 letters\n              number of letters: ${value.length}\n              string passed: ${value}\n            `)\n          }\n          if (new Set(value).size !== 5) {\n            return dedent(`\n              The word cannot have duplicate letters\n              string passed: ${value}\n            `)\n          }\n        },\n      },\n    },\n  },\n  markChosenLetter: {\n    body: {\n      chosenLetter: {\n        approve: value => {\n          if (typeof value !== 'string' || !value) {\n            return dedent(`\n              chosenLetter must be a non-empty string\n              typeof value: ${typeof value}\n              value passed: ${truncate(value)}\n            `)\n          }\n\n          if (value.length !== 1) {\n            return dedent(`\n              chosenLetter must be a single character\n              value passed: ${truncate(value)}\n            `)\n          }\n        },\n      },\n    },\n  },\n})\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction normalize(apiEndpiont) {\n  return passThrough(apiEndpiont, [\n    assignOver({ body: {}, form: {}, queryParameters: {} }),\n    map(normalizeIdToValidationInfo),\n  ])\n}\n\nfunction normalizeIdToValidationInfo(idToValidationInfo) {\n  return map(validationInfo =>\n    Object.assign(\n      {\n        approve: approveIsLaden,\n        isRequired: true,\n      },\n      validationInfo\n    )\n  )(idToValidationInfo)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default inputValidationInfo\n","export default something => {\n  return typeof something === 'string'\n    ? something\n    : '' + JSON.stringify(something, createReplacer(), 2)\n}\n\nfunction createReplacer() {\n  const duplicateObjects = new Map()\n\n  return (key, value) => {\n    if (value && typeof value === 'object') {\n      if (duplicateObjects.has(value)) {\n        return `<duplicate of '${duplicateObjects.get(value)}'>`\n      } else {\n        duplicateObjects.set(value, key)\n        return value\n      }\n    }\n    return typeof value === 'function' ? '<function>' : value\n  }\n}\n","//---------//\n// Imports //\n//---------//\n\nimport { map, mMap, mSet, passThrough, reduce } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nfunction resolveAllProperties(anObject) {\n  return passThrough(anObject, [\n    toPairs,\n    mMap(resolveAll),\n    resolveAll,\n    then(fromPairs),\n  ])\n}\n\nfunction resolveAll(anArray) {\n  return Promise.all(anArray)\n}\n\nfunction settleAll(arrayOfPromises) {\n  return passThrough(arrayOfPromises, [map(settle), resolveAll])\n}\n\nfunction then(callThis) {\n  return aPromise => aPromise.then.call(aPromise, callThis)\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction fromPairs(anArray) {\n  return reduce((res, [key, val]) => mSet(key, val)(res), {})(anArray)\n}\n\nfunction toPairs(obj) {\n  return mMap(aKey => [aKey, obj[aKey]])(Object.keys(obj))\n}\n\nfunction settle(aPromise) {\n  return aPromise.then(\n    successVal => ({ value: successVal, status: 'resolve' }),\n    err => ({ value: err, status: 'reject' })\n  )\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport { resolveAll, resolveAllProperties, settleAll, then }\n","//---------//\n// Imports //\n//---------//\n\nimport typeDetect from 'type-detect'\n\nimport jstring from './jstring'\nimport {\n  append,\n  flow,\n  getArrayOfValues,\n  getCount,\n  join,\n  keepFirst,\n  mMap,\n  passThrough,\n  returnFirstArgument as identity,\n  truncateToNLines,\n} from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\n//\n// the term 'dirty' means either invalid or not yet validated.  It is the reason\n//   we need to truncate the values because otherwise we would have known data\n//   and thus be able to format it nicely.\n//\n// this method handles a few types of 'args'\n//   1. an array of arguments (array-like)\n//   2. an 'arguments' object (array-like)\n//   3. an object representing the arguments to a function which only takes a\n//      single argument object (named as opposed to numeric key-value pairs).\n//      I often use this convention to simplify input validation\n//\nconst truncateDirtyArgs = args => {\n  const isObject = typeDetect(args) === 'Object',\n    [take3, toArray] = isObject\n      ? [take3_object, getArrayOfValues]\n      : [keepFirst(3), identity]\n\n  return passThrough(args, [\n    take3,\n    mMap(flow([jstring, truncateToNLines(3)])),\n    mMap((aString, key) => `${key}: ${aString}`),\n    toArray,\n    join('\\n\\n'),\n    maybeAddMoreIndicator(getCount(args)),\n  ])\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction take3_object(anObject) {\n  const keys = Object.keys(anObject)\n  if (keys.length <= 3) return anObject\n\n  const result = {}\n  for (let i = 0; i < 3; i += 1) {\n    const currentKey = keys[i]\n    result[currentKey] = anObject[currentKey]\n  }\n  return result\n}\n\nfunction maybeAddMoreIndicator(numArguments) {\n  return truncatedArgs => {\n    return numArguments > 3\n      ? append(`\\n...(${numArguments - 3} more)`)(truncatedArgs)\n      : truncatedArgs\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default truncateDirtyArgs\n","//\n// implementation thanks to Jon Schlinkert\n//\n/*!\n * repeat-string <https://github.com/jonschlinkert/repeat-string>\n *\n * Copyright (c) 2014-2015, Jon Schlinkert.\n * Licensed under the MIT License.\n */\n\nexport default numberOfTimes => stringToRepeat => {\n  // cover common, quick use cases\n  if (numberOfTimes === 1) return stringToRepeat\n  if (numberOfTimes === 2) return stringToRepeat + stringToRepeat\n\n  const max = stringToRepeat.length * numberOfTimes\n  let result = ''\n\n  while (max > result.length && numberOfTimes > 1) {\n    if (numberOfTimes & 1) {\n      result += stringToRepeat\n    }\n\n    numberOfTimes >>= 1\n    stringToRepeat += stringToRepeat\n  }\n\n  result += stringToRepeat\n  result = result.substr(0, max)\n\n  return result\n}\n","import { flow, truncateToNLines } from 'fes'\nimport jstring from './jstring'\n\nconst truncate = flow([jstring, truncateToNLines(3)])\n\nexport default truncate\n","//\n// README\n//   - This is an old implementation I wrote that \"works\".  I need to rewrite it\n//     using my current conventions\n//\n\n//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\nimport { join } from 'fes'\n\nimport truncate from './truncate'\n\n//\n//------//\n// Init //\n//------//\n\nconst setOfAssignableTypes = new Set(['object', 'function'])\n\n//\n//------//\n// Main //\n//------//\n\nconst setValueAtPath = (propertyPath, val) => object => {\n  // not sure what the desired case would be for an empty propertyPath, so\n  //   throwing an error until I encounter it\n  if (!propertyPath.length) {\n    throw new Error(\n      dedent(`\n        setValueAtPath requires a laden path\n        propertyPath: JSON.stringify(propertyPath, null, 2)\n      `)\n    )\n  }\n\n  let i = 0,\n    shouldCheckForKey = true,\n    tmpObject = object\n\n  while (i < propertyPath.length - 1) {\n    const key = propertyPath[i]\n\n    if (!shouldCheckForKey) {\n      if (i < propertyPath.length - 1) {\n        tmpObject = tmpObject[key] = {}\n      } else if (i === propertyPath.length - 1) {\n        tmpObject[key] = val\n      }\n    } else {\n      if (!hasKey(key, tmpObject) || tmpObject[key] === undefined) {\n        if (i < propertyPath.length - 1) {\n          tmpObject = tmpObject[key] = {}\n          shouldCheckForKey = false\n        } else if (i === propertyPath.length - 1) {\n          tmpObject[key] = val\n        }\n      } else {\n        if (!setOfAssignableTypes.has(typeof tmpObject[key])) {\n          throw new Error(\n            dedent(`\n              setValueAtPath was given a path containing an unassignable key\n\n              propertyPath: ${join(', ')(propertyPath)}\n              unassignable key: ${key}\n              value at key: ${truncate(tmpObject[key])}\n              typeof value at key: ${typeof tmpObject[key]}\n              assignable types: ${join(', ')(setOfAssignableTypes)}\n            `)\n          )\n        }\n\n        tmpObject = tmpObject[key]\n      }\n    }\n\n    i += 1\n  }\n\n  tmpObject[propertyPath[i]] = val\n\n  return object\n}\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction hasKey(key, anObject) {\n  return (\n    isAnObject(anObject) && (anObject[key] !== undefined || key in anObject)\n  )\n}\n\nfunction isAnObject(anObject) {\n  return typeof anObject === 'object' && anObject !== null\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default setValueAtPath\n","//---------//\n// Imports //\n//---------//\n\nimport dedent from 'dedent'\n\nimport jstring from './jstring'\nimport truncateDirtyArgs from './truncate-dirty-args'\n\nimport { discardAll, isLaden, join } from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\n//\n// Validates\n//   1. a single argument was passed\n//   2. the single argument is an object\n//   3. the object only has the expected arguments\n//   4. the object is not missing any arguments\n//\nconst createApproveSimpleInput = context => {\n  const createError = message => new Error(`Error while ${context}\\n${message}`)\n\n  return function approveSimpleInput(arrayOfArguments, requiredProperties) {\n    if (arrayOfArguments.length !== 1) {\n      const firstThree = arrayOfArguments.length > 3 ? 'first three ' : '',\n        truncatedArguments = truncateDirtyArgs(arrayOfArguments)\n\n      return createError(\n        dedent(`\n          This method requires a single object argument\n          number of arguments passed: ${arrayOfArguments.length}\n          ${firstThree}arguments passed: ${truncatedArguments}\n        `)\n      )\n    }\n\n    const input = arrayOfArguments[0]\n\n    if (input === null || typeof input !== 'object') {\n      return createError(\n        dedent(`\n          Input must be an object\n          input passed: ${jstring(input)}\n        `)\n      )\n    }\n\n    const passedKeys = Object.keys(input),\n      unexpectedProperties = discardAll(requiredProperties)(passedKeys)\n    if (isLaden(unexpectedProperties)) {\n      return createError(\n        dedent(`\n          The following unexpected properties were passed:\n          ${join(', ')(unexpectedProperties)}\n        `)\n      )\n    }\n\n    const missingProperties = discardAll(passedKeys)(requiredProperties)\n    if (isLaden(missingProperties)) {\n      return createError(\n        `The following properties are missing: ${join(', ')(missingProperties)}`\n      )\n    }\n  }\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport default createApproveSimpleInput\n","//---------//\n// Imports //\n//---------//\n\nimport decamelize from 'decamelize'\nimport dedent from 'dedent'\n\nimport jstring from './jstring'\nimport {\n  getValueAt,\n  getValueAtPath,\n  isEmpty,\n  join,\n  mSet,\n  reduce,\n  reduceFresh,\n} from 'fes'\n\n//\n//------//\n// Main //\n//------//\n\nconst approveIsLaden = value => {\n  if (isEmpty(value)) {\n    return dedent(`\n      Value must pass 'isLaden'\n      value: ${jstring(value)}\n    `)\n  }\n}\n\nconst approveIsLadenString = value => {\n  if (typeof value !== 'string') {\n    return dedent(`\n      value is not typeof 'string'\n      typeof value: ${typeof value}\n      value: ${jstring(value)}\n    `)\n  } else if (value === '') {\n    return 'value cannot be an empty string'\n  }\n}\n\nconst bindAll = (arrayOfPropNames, object) => {\n  const result = {}\n  arrayOfPropNames.forEach(propName => {\n    result[propName] = object[propName].bind(object)\n  })\n  return result\n}\n\nconst dashelize = aString => decamelize(aString, '-')\n\nconst hasLength = length => something =>\n  getValueAt('length')(something) === length\n\nconst invokeWhenCalled = aFunction => () => aFunction()\n\nconst isFalsey = something => !something\n\nconst isTruthy = something => !!something\n\nconst log = something => {\n  console.log(something) // eslint-disable-line no-console\n}\n\nconst logError = err => {\n  console.error(err) // eslint-disable-line no-console\n}\n\nconst mAddToSet = something => aSet => aSet.add(something)\n\nconst mRemoveAtIndex = index => anArray => {\n  anArray.splice(index, 1)\n  return anArray\n}\n\nconst noop = () => {}\n\nconst removeExtension = filename => {\n  const periodIndex = filename.lastIndexOf('.')\n  return filename.slice(0, periodIndex)\n}\n\nconst sequentiallyResolveEach = (asyncFunctions, arg) => {\n  return reduce(toResolvedPromise, Promise.resolve(arg))(asyncFunctions)\n}\n\nconst setShowErrorView = commit => _unused_error => {\n  // TODO: create universal logger and log the error here\n  commit('setShowErrorView', true, { root: true })\n}\n\nconst setShowNotFoundOrErrorView = commit => error => {\n  const status = getValueAtPath(['response', 'status'])(error),\n    mutation = status === 404 ? 'setShowNotFoundView' : 'setShowErrorView'\n\n  // TODO: create universal logger and log the error here\n  console.error('setShowNotFoundOrErrorView called')\n  console.error(error.stack)\n  commit(mutation, true, { root: true })\n}\n\nconst toCommaList = join(', ')\n\nconst toEnum = reduceFresh((result, val) => mSet(val, val)(result), () => ({}))\n\nconst waitMs = ms =>\n  new Promise(resolve => {\n    setTimeout(resolve, ms)\n  })\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\nfunction toResolvedPromise(result, asyncFunction) {\n  return result.then(asyncFunction)\n}\n\n//\n//---------//\n// Exports //\n//---------//\n\nexport * from './promise-utils'\nexport { default as truncateDirtyArgs } from './truncate-dirty-args'\nexport { default as repeatString } from './repeat-string'\nexport { default as truncate } from './truncate'\nexport { default as setValueAtPath } from './set-value-at-path'\nexport {\n  default as createApproveSimpleInput,\n} from './create-approve-simple-input'\n\nexport {\n  approveIsLaden,\n  approveIsLadenString,\n  bindAll,\n  dashelize,\n  hasLength,\n  invokeWhenCalled,\n  isFalsey,\n  isTruthy,\n  jstring,\n  log,\n  logError,\n  mAddToSet,\n  mRemoveAtIndex,\n  noop,\n  removeExtension,\n  sequentiallyResolveEach,\n  setShowErrorView,\n  setShowNotFoundOrErrorView,\n  toCommaList,\n  toEnum,\n  waitMs,\n}\n","//-------------//\n// Pre-Imports //\n//-------------//\n\nimport 'source-map-support/register'\n\n// TODO: use null-loader to handle this instead.  It's supposed to run before\n//   other files are imported, but the dynamic require happens after imports due\n//   to hoisting\nif (process.env.NODE_ENV !== 'production') {\n  require('longjohn')\n}\n\n//\n//---------//\n// Imports //\n//---------//\n\nimport chalk from 'chalk'\nimport createApiRouter from './create/router/api'\nimport createDebugRouter from './create/router/debug'\nimport createLruCache from 'lru-cache'\nimport createPageRouter from './create/router/page'\nimport fixtureNameToInstall from './dev/fixture-name-to-install'\nimport Koa from 'koa'\nimport KoaRouter from 'koa-router'\nimport koaVueSsr_initDevServer from 'koa-vue-ssr_init-dev-server'\nimport path from 'path'\nimport { createBundleRenderer } from 'vue-server-renderer'\n\nimport _client from './config/webpack/client'\nimport _ssr from './config/webpack/ssr'\n\nimport { createAllDatabases, deleteAllDatabases } from 'server/db'\nimport { readFile } from 'server/utils'\nimport { logError } from 'universal/utils'\n\n//\n//------//\n// Init //\n//------//\n\nconst highlight = chalk.green,\n  isDevelopment = process.env.NODE_ENV === 'development',\n  serverPort = 8085,\n  webpackHotClientPort = 8086,\n  templatePath = path.resolve(__dirname, 'index.template.html'),\n  webpackConfigs = {\n    client: _client,\n    ssr: _ssr,\n  },\n  fixtureNameCamel = 'onlyPlayer1IsInitialized',\n  installFixture = () => fixtureNameToInstall[fixtureNameCamel]()\n\nlogUnhandledRejections()\n\n//\n//------//\n// Main //\n//------//\n\nmaybeInitDevDatabase()\n  .then(() => {\n    return isDevelopment ? initDevServer() : initNonDevServer()\n  })\n  .then(({ getRenderer, koaApp }) => {\n    const router = createRouter(getRenderer)\n\n    koaApp\n      .use(router.routes())\n      .use(router.allowedMethods())\n      .listen(serverPort)\n\n    // eslint-disable-next-line no-console\n    console.log(`The server is running on port: ${highlight(serverPort)}`)\n  })\n  .catch(logError)\n\n//\n//------------------//\n// Helper Functions //\n//------------------//\n\n//\n// TODO: rename koa-vue-ssr_init-dev-server to be more generic so it can handle\n//   non-dev-server usage as well.  Some of this code is currently duplicated.\n//\nfunction initNonDevServer() {\n  return Promise.all([\n    readFile(path.resolve(__dirname, 'dist/vue/vue-ssr-client-manifest.json')),\n    readFile(path.resolve(__dirname, 'dist/vue/vue-ssr-server-bundle.json')),\n    readFile(templatePath),\n  ]).then(([ssrClientManifest, ssrServerBundle, template]) => {\n    const bundleRenderer = createBundleRenderer(JSON.parse(ssrServerBundle), {\n      clientManifest: JSON.parse(ssrClientManifest),\n      template,\n      cache: createLruCache({\n        max: 1000,\n        maxAge: 1000 * 60 * 15,\n      }),\n      //\n      // doesn't matter whether we use client or ssr output paths as they\n      //   should be the same\n      //\n      basedir: webpackConfigs.client.output.path,\n      runInNewContext: false,\n    })\n\n    return {\n      koaApp: new Koa(),\n      getRenderer: () => bundleRenderer,\n    }\n  })\n}\n\nfunction initDevServer() {\n  return koaVueSsr_initDevServer({\n    koaApp: new Koa(),\n    webpackConfigs,\n    webpackHotClientPort,\n    templatePath,\n\n    //\n    // currently this app assumes that development means live-reloading.  My\n    //   app my rules!\n    //\n    shouldWatch: isDevelopment,\n  })\n}\n\nfunction maybeInitDevDatabase() {\n  if (!isDevelopment) return Promise.resolve()\n\n  return deleteAllDatabases()\n    .then(createAllDatabases)\n    .then(installFixture)\n}\n\nfunction createRouter(getRenderer) {\n  const rootRouter = new KoaRouter(),\n    api = createApiRouter(),\n    page = createPageRouter(getRenderer),\n    debug =\n      process.env.NODE_ENV === 'development'\n        ? createDebugRouter(fixtureNameCamel)\n        : undefined\n\n  rootRouter\n    .use('/api', api.routes(), api.allowedMethods())\n    .use(page.routes(), page.allowedMethods())\n\n  if (debug) {\n    rootRouter.use('/debug', debug.routes(), debug.allowedMethods())\n  }\n\n  return rootRouter\n}\n\nfunction logUnhandledRejections() {\n  process.on('unhandledRejection', (reason, p) => {\n    // eslint-disable-next-line no-console\n    console.log('Unhandled Rejection at:', p, 'reason:', reason)\n  })\n}\n","module.exports = require(\"autoprefixer\");","module.exports = require(\"axios\");","module.exports = require(\"bcryptjs\");","module.exports = require(\"chalk\");","module.exports = require(\"clone-deep\");","module.exports = require(\"couchdb-base64\");","module.exports = require(\"decamelize\");","module.exports = require(\"dedent\");","module.exports = require(\"friendly-errors-webpack-plugin\");","module.exports = require(\"fs\");","module.exports = require(\"handlebars\");","module.exports = require(\"hashids\");","module.exports = require(\"koa\");","module.exports = require(\"koa-bodyparser\");","module.exports = require(\"koa-router\");","module.exports = require(\"koa-vue-ssr_init-dev-server\");","module.exports = require(\"koa2-ratelimit\");","module.exports = require(\"longjohn\");","module.exports = require(\"lru-cache\");","module.exports = require(\"mini-css-extract-plugin\");","module.exports = require(\"moment\");","module.exports = require(\"nodemailer\");","module.exports = require(\"object-inspect\");","module.exports = require(\"os\");","module.exports = require(\"path\");","module.exports = require(\"pify\");","module.exports = require(\"postcss-focus-within\");","module.exports = require(\"source-map-support/register\");","module.exports = require(\"type-detect\");","module.exports = require(\"vue-loader\");","module.exports = require(\"vue-server-renderer\");","module.exports = require(\"vue-server-renderer/client-plugin\");","module.exports = require(\"vue-server-renderer/server-plugin\");","module.exports = require(\"webpack\");","module.exports = require(\"webpack-node-externals\");","module.exports = require(\"winston\");","module.exports = require(\"winston-daily-rotate-file\");","module.exports = require(\"ws\");"],"sourceRoot":""}